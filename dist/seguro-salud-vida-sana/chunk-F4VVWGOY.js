import{a as D}from"./chunk-3GOBKWC2.js";import{a as k}from"./chunk-GB72KSVT.js";import{B as T,f as I,l as w,n as A,u as H}from"./chunk-RDO4C5ZH.js";import"./chunk-4YRY4IP2.js";import"./chunk-24563CTF.js";import{j as O,o as y}from"./chunk-EALBQTKK.js";import{p as P,q as E}from"./chunk-5DWL5JJZ.js";import{$a as f,Ab as o,Bb as l,Db as _,Ib as x,Na as a,Oa as c,Sb as S,Tb as M,_ as p,cb as C,ha as u,hb as e,ia as g,ib as i,nb as h,qb as b,rb as v}from"./chunk-3RWLLOHT.js";function j(r,n){r&1&&(e(0,"tr")(1,"th"),o(2,"Fecha de Consulta"),i(),e(3,"th"),o(4,"Motivo"),i(),e(5,"th"),o(6,"Diagn\xF3stico"),i(),e(7,"th"),o(8,"Nota"),i(),e(9,"th"),o(10,"M\xE9dico"),i(),e(11,"th"),o(12,"Acciones"),i()())}function B(r,n){if(r&1){let t=h();e(0,"tr")(1,"td"),o(2),S(3,"date"),i(),e(4,"td"),o(5),i(),e(6,"td"),o(7),i(),e(8,"td"),o(9),i(),e(10,"td"),o(11),i(),e(12,"td")(13,"button",3),b("click",function(){let m=u(t).$implicit,F=v();return g(F.irATratamiento(m.id))}),i()()()}if(r&2){let t=n.$implicit;a(2),l(M(3,6,t.fechaConsulta,"dd/MM/yyyy")),a(3),l(t.motivoConsulta),a(2),l(t.diagnostico),a(2),l(t.nota),a(2),_("",t.cupo.horario.medicoEspecialidad.medico==null?null:t.cupo.horario.medicoEspecialidad.medico.usuario.nombre," ",t.cupo.horario.medicoEspecialidad.medico==null?null:t.cupo.horario.medicoEspecialidad.medico.usuario.apellido,"")}}var d=class r{constructor(n,t,s,m){this.consultaService=n;this.authService=t;this.aseguradoService=s;this.router=m}consultas=[];ngOnInit(){this.cargarHistoriaClinica()}cargarHistoriaClinica(){let n=this.authService.getAuthenticatedUserEmail();n?this.aseguradoService.getAseguradoPorCorreo(n).subscribe(t=>{t.historiaClinica?.id!==void 0?this.obtenerConsultasPorHistoriaClinica(t.historiaClinica.id):console.error("El asegurado no tiene una historia cl\xEDnica asignada.")},t=>console.error("Error al obtener el asegurado:",t)):console.error("No se pudo obtener el correo del asegurado.")}obtenerConsultasPorHistoriaClinica(n){this.consultaService.getConsultasPorHistoriaClinicaId(n).subscribe(t=>{this.consultas=t,console.log("Consultas obtenidas:",this.consultas)},t=>console.error("Error al obtener las consultas:",t))}irATratamiento(n){this.router.navigate(["/tratamiento",n])}static \u0275fac=function(t){return new(t||r)(c(D),c(y),c(k),c(O))};static \u0275cmp=p({type:r,selectors:[["app-historia-clinica"]],standalone:!0,features:[x],decls:5,vars:3,consts:[[3,"value","sortField","sortOrder"],["pTemplate","header"],["pTemplate","body"],["pButton","","type","button","icon","pi pi-arrow-right",1,"p-button-rounded","p-button-info",3,"click"]],template:function(t,s){t&1&&(e(0,"h3"),o(1,"Historia Cl\xEDnica"),i(),e(2,"p-table",0),f(3,j,13,0,"ng-template",1)(4,B,14,9,"ng-template",2),i()),t&2&&(a(2),C("value",s.consultas)("sortField","fechaConsulta")("sortOrder",-1))},dependencies:[T,H,I,E,P,A,w],styles:["h3[_ngcontent-%COMP%]{text-align:center;color:#3f51b5;font-weight:700;font-size:1.8rem;margin:0 0 20px;border-bottom:2px solid #ddd;padding-bottom:.5rem}.p-table[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #00000026}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;font-weight:700;text-align:center;padding:12px}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:center;vertical-align:middle}.p-button-info[_ngcontent-%COMP%]{background-color:#1e88e5!important;border:none!important;color:#fff!important}.p-button-info[_ngcontent-%COMP%]:hover{background-color:#1565c0!important}.p-button-rounded[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center}"]})};export{d as default};
