import{a as Ot,b as jt,c as lt}from"./chunk-HWUH7ABB.js";import"./chunk-JCJIXIGU.js";import{a as Rt}from"./chunk-UJ32YO6L.js";import{a as Mt}from"./chunk-MZW6JDJM.js";import{a as At}from"./chunk-64ACLIH3.js";import{a as Dt,b as Wt}from"./chunk-37FNDG3E.js";import{B as kt,f as _t,k as Ht,l as xt,n as Tt,u as Ft}from"./chunk-LJKAMAZ5.js";import{j as Pt}from"./chunk-W5NNSEVP.js";import"./chunk-4YRY4IP2.js";import{a as wt}from"./chunk-S2R25WKX.js";import{h as bt,j as St,o as Ct}from"./chunk-V6WZIOIM.js";import{l as vt,m as mt,r as yt}from"./chunk-2HP4KZBQ.js";import{$a as q,Fb as ct,Gb as pt,Ka as K,La as G,N as ht,X as gt,Ya as nt,ea as et,eb as L,fa as it,fb as N,kb as rt,nb as X,ob as tt,xb as $,yb as J}from"./chunk-TOSOZOFE.js";import{e as Bt,g as It,h as dt}from"./chunk-ODN5LVDJ.js";var Et=Bt((Q,st)=>{"use strict";(function(E,F){if(typeof Q=="object"&&typeof st=="object")st.exports=F(function(){try{return lt(),dt(jt)}catch{}}());else if(typeof define=="function"&&define.amd)define(["jspdf"],F);else{var z=F(typeof Q=="object"?function(){try{return lt(),dt(jt)}catch{}}():E.jspdf);for(var B in z)(typeof Q=="object"?Q:E)[B]=z[B]}})(typeof globalThis<"u"?globalThis:typeof Q<"u"?Q:typeof window<"u"?window:typeof self<"u"?self:global,function(I){return function(){"use strict";var E={172:function(T,g){var _=this&&this.__extends||function(){var m=function(w,n){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var d in y)Object.prototype.hasOwnProperty.call(y,d)&&(S[d]=y[d])},m(w,n)};return function(w,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");m(w,n);function S(){this.constructor=w}w.prototype=n===null?Object.create(n):(S.prototype=n.prototype,new S)}}();Object.defineProperty(g,"__esModule",{value:!0}),g.CellHookData=g.HookData=void 0;var M=function(){function m(w,n,S){this.table=n,this.pageNumber=n.pageNumber,this.pageCount=this.pageNumber,this.settings=n.settings,this.cursor=S,this.doc=w.getDocument()}return m}();g.HookData=M;var b=function(m){_(w,m);function w(n,S,y,d,r,t){var e=m.call(this,n,S,t)||this;return e.cell=y,e.row=d,e.column=r,e.section=d.section,e}return w}(M);g.CellHookData=b},340:function(T,g,_){Object.defineProperty(g,"__esModule",{value:!0});var M=_(4),b=_(136),m=_(744),w=_(776),n=_(664),S=_(972);function y(d){d.API.autoTable=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e;r.length===1?e=r[0]:(console.error("Use of deprecated autoTable initiation"),e=r[2]||{},e.columns=r[0],e.body=r[1]);var l=(0,w.parseInput)(this,e),s=(0,S.createTable)(this,l);return(0,n.drawTable)(this,s),this},d.API.lastAutoTable=!1,d.API.previousAutoTable=!1,d.API.autoTable.previous=!1,d.API.autoTableText=function(r,t,e,l){(0,b.default)(r,t,e,l,this)},d.API.autoTableSetDefaults=function(r){return m.DocHandler.setDefaults(r,this),this},d.autoTableSetDefaults=function(r,t){m.DocHandler.setDefaults(r,t)},d.API.autoTableHtmlToJson=function(r,t){var e;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var l=new m.DocHandler(this),s=(0,M.parseHtml)(l,r,window,t,!1),i=s.head,f=s.body,p=((e=i[0])===null||e===void 0?void 0:e.map(function(v){return v.content}))||[];return{columns:p,rows:f,data:f}},d.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var r=this.lastAutoTable;return r&&r.finalY?r.finalY:0},d.API.autoTableAddPageContent=function(r){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),d.API.autoTable.globalDefaults||(d.API.autoTable.globalDefaults={}),d.API.autoTable.globalDefaults.addPageContent=r,this},d.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}g.default=y},136:function(T,g){Object.defineProperty(g,"__esModule",{value:!0});function _(M,b,m,w,n){w=w||{};var S=1.15,y=n.internal.scaleFactor,d=n.internal.getFontSize()/y,r=n.getLineHeightFactor?n.getLineHeightFactor():S,t=d*r,e=/\r\n|\r|\n/g,l="",s=1;if((w.valign==="middle"||w.valign==="bottom"||w.halign==="center"||w.halign==="right")&&(l=typeof M=="string"?M.split(e):M,s=l.length||1),m+=d*(2-S),w.valign==="middle"?m-=s/2*t:w.valign==="bottom"&&(m-=s*t),w.halign==="center"||w.halign==="right"){var i=d;if(w.halign==="center"&&(i*=.5),l&&s>=1){for(var f=0;f<l.length;f++)n.text(l[f],b-n.getStringUnitWidth(l[f])*i,m),m+=t;return n}b-=n.getStringUnitWidth(M)*i}return w.halign==="justify"?n.text(M,b,m,{maxWidth:w.maxWidth||100,align:"justify"}):n.text(M,b,m),n}g.default=_},420:function(T,g){Object.defineProperty(g,"__esModule",{value:!0}),g.getPageAvailableWidth=g.parseSpacing=g.getFillStyle=g.addTableBorder=g.getStringWidth=void 0;function _(n,S,y){y.applyStyles(S,!0);var d=Array.isArray(n)?n:[n],r=d.map(function(t){return y.getTextWidth(t)}).reduce(function(t,e){return Math.max(t,e)},0);return r}g.getStringWidth=_;function M(n,S,y,d){var r=S.settings.tableLineWidth,t=S.settings.tableLineColor;n.applyStyles({lineWidth:r,lineColor:t});var e=b(r,!1);e&&n.rect(y.x,y.y,S.getWidth(n.pageSize().width),d.y-y.y,e)}g.addTableBorder=M;function b(n,S){var y=n>0,d=S||S===0;return y&&d?"DF":y?"S":d?"F":null}g.getFillStyle=b;function m(n,S){var y,d,r,t;if(n=n||S,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=S}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(y=n.left)!==null&&y!==void 0?y:S,top:(d=n.top)!==null&&d!==void 0?d:S,right:(r=n.right)!==null&&r!==void 0?r:S,bottom:(t=n.bottom)!==null&&t!==void 0?t:S}):(typeof n!="number"&&(n=S),{top:n,right:n,bottom:n,left:n})}g.parseSpacing=m;function w(n,S){var y=m(S.settings.margin,0);return n.pageSize().width-(y.left+y.right)}g.getPageAvailableWidth=w},796:function(T,g){var _=this&&this.__extends||function(){var w=function(n,S){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,d){y.__proto__=d}||function(y,d){for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&(y[r]=d[r])},w(n,S)};return function(n,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");w(n,S);function y(){this.constructor=n}n.prototype=S===null?Object.create(S):(y.prototype=S.prototype,new y)}}();Object.defineProperty(g,"__esModule",{value:!0}),g.getTheme=g.defaultStyles=g.HtmlRowInput=void 0;var M=function(w){_(n,w);function n(S){var y=w.call(this)||this;return y._element=S,y}return n}(Array);g.HtmlRowInput=M;function b(w){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/w,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}g.defaultStyles=b;function m(w){var n={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return n[w]}g.getTheme=m},903:function(T,g,_){Object.defineProperty(g,"__esModule",{value:!0}),g.parseCss=void 0;var M=_(420);function b(y,d,r,t,e){var l={},s=1.3333333333333333,i=w(d,function(h){return e.getComputedStyle(h).backgroundColor});i!=null&&(l.fillColor=i);var f=w(d,function(h){return e.getComputedStyle(h).color});f!=null&&(l.textColor=f);var p=S(t,r);p&&(l.cellPadding=p);var v="borderTopColor",c=s*r,o=t.borderTopWidth;if(t.borderBottomWidth===o&&t.borderRightWidth===o&&t.borderLeftWidth===o){var P=(parseFloat(o)||0)/c;P&&(l.lineWidth=P)}else l.lineWidth={top:(parseFloat(t.borderTopWidth)||0)/c,right:(parseFloat(t.borderRightWidth)||0)/c,bottom:(parseFloat(t.borderBottomWidth)||0)/c,left:(parseFloat(t.borderLeftWidth)||0)/c},l.lineWidth.top||(l.lineWidth.right?v="borderRightColor":l.lineWidth.bottom?v="borderBottomColor":l.lineWidth.left&&(v="borderLeftColor"));var W=w(d,function(h){return e.getComputedStyle(h)[v]});W!=null&&(l.lineColor=W);var j=["left","right","center","justify"];j.indexOf(t.textAlign)!==-1&&(l.halign=t.textAlign),j=["middle","bottom","top"],j.indexOf(t.verticalAlign)!==-1&&(l.valign=t.verticalAlign);var u=parseInt(t.fontSize||"");isNaN(u)||(l.fontSize=u/s);var a=m(t);a&&(l.fontStyle=a);var C=(t.fontFamily||"").toLowerCase();return y.indexOf(C)!==-1&&(l.font=C),l}g.parseCss=b;function m(y){var d="";return(y.fontWeight==="bold"||y.fontWeight==="bolder"||parseInt(y.fontWeight)>=700)&&(d="bold"),(y.fontStyle==="italic"||y.fontStyle==="oblique")&&(d+="italic"),d}function w(y,d){var r=n(y,d);if(!r)return null;var t=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!t||!Array.isArray(t))return null;var e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],l=parseInt(t[4]);return l===0||isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function n(y,d){var r=d(y);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?y.parentElement==null?null:n(y.parentElement,d):r}function S(y,d){var r=[y.paddingTop,y.paddingRight,y.paddingBottom,y.paddingLeft],t=96/(72/d),e=(parseInt(y.lineHeight)-parseInt(y.fontSize))/d/2,l=r.map(function(i){return parseInt(i||"0")/t}),s=(0,M.parseSpacing)(l,0);return e>s.top&&(s.top=e),e>s.bottom&&(s.bottom=e),s}},744:function(T,g){Object.defineProperty(g,"__esModule",{value:!0}),g.DocHandler=void 0;var _={},M=function(){function b(m){this.jsPDFDocument=m,this.userStyles={textColor:m.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:m.internal.getFontSize(),fontStyle:m.internal.getFont().fontStyle,font:m.internal.getFont().fontName,lineWidth:m.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:m.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return b.setDefaults=function(m,w){w===void 0&&(w=null),w?w.__autoTableDocumentDefaults=m:_=m},b.unifyColor=function(m){return Array.isArray(m)?m:typeof m=="number"?[m,m,m]:typeof m=="string"?[m]:null},b.prototype.applyStyles=function(m,w){var n,S,y;w===void 0&&(w=!1),m.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(m.fontStyle);var d=this.jsPDFDocument.internal.getFont(),r=d.fontStyle,t=d.fontName;if(m.font&&(t=m.font),m.fontStyle){r=m.fontStyle;var e=this.getFontList()[t];e&&e.indexOf(r)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e[0]),r=e[0])}if(this.jsPDFDocument.setFont(t,r),m.fontSize&&this.jsPDFDocument.setFontSize(m.fontSize),!w){var l=b.unifyColor(m.fillColor);l&&(n=this.jsPDFDocument).setFillColor.apply(n,l),l=b.unifyColor(m.textColor),l&&(S=this.jsPDFDocument).setTextColor.apply(S,l),l=b.unifyColor(m.lineColor),l&&(y=this.jsPDFDocument).setDrawColor.apply(y,l),typeof m.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(m.lineWidth)}},b.prototype.splitTextToSize=function(m,w,n){return this.jsPDFDocument.splitTextToSize(m,w,n)},b.prototype.rect=function(m,w,n,S,y){return this.jsPDFDocument.rect(m,w,n,S,y)},b.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},b.prototype.getTextWidth=function(m){return this.jsPDFDocument.getTextWidth(m)},b.prototype.getDocument=function(){return this.jsPDFDocument},b.prototype.setPage=function(m){this.jsPDFDocument.setPage(m)},b.prototype.addPage=function(){return this.jsPDFDocument.addPage()},b.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},b.prototype.getGlobalOptions=function(){return _||{}},b.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},b.prototype.pageSize=function(){var m=this.jsPDFDocument.internal.pageSize;return m.width==null&&(m={width:m.getWidth(),height:m.getHeight()}),m},b.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},b.prototype.getLineHeightFactor=function(){var m=this.jsPDFDocument;return m.getLineHeightFactor?m.getLineHeightFactor():1.15},b.prototype.getLineHeight=function(m){return m/this.scaleFactor()*this.getLineHeightFactor()},b.prototype.pageNumber=function(){var m=this.jsPDFDocument.internal.getCurrentPageInfo();return m?m.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},b}();g.DocHandler=M},4:function(T,g,_){Object.defineProperty(g,"__esModule",{value:!0}),g.parseHtml=void 0;var M=_(903),b=_(796);function m(S,y,d,r,t){var e,l;r===void 0&&(r=!1),t===void 0&&(t=!1);var s;typeof y=="string"?s=d.document.querySelector(y):s=y;var i=Object.keys(S.getFontList()),f=S.scaleFactor(),p=[],v=[],c=[];if(!s)return console.error("Html table could not be found with input: ",y),{head:p,body:v,foot:c};for(var o=0;o<s.rows.length;o++){var P=s.rows[o],W=(l=(e=P?.parentElement)===null||e===void 0?void 0:e.tagName)===null||l===void 0?void 0:l.toLowerCase(),j=w(i,f,d,P,r,t);j&&(W==="thead"?p.push(j):W==="tfoot"?c.push(j):v.push(j))}return{head:p,body:v,foot:c}}g.parseHtml=m;function w(S,y,d,r,t,e){for(var l=new b.HtmlRowInput(r),s=0;s<r.cells.length;s++){var i=r.cells[s],f=d.getComputedStyle(i);if(t||f.display!=="none"){var p=void 0;e&&(p=(0,M.parseCss)(S,i,y,f,d)),l.push({rowSpan:i.rowSpan,colSpan:i.colSpan,styles:p,_element:i,content:n(i)})}}var v=d.getComputedStyle(r);if(l.length>0&&(t||v.display!=="none"))return l}function n(S){var y=S.cloneNode(!0);return y.innerHTML=y.innerHTML.replace(/\n/g,"").replace(/ +/g," "),y.innerHTML=y.innerHTML.split(/<br.*?>/).map(function(d){return d.trim()}).join(`
`),y.innerText||y.textContent||""}},776:function(T,g,_){Object.defineProperty(g,"__esModule",{value:!0}),g.parseInput=void 0;var M=_(4),b=_(356),m=_(420),w=_(744),n=_(792);function S(s,i){var f=new w.DocHandler(s),p=f.getDocumentOptions(),v=f.getGlobalOptions();(0,n.default)(f,v,p,i);var c=(0,b.assign)({},v,p,i),o;typeof window<"u"&&(o=window);var P=y(v,p,i),W=d(v,p,i),j=r(f,c),u=e(f,c,o);return{id:i.tableId,content:u,hooks:W,styles:P,settings:j}}g.parseInput=S;function y(s,i,f){for(var p={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},v=function(W){if(W==="columnStyles"){var j=s[W],u=i[W],a=f[W];p.columnStyles=(0,b.assign)({},j,u,a)}else{var C=[s,i,f],h=C.map(function(x){return x[W]||{}});p[W]=(0,b.assign)({},h[0],h[1],h[2])}},c=0,o=Object.keys(p);c<o.length;c++){var P=o[c];v(P)}return p}function d(s,i,f){for(var p=[s,i,f],v={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},c=0,o=p;c<o.length;c++){var P=o[c];P.didParseCell&&v.didParseCell.push(P.didParseCell),P.willDrawCell&&v.willDrawCell.push(P.willDrawCell),P.didDrawCell&&v.didDrawCell.push(P.didDrawCell),P.willDrawPage&&v.willDrawPage.push(P.willDrawPage),P.didDrawPage&&v.didDrawPage.push(P.didDrawPage)}return v}function r(s,i){var f,p,v,c,o,P,W,j,u,a,C,h,x=(0,m.parseSpacing)(i.margin,40/s.scaleFactor()),H=(f=t(s,i.startY))!==null&&f!==void 0?f:x.top,D;i.showFoot===!0?D="everyPage":i.showFoot===!1?D="never":D=(p=i.showFoot)!==null&&p!==void 0?p:"everyPage";var k;i.showHead===!0?k="everyPage":i.showHead===!1?k="never":k=(v=i.showHead)!==null&&v!==void 0?v:"everyPage";var O=(c=i.useCss)!==null&&c!==void 0?c:!1,R=i.theme||(O?"plain":"striped"),A=!!i.horizontalPageBreak,U=(o=i.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(P=i.includeHiddenHtml)!==null&&P!==void 0?P:!1,useCss:O,theme:R,startY:H,margin:x,pageBreak:(W=i.pageBreak)!==null&&W!==void 0?W:"auto",rowPageBreak:(j=i.rowPageBreak)!==null&&j!==void 0?j:"auto",tableWidth:(u=i.tableWidth)!==null&&u!==void 0?u:"auto",showHead:k,showFoot:D,tableLineWidth:(a=i.tableLineWidth)!==null&&a!==void 0?a:0,tableLineColor:(C=i.tableLineColor)!==null&&C!==void 0?C:200,horizontalPageBreak:A,horizontalPageBreakRepeat:U,horizontalPageBreakBehaviour:(h=i.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function t(s,i){var f=s.getLastAutoTable(),p=s.scaleFactor(),v=s.pageNumber(),c=!1;if(f&&f.startPageNumber){var o=f.startPageNumber+f.pageNumber-1;c=o===v}return typeof i=="number"?i:(i==null||i===!1)&&c&&f?.finalY!=null?f.finalY+20/p:null}function e(s,i,f){var p=i.head||[],v=i.body||[],c=i.foot||[];if(i.html){var o=i.includeHiddenHtml;if(f){var P=(0,M.parseHtml)(s,i.html,f,o,i.useCss)||{};p=P.head||p,v=P.body||p,c=P.foot||p}else console.error("Cannot parse html in non browser environment")}var W=i.columns||l(p,v,c);return{columns:W,head:p,body:v,foot:c}}function l(s,i,f){var p=s[0]||i[0]||f[0]||[],v=[];return Object.keys(p).filter(function(c){return c!=="_element"}).forEach(function(c){var o=1,P;Array.isArray(p)?P=p[parseInt(c)]:P=p[c],typeof P=="object"&&!Array.isArray(P)&&(o=P?.colSpan||1);for(var W=0;W<o;W++){var j=void 0;Array.isArray(p)?j=v.length:j=c+(W>0?"_".concat(W):"");var u={dataKey:j};v.push(u)}}),v}},792:function(T,g){Object.defineProperty(g,"__esModule",{value:!0});function _(b,m,w,n){for(var S=function(t){t&&typeof t!="object"&&console.error("The options parameter should be of type object, is: "+typeof t),typeof t.extendWidth<"u"&&(t.tableWidth=t.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof t.margins<"u"&&(typeof t.margin>"u"&&(t.margin=t.margins),console.error("Use of deprecated option: margins, use margin instead.")),t.startY&&typeof t.startY!="number"&&(console.error("Invalid value for startY option",t.startY),delete t.startY),!t.didDrawPage&&(t.afterPageContent||t.beforePageContent||t.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),t.didDrawPage=function(c){b.applyStyles(b.userStyles),t.beforePageContent&&t.beforePageContent(c),b.applyStyles(b.userStyles),t.afterPageContent&&t.afterPageContent(c),b.applyStyles(b.userStyles),t.afterPageAdd&&c.pageNumber>1&&c.afterPageAdd(c),b.applyStyles(b.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(c){t[c]&&console.error('The "'.concat(c,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(c){var o=c[0],P=c[1];t[P]&&(console.error("Use of deprecated option ".concat(P,". Use ").concat(o," instead")),t[o]=t[P])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(c){var o=typeof c=="string"?c:c[0],P=typeof c=="string"?c:c[1];typeof t[o]<"u"&&(typeof t.styles[P]>"u"&&(t.styles[P]=t[o]),console.error("Use of deprecated option: "+o+", use the style "+P+" instead."))});for(var e=0,l=["styles","bodyStyles","headStyles","footStyles"];e<l.length;e++){var s=l[e];M(t[s]||{})}for(var i=t.columnStyles||{},f=0,p=Object.keys(i);f<p.length;f++){var v=p[f];M(i[v]||{})}},y=0,d=[m,w,n];y<d.length;y++){var r=d[y];S(r)}}g.default=_;function M(b){b.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),b.minCellHeight||(b.minCellHeight=b.rowHeight)):b.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),b.cellWidth||(b.cellWidth=b.columnWidth))}},260:function(T,g,_){Object.defineProperty(g,"__esModule",{value:!0}),g.Column=g.Cell=g.Row=g.Table=void 0;var M=_(796),b=_(172),m=_(420),w=function(){function d(r,t){this.pageNumber=1,this.pageCount=1,this.id=r.id,this.settings=r.settings,this.styles=r.styles,this.hooks=r.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return d.prototype.getHeadHeight=function(r){return this.head.reduce(function(t,e){return t+e.getMaxCellHeight(r)},0)},d.prototype.getFootHeight=function(r){return this.foot.reduce(function(t,e){return t+e.getMaxCellHeight(r)},0)},d.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},d.prototype.callCellHooks=function(r,t,e,l,s,i){for(var f=0,p=t;f<p.length;f++){var v=p[f],c=new b.CellHookData(r,this,e,l,s,i),o=v(c)===!1;if(e.text=Array.isArray(e.text)?e.text:[e.text],o)return!1}return!0},d.prototype.callEndPageHooks=function(r,t){r.applyStyles(r.userStyles);for(var e=0,l=this.hooks.didDrawPage;e<l.length;e++){var s=l[e];s(new b.HookData(r,this,t))}},d.prototype.callWillDrawPageHooks=function(r,t){for(var e=0,l=this.hooks.willDrawPage;e<l.length;e++){var s=l[e];s(new b.HookData(r,this,t))}},d.prototype.getWidth=function(r){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(l,s){return l+s.wrappedWidth},0);return t}else{var e=this.settings.margin;return r-e.left-e.right}},d}();g.Table=w;var n=function(){function d(r,t,e,l,s){s===void 0&&(s=!1),this.height=0,this.raw=r,r instanceof M.HtmlRowInput&&(this.raw=r._element,this.element=r._element),this.index=t,this.section=e,this.cells=l,this.spansMultiplePages=s}return d.prototype.getMaxCellHeight=function(r){var t=this;return r.reduce(function(e,l){var s;return Math.max(e,((s=t.cells[l.index])===null||s===void 0?void 0:s.height)||0)},0)},d.prototype.hasRowSpan=function(r){var t=this;return r.filter(function(e){var l=t.cells[e.index];return l?l.rowSpan>1:!1}).length>0},d.prototype.canEntireRowFit=function(r,t){return this.getMaxCellHeight(t)<=r},d.prototype.getMinimumRowHeight=function(r,t){var e=this;return r.reduce(function(l,s){var i=e.cells[s.index];if(!i)return 0;var f=t.getLineHeight(i.styles.fontSize),p=i.padding("vertical"),v=p+f;return v>l?v:l},0)},d}();g.Row=n;var S=function(){function d(r,t,e){var l,s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=e,this.raw=r;var i=r;r!=null&&typeof r=="object"&&!Array.isArray(r)?(this.rowSpan=r.rowSpan||1,this.colSpan=r.colSpan||1,i=(s=(l=r.content)!==null&&l!==void 0?l:r.title)!==null&&s!==void 0?s:r,r._element&&(this.raw=r._element)):(this.rowSpan=1,this.colSpan=1);var f=i!=null?""+i:"",p=/\r\n|\r|\n/g;this.text=f.split(p)}return d.prototype.getTextPos=function(){var r;if(this.styles.valign==="top")r=this.y+this.padding("top");else if(this.styles.valign==="bottom")r=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");r=this.y+t/2+this.padding("top")}var e;if(this.styles.halign==="right")e=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var l=this.width-this.padding("horizontal");e=this.x+l/2+this.padding("left")}else e=this.x+this.padding("left");return{x:e,y:r}},d.prototype.getContentHeight=function(r,t){t===void 0&&(t=1.15);var e=Array.isArray(this.text)?this.text.length:1,l=this.styles.fontSize/r*t,s=e*l+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},d.prototype.padding=function(r){var t=(0,m.parseSpacing)(this.styles.cellPadding,0);return r==="vertical"?t.top+t.bottom:r==="horizontal"?t.left+t.right:t[r]},d}();g.Cell=S;var y=function(){function d(r,t,e){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=r,this.raw=t,this.index=e}return d.prototype.getMaxCustomCellWidth=function(r){for(var t=0,e=0,l=r.allRows();e<l.length;e++){var s=l[e],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(t=Math.max(t,i.styles.cellWidth))}return t},d}();g.Column=y},356:function(T,g){Object.defineProperty(g,"__esModule",{value:!0}),g.assign=void 0;function _(M,b,m,w,n){if(M==null)throw new TypeError("Cannot convert undefined or null to object");for(var S=Object(M),y=1;y<arguments.length;y++){var d=arguments[y];if(d!=null)for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&(S[r]=d[r])}return S}g.assign=_},972:function(T,g,_){Object.defineProperty(g,"__esModule",{value:!0}),g.createTable=void 0;var M=_(744),b=_(260),m=_(324),w=_(796),n=_(356);function S(s,i){var f=new M.DocHandler(s),p=y(i,f.scaleFactor()),v=new b.Table(i,p);return(0,m.calculateWidths)(f,v),f.applyStyles(f.userStyles),v}g.createTable=S;function y(s,i){var f=s.content,p=e(f.columns);if(f.head.length===0){var v=r(p,"head");v&&f.head.push(v)}if(f.foot.length===0){var v=r(p,"foot");v&&f.foot.push(v)}var c=s.settings.theme,o=s.styles;return{columns:p,head:d("head",f.head,p,o,c,i),body:d("body",f.body,p,o,c,i),foot:d("foot",f.foot,p,o,c,i)}}function d(s,i,f,p,v,c){var o={},P=i.map(function(W,j){for(var u=0,a={},C=0,h=0,x=0,H=f;x<H.length;x++){var D=H[x];if(o[D.index]==null||o[D.index].left===0)if(h===0){var k=void 0;Array.isArray(W)?k=W[D.index-C-u]:k=W[D.dataKey];var O={};typeof k=="object"&&!Array.isArray(k)&&(O=k?.styles||{});var R=l(s,D,j,v,p,c,O),A=new b.Cell(k,R,s);a[D.dataKey]=A,a[D.index]=A,h=A.colSpan-1,o[D.index]={left:A.rowSpan-1,times:h}}else h--,C++;else o[D.index].left--,h=o[D.index].times,u++}return new b.Row(W,j,s,a)});return P}function r(s,i){var f={};return s.forEach(function(p){if(p.raw!=null){var v=t(i,p.raw);v!=null&&(f[p.dataKey]=v)}}),Object.keys(f).length>0?f:null}function t(s,i){if(s==="head"){if(typeof i=="object")return i.header||i.title||null;if(typeof i=="string"||typeof i=="number")return i}else if(s==="foot"&&typeof i=="object")return i.footer;return null}function e(s){return s.map(function(i,f){var p,v,c;return typeof i=="object"?c=(v=(p=i.dataKey)!==null&&p!==void 0?p:i.key)!==null&&v!==void 0?v:f:c=f,new b.Column(c,i,f)})}function l(s,i,f,p,v,c,o){var P=(0,w.getTheme)(p),W;s==="head"?W=v.headStyles:s==="body"?W=v.bodyStyles:s==="foot"&&(W=v.footStyles);var j=(0,n.assign)({},P.table,P[s],v.styles,W),u=v.columnStyles[i.dataKey]||v.columnStyles[i.index]||{},a=s==="body"?u:{},C=s==="body"&&f%2===0?(0,n.assign)({},P.alternateRow,v.alternateRowStyles):{},h=(0,w.defaultStyles)(c),x=(0,n.assign)({},h,j,C,a);return(0,n.assign)(x,o)}},664:function(T,g,_){Object.defineProperty(g,"__esModule",{value:!0}),g.addPage=g.drawTable=void 0;var M=_(420),b=_(260),m=_(744),w=_(356),n=_(136),S=_(224);function y(u,a){var C=a.settings,h=C.startY,x=C.margin,H={x:x.left,y:h},D=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns),k=h+x.bottom+D;if(C.pageBreak==="avoid"){var O=a.body,R=O.reduce(function(Y,V){return Y+V.height},0);k+=R}var A=new m.DocHandler(u);(C.pageBreak==="always"||C.startY!=null&&k>A.pageSize().height)&&(j(A),H.y=x.top),a.callWillDrawPageHooks(A,H);var U=(0,w.assign)({},H);a.startPageNumber=A.pageNumber(),C.horizontalPageBreak?d(A,a,U,H):(A.applyStyles(A.userStyles),(C.showHead==="firstPage"||C.showHead==="everyPage")&&a.head.forEach(function(Y){return v(A,a,Y,H,a.columns)}),A.applyStyles(A.userStyles),a.body.forEach(function(Y,V){var Z=V===a.body.length-1;p(A,a,Y,Z,U,H,a.columns)}),A.applyStyles(A.userStyles),(C.showFoot==="lastPage"||C.showFoot==="everyPage")&&a.foot.forEach(function(Y){return v(A,a,Y,H,a.columns)})),(0,M.addTableBorder)(A,a,U,H),a.callEndPageHooks(A,H),a.finalY=H.y,u.lastAutoTable=a,u.previousAutoTable=a,u.autoTable&&(u.autoTable.previous=a),A.applyStyles(A.userStyles)}g.drawTable=y;function d(u,a,C,h){var x=(0,S.calculateAllColumnsCanFitInPage)(u,a),H=a.settings;if(H.horizontalPageBreakBehaviour==="afterAllRows")x.forEach(function(R,A){u.applyStyles(u.userStyles),A>0?W(u,a,C,h,R.columns,!0):r(u,a,h,R.columns),t(u,a,C,h,R.columns),l(u,a,h,R.columns)});else for(var D=-1,k=x[0],O=function(){var R=D;if(k){u.applyStyles(u.userStyles);var A=k.columns;D>=0?W(u,a,C,h,A,!0):r(u,a,h,A),R=e(u,a,D+1,h,A),l(u,a,h,A)}var U=R-D;x.slice(1).forEach(function(Y){u.applyStyles(u.userStyles),W(u,a,C,h,Y.columns,!0),e(u,a,D+1,h,Y.columns,U),l(u,a,h,Y.columns)}),D=R};D<a.body.length-1;)O()}function r(u,a,C,h){var x=a.settings;u.applyStyles(u.userStyles),(x.showHead==="firstPage"||x.showHead==="everyPage")&&a.head.forEach(function(H){return v(u,a,H,C,h)})}function t(u,a,C,h,x){u.applyStyles(u.userStyles),a.body.forEach(function(H,D){var k=D===a.body.length-1;p(u,a,H,k,C,h,x)})}function e(u,a,C,h,x,H){u.applyStyles(u.userStyles),H=H??a.body.length;var D=Math.min(C+H,a.body.length),k=-1;return a.body.slice(C,D).forEach(function(O,R){var A=C+R===a.body.length-1,U=P(u,a,A,h);O.canEntireRowFit(U,x)&&(v(u,a,O,h,x),k=C+R)}),k}function l(u,a,C,h){var x=a.settings;u.applyStyles(u.userStyles),(x.showFoot==="lastPage"||x.showFoot==="everyPage")&&a.foot.forEach(function(H){return v(u,a,H,C,h)})}function s(u,a,C){var h=C.getLineHeight(u.styles.fontSize),x=u.padding("vertical"),H=Math.floor((a-x)/h);return Math.max(0,H)}function i(u,a,C,h){var x={};u.spansMultiplePages=!0,u.height=0;for(var H=0,D=0,k=C.columns;D<k.length;D++){var O=k[D],R=u.cells[O.index];if(R){Array.isArray(R.text)||(R.text=[R.text]);var A=new b.Cell(R.raw,R.styles,R.section);A=(0,w.assign)(A,R),A.text=[];var U=s(R,a,h);R.text.length>U&&(A.text=R.text.splice(U,R.text.length));var Y=h.scaleFactor(),V=h.getLineHeightFactor();R.contentHeight=R.getContentHeight(Y,V),R.contentHeight>=a&&(R.contentHeight=a,A.styles.minCellHeight-=a),R.contentHeight>u.height&&(u.height=R.contentHeight),A.contentHeight=A.getContentHeight(Y,V),A.contentHeight>H&&(H=A.contentHeight),x[O.index]=A}}var Z=new b.Row(u.raw,-1,u.section,x,!0);Z.height=H;for(var ot=0,ut=C.columns;ot<ut.length;ot++){var O=ut[ot],A=Z.cells[O.index];A&&(A.height=Z.height);var R=u.cells[O.index];R&&(R.height=u.height)}return Z}function f(u,a,C,h){var x=u.pageSize().height,H=h.settings.margin,D=H.top+H.bottom,k=x-D;a.section==="body"&&(k-=h.getHeadHeight(h.columns)+h.getFootHeight(h.columns));var O=a.getMinimumRowHeight(h.columns,u),R=O<C;if(O>k)return console.error("Will not be able to print row ".concat(a.index," correctly since it's minimum height is larger than page height")),!0;if(!R)return!1;var A=a.hasRowSpan(h.columns),U=a.getMaxCellHeight(h.columns)>k;return U?(A&&console.error("The content of row ".concat(a.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(A||h.settings.rowPageBreak==="avoid")}function p(u,a,C,h,x,H,D){var k=P(u,a,h,H);if(C.canEntireRowFit(k,D))v(u,a,C,H,D);else if(f(u,C,k,a)){var O=i(C,k,a,u);v(u,a,C,H,D),W(u,a,x,H,D),p(u,a,O,h,x,H,D)}else W(u,a,x,H,D),p(u,a,C,h,x,H,D)}function v(u,a,C,h,x){h.x=a.settings.margin.left;for(var H=0,D=x;H<D.length;H++){var k=D[H],O=C.cells[k.index];if(!O){h.x+=k.width;continue}u.applyStyles(O.styles),O.x=h.x,O.y=h.y;var R=a.callCellHooks(u,a.hooks.willDrawCell,O,C,k,h);if(R===!1){h.x+=k.width;continue}c(u,O,h);var A=O.getTextPos();(0,n.default)(O.text,A.x,A.y,{halign:O.styles.halign,valign:O.styles.valign,maxWidth:Math.ceil(O.width-O.padding("left")-O.padding("right"))},u.getDocument()),a.callCellHooks(u,a.hooks.didDrawCell,O,C,k,h),h.x+=k.width}h.y+=C.height}function c(u,a,C){var h=a.styles;if(u.getDocument().setFillColor(u.getDocument().getFillColor()),typeof h.lineWidth=="number"){var x=(0,M.getFillStyle)(h.lineWidth,h.fillColor);x&&u.rect(a.x,C.y,a.width,a.height,x)}else typeof h.lineWidth=="object"&&(h.fillColor&&u.rect(a.x,C.y,a.width,a.height,"F"),o(u,a,C,h.lineWidth))}function o(u,a,C,h){var x,H,D,k;h.top&&(x=C.x,H=C.y,D=C.x+a.width,k=C.y,h.right&&(D+=.5*h.right),h.left&&(x-=.5*h.left),O(h.top,x,H,D,k)),h.bottom&&(x=C.x,H=C.y+a.height,D=C.x+a.width,k=C.y+a.height,h.right&&(D+=.5*h.right),h.left&&(x-=.5*h.left),O(h.bottom,x,H,D,k)),h.left&&(x=C.x,H=C.y,D=C.x,k=C.y+a.height,h.top&&(H-=.5*h.top),h.bottom&&(k+=.5*h.bottom),O(h.left,x,H,D,k)),h.right&&(x=C.x+a.width,H=C.y,D=C.x+a.width,k=C.y+a.height,h.top&&(H-=.5*h.top),h.bottom&&(k+=.5*h.bottom),O(h.right,x,H,D,k));function O(R,A,U,Y,V){u.getDocument().setLineWidth(R),u.getDocument().line(A,U,Y,V,"S")}}function P(u,a,C,h){var x=a.settings.margin.bottom,H=a.settings.showFoot;return(H==="everyPage"||H==="lastPage"&&C)&&(x+=a.getFootHeight(a.columns)),u.pageSize().height-h.y-x}function W(u,a,C,h,x,H){x===void 0&&(x=[]),H===void 0&&(H=!1),u.applyStyles(u.userStyles),a.settings.showFoot==="everyPage"&&!H&&a.foot.forEach(function(k){return v(u,a,k,h,x)}),a.callEndPageHooks(u,h);var D=a.settings.margin;(0,M.addTableBorder)(u,a,C,h),j(u),a.pageNumber++,a.pageCount++,h.x=D.left,h.y=D.top,C.y=D.top,a.callWillDrawPageHooks(u,h),a.settings.showHead==="everyPage"&&(a.head.forEach(function(k){return v(u,a,k,h,x)}),u.applyStyles(u.userStyles))}g.addPage=W;function j(u){var a=u.pageNumber();u.setPage(a+1);var C=u.pageNumber();return C===a?(u.addPage(),!0):!1}},224:function(T,g,_){Object.defineProperty(g,"__esModule",{value:!0}),g.calculateAllColumnsCanFitInPage=void 0;var M=_(420);function b(w,n,S){var y;S===void 0&&(S={});var d=(0,M.getPageAvailableWidth)(w,n),r=new Map,t=[],e=[],l=[];n.settings.horizontalPageBreakRepeat,Array.isArray(n.settings.horizontalPageBreakRepeat)?l=n.settings.horizontalPageBreakRepeat:(typeof n.settings.horizontalPageBreakRepeat=="string"||typeof n.settings.horizontalPageBreakRepeat=="number")&&(l=[n.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var v=n.columns.find(function(c){return c.dataKey===p||c.index===p});v&&!r.has(v.index)&&(r.set(v.index,!0),t.push(v.index),e.push(n.columns[v.index]),d-=v.wrappedWidth)});for(var s=!0,i=(y=S?.start)!==null&&y!==void 0?y:0;i<n.columns.length;){if(r.has(i)){i++;continue}var f=n.columns[i].wrappedWidth;if(s||d>=f)s=!1,t.push(i),e.push(n.columns[i]),d-=f;else break;i++}return{colIndexes:t,columns:e,lastIndex:i-1}}function m(w,n){for(var S=[],y=0;y<n.columns.length;y++){var d=b(w,n,{start:y});d.columns.length&&(S.push(d),y=d.lastIndex)}return S}g.calculateAllColumnsCanFitInPage=m},324:function(T,g,_){Object.defineProperty(g,"__esModule",{value:!0}),g.ellipsize=g.resizeColumns=g.calculateWidths=void 0;var M=_(420);function b(t,e){m(t,e);var l=[],s=0;e.columns.forEach(function(f){var p=f.getMaxCustomCellWidth(e);p?f.width=p:(f.width=f.wrappedWidth,l.push(f)),s+=f.width});var i=e.getWidth(t.pageSize().width)-s;i&&(i=w(l,i,function(f){return Math.max(f.minReadableWidth,f.minWidth)})),i&&(i=w(l,i,function(f){return f.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),S(e),y(e,t),n(e)}g.calculateWidths=b;function m(t,e){var l=t.scaleFactor(),s=e.settings.horizontalPageBreak,i=(0,M.getPageAvailableWidth)(t,e);e.allRows().forEach(function(f){for(var p=0,v=e.columns;p<v.length;p++){var c=v[p],o=f.cells[c.index];if(o){var P=e.hooks.didParseCell;e.callCellHooks(t,P,o,f,c,null);var W=o.padding("horizontal");o.contentWidth=(0,M.getStringWidth)(o.text,o.styles,t)+W;var j=(0,M.getStringWidth)(o.text.join(" ").split(/[^\S\u00A0]+/),o.styles,t);if(o.minReadableWidth=j+o.padding("horizontal"),typeof o.styles.cellWidth=="number")o.minWidth=o.styles.cellWidth,o.wrappedWidth=o.styles.cellWidth;else if(o.styles.cellWidth==="wrap"||s===!0)o.contentWidth>i?(o.minWidth=i,o.wrappedWidth=i):(o.minWidth=o.contentWidth,o.wrappedWidth=o.contentWidth);else{var u=10/l;o.minWidth=o.styles.minCellWidth||u,o.wrappedWidth=o.contentWidth,o.minWidth>o.wrappedWidth&&(o.wrappedWidth=o.minWidth)}}}}),e.allRows().forEach(function(f){for(var p=0,v=e.columns;p<v.length;p++){var c=v[p],o=f.cells[c.index];if(o&&o.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,o.wrappedWidth),c.minWidth=Math.max(c.minWidth,o.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,o.minReadableWidth);else{var P=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},W=P.cellWidth||P.minCellWidth;W&&typeof W=="number"&&(c.minWidth=W,c.wrappedWidth=W)}o&&(o.colSpan>1&&!c.minWidth&&(c.minWidth=o.minWidth),o.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=o.minWidth))}})}function w(t,e,l){for(var s=e,i=t.reduce(function(u,a){return u+a.wrappedWidth},0),f=0;f<t.length;f++){var p=t[f],v=p.wrappedWidth/i,c=s*v,o=p.width+c,P=l(p),W=o<P?P:o;e-=W-p.width,p.width=W}if(e=Math.round(e*1e10)/1e10,e){var j=t.filter(function(u){return e<0?u.width>l(u):!0});j.length&&(e=w(j,e,l))}return e}g.resizeColumns=w;function n(t){for(var e={},l=1,s=t.allRows(),i=0;i<s.length;i++)for(var f=s[i],p=0,v=t.columns;p<v.length;p++){var c=v[p],o=e[c.index];if(l>1)l--,delete f.cells[c.index];else if(o)o.cell.height+=f.height,l=o.cell.colSpan,delete f.cells[c.index],o.left--,o.left<=1&&delete e[c.index];else{var P=f.cells[c.index];if(!P)continue;if(P.height=f.height,P.rowSpan>1){var W=s.length-i,j=P.rowSpan>W?W:P.rowSpan;e[c.index]={cell:P,left:j,row:f}}}}}function S(t){for(var e=t.allRows(),l=0;l<e.length;l++)for(var s=e[l],i=null,f=0,p=0,v=0;v<t.columns.length;v++){var c=t.columns[v];if(p-=1,p>1&&t.columns[v+1])f+=c.width,delete s.cells[c.index];else if(i){var o=i;delete s.cells[c.index],i=null,o.width=c.width+f}else{var o=s.cells[c.index];if(!o)continue;if(p=o.colSpan,f=0,o.colSpan>1){i=o,f+=c.width;continue}o.width=c.width+f}}}function y(t,e){for(var l={count:0,height:0},s=0,i=t.allRows();s<i.length;s++){for(var f=i[s],p=0,v=t.columns;p<v.length;p++){var c=v[p],o=f.cells[c.index];if(o){e.applyStyles(o.styles,!0);var P=o.width-o.padding("horizontal");if(o.styles.overflow==="linebreak")o.text=e.splitTextToSize(o.text,P+1/e.scaleFactor(),{fontSize:o.styles.fontSize});else if(o.styles.overflow==="ellipsize")o.text=d(o.text,P,o.styles,e,"...");else if(o.styles.overflow==="hidden")o.text=d(o.text,P,o.styles,e,"");else if(typeof o.styles.overflow=="function"){var W=o.styles.overflow(o.text,P);typeof W=="string"?o.text=[W]:o.text=W}o.contentHeight=o.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var j=o.contentHeight/o.rowSpan;o.rowSpan>1&&l.count*l.height<j*o.rowSpan?l={height:j,count:o.rowSpan}:l&&l.count>0&&l.height>j&&(j=l.height),j>f.height&&(f.height=j)}}l.count--}}function d(t,e,l,s,i){return t.map(function(f){return r(f,e,l,s,i)})}g.ellipsize=d;function r(t,e,l,s,i){var f=1e4*s.scaleFactor();if(e=Math.ceil(e*f)/f,e>=(0,M.getStringWidth)(t,l,s))return t;for(;e<(0,M.getStringWidth)(t+i,l,s)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}},964:function(T){if(typeof I>"u"){var g=new Error("Cannot find module 'undefined'");throw g.code="MODULE_NOT_FOUND",g}T.exports=I}},F={};function z(T){var g=F[T];if(g!==void 0)return g.exports;var _=F[T]={exports:{}};return E[T].call(_.exports,_,_.exports,z),_.exports}var B={};return function(){var T=B;Object.defineProperty(T,"__esModule",{value:!0}),T.Cell=T.Column=T.Row=T.Table=T.CellHookData=T.__drawTable=T.__createTable=T.applyPlugin=void 0;var g=z(340),_=z(776),M=z(664),b=z(972),m=z(260);Object.defineProperty(T,"Table",{enumerable:!0,get:function(){return m.Table}});var w=z(172);Object.defineProperty(T,"CellHookData",{enumerable:!0,get:function(){return w.CellHookData}});var n=z(260);Object.defineProperty(T,"Cell",{enumerable:!0,get:function(){return n.Cell}}),Object.defineProperty(T,"Column",{enumerable:!0,get:function(){return n.Column}}),Object.defineProperty(T,"Row",{enumerable:!0,get:function(){return n.Row}});function S(e){(0,g.default)(e)}T.applyPlugin=S;function y(e,l){var s=(0,_.parseInput)(e,l),i=(0,b.createTable)(e,s);(0,M.drawTable)(e,i)}function d(e,l){var s=(0,_.parseInput)(e,l);return(0,b.createTable)(e,s)}T.__createTable=d;function r(e,l){(0,M.drawTable)(e,l)}T.__drawTable=r;try{var t=z(964);t.jsPDF&&(t=t.jsPDF),S(t)}catch{}T.default=y}(),B}()})});lt();var zt=It(Et());var at=class I{constructor(){}exportToPDF(E,F,z,B,T=[]){let g=new Ot;g.setFontSize(18),g.setTextColor(40,116,240),g.setFont("helvetica","bold"),g.text(z,10,15);let _=25;T.length>0&&(g.setFontSize(12),g.setTextColor(0),g.setFont("helvetica","normal"),g.text("Datos del Asegurado:",10,_),T.forEach((m,w)=>{let n=_+6+w*8;g.setFillColor(240,240,240),g.rect(10,n-5,190,8,"F"),g.setTextColor(0),g.text(m,12,n)}),_+=10+T.length*8);let M=F.map(m=>m.titulo),b=E.map(m=>F.map(w=>m[w.campo]||""));console.log("Encabezados:",M),console.log("Cuerpo de la tabla:",b),(0,zt.default)(g,{head:[M],body:b,startY:_,theme:"striped",headStyles:{fillColor:[40,116,240],textColor:[255,255,255],fontSize:12},bodyStyles:{fontSize:10,cellPadding:4},alternateRowStyles:{fillColor:[240,240,240]},tableLineWidth:.1,tableLineColor:[0,0,0]}),g.save(`${B}.pdf`)}static \u0275fac=function(F){return new(F||I)};static \u0275prov=ht({token:I,factory:I.\u0275fac,providedIn:"root"})};var Ut=()=>({"min-width":"50rem","max-width":"100%"});function Yt(I,E){if(I&1){let F=rt();L(0,"div")(1,"input",11),X("change",function(){let B=et(F).$implicit,T=tt(2);return it(T.toggleSeleccionColumna(B))}),N(),L(2,"label"),$(3),N()()}if(I&2){let F=E.$implicit;K(),q("checked",F.seleccionada),K(2),J(F.titulo)}}function $t(I,E){if(I&1){let F=rt();L(0,"div",8)(1,"h4"),$(2,"Selecciona las columnas a exportar:"),N(),nt(3,Yt,4,2,"div",9),L(4,"button",10),X("click",function(){et(F);let B=tt();return it(B.exportarHistoriaClinica())}),N()()}if(I&2){let F=tt();K(3),q("ngForOf",F.columnasDisponibles)}}function Kt(I,E){I&1&&(L(0,"tr")(1,"th",12),$(2,"ID Consulta"),N(),L(3,"th",13),$(4,"Fecha Consulta"),N(),L(5,"th",14),$(6,"Motivo Consulta"),N(),L(7,"th",13),$(8,"Diagn\xF3stico"),N(),L(9,"th",13),$(10,"Nota"),N(),L(11,"th",15),$(12,"Acciones"),N()())}function Gt(I,E){if(I&1){let F=rt();L(0,"tr")(1,"td"),$(2),N(),L(3,"td"),$(4),N(),L(5,"td"),$(6),N(),L(7,"td"),$(8),N(),L(9,"td"),$(10),N(),L(11,"td")(12,"button",16),X("click",function(){let B=et(F).$implicit,T=tt();return it(T.irATratamiento(B.id))}),N()()()}if(I&2){let F=E.$implicit;K(2),J(F.id),K(2),J(F.fechaConsulta),K(2),J(F.motivoConsulta),K(2),J(F.diagnostico),K(2),J(F.nota)}}var ft=class I{constructor(E,F,z,B,T,g,_,M){this.router=E;this.route=F;this.aseguradoService=z;this.consultaService=B;this.tratamientoService=T;this.bitacoraService=g;this.authService=_;this.pdfExportService=M}asegurado=null;mostrarSeleccionColumnas=!1;columnasDisponibles=[{campo:"id",titulo:"ID Consulta",seleccionada:!0},{campo:"fechaConsulta",titulo:"Fecha Consulta",seleccionada:!0},{campo:"motivoConsulta",titulo:"Motivo Consulta",seleccionada:!0},{campo:"diagnostico",titulo:"Diagn\xF3stico",seleccionada:!0},{campo:"nota",titulo:"Nota",seleccionada:!0}];consultas=[];ngOnInit(){this.route.paramMap.subscribe(E=>{let F=Number(E.get("aseguradoId"));F&&this.obtenerAsegurado(F)})}obtenerAsegurado(E){this.aseguradoService.getAseguradoById(E).subscribe(F=>{this.asegurado=F,F.historiaClinica&&F.historiaClinica.id&&this.obtenerConsultas(F.historiaClinica.id)},F=>{console.error("Error al obtener el asegurado:",F)})}obtenerConsultas(E){this.consultaService.getConsultasPorHistoriaClinicaId(E).subscribe(F=>{this.consultas=F,this.verificarTratamientos()},F=>{console.error("Error al obtener las consultas:",F)})}verificarTratamientos(){this.consultas.forEach(E=>{E.id!==void 0?this.tratamientoService.getTratamientoByConsultaId(E.id).subscribe(F=>{E.tieneTratamiento=!!F},F=>{E.tieneTratamiento=!1}):E.tieneTratamiento=!1})}registrarBitacora(E,F,z){this.bitacoraService.getUserIP().subscribe({next:B=>{let T=new Date,g=`${T.getFullYear()}-${(T.getMonth()+1).toString().padStart(2,"0")}-${T.getDate().toString().padStart(2,"0")}`,_=`${T.getHours().toString().padStart(2,"0")}:${T.getMinutes().toString().padStart(2,"0")}:${T.getSeconds().toString().padStart(2,"0")}`,M={correo:this.authService.getAuthenticatedUserEmail()||"",fecha:g,hora:_,ip:B.ip,accion:E,detalle:F};this.bitacoraService.createBitacora(M).subscribe({next:()=>{console.log("Registro de bit\xE1cora exitoso"),z()},error:b=>{console.error("Error al registrar en bit\xE1cora",b),z()}})},error:B=>{console.error("Error al obtener IP",B),z()}})}irATratamiento(E){if(this.asegurado){let F=`${this.asegurado.usuario.nombre} ${this.asegurado.usuario.apellido}`,z=`Listar tratamiento de la consulta (${E}) del paciente (${F})`;this.registrarBitacora("Listar tratamiento",z,()=>{this.router.navigate(["/tratamiento",E])})}else console.error("El asegurado no est\xE1 disponible."),this.router.navigate(["/tratamiento",E])}toggleSeleccionColumna(E){E.seleccionada=!E.seleccionada}exportarHistoriaClinica(){let E=this.columnasDisponibles.filter(B=>B.seleccionada),F=this.consultas.map(B=>{let T={};return E.forEach(g=>{T[g.campo]=B[g.campo]||""}),T}),z=this.asegurado?[`Nombre: ${this.asegurado.usuario?.nombre||""} ${this.asegurado.usuario?.apellido||""}`,`CI: ${this.asegurado.usuario?.ci||""}`,`Fecha de Nacimiento: ${this.asegurado.fechaNacimiento||""}`,`Tipo de Sangre: ${this.asegurado.tipoSangre||""}`]:[];this.pdfExportService.exportToPDF(F,E,"Historia Cl\xEDnica","historia_clinica",z)}static \u0275fac=function(F){return new(F||I)(G(St),G(bt),G(At),G(Mt),G(Rt),G(wt),G(Ct),G(at))};static \u0275cmp=gt({type:I,selectors:[["app-historia-clinica"]],standalone:!0,features:[ct],decls:10,vars:4,consts:[[1,"column-selector-container"],["pButton","","type","button","label","Seleccionar Columnas","icon","pi pi-cog",3,"click"],["class","column-selector",4,"ngIf"],[1,"historia-clinica-container"],["pButton","","type","button","label","Exportar PDF","icon","pi pi-file-pdf",3,"click"],["dataKey","id",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[1,"column-selector"],[4,"ngFor","ngForOf"],["pButton","","type","button","label","Exportar Seleccionadas","icon","pi pi-file-pdf",3,"click"],["type","checkbox",3,"change","checked"],[2,"width","15%"],[2,"width","20%"],[2,"width","25%"],[2,"width","10%"],["pButton","","type","button","icon","pi pi-arrow-right",1,"p-button-rounded","p-button-text","p-button-info",3,"click"]],template:function(F,z){F&1&&(L(0,"div",0)(1,"button",1),X("click",function(){return z.mostrarSeleccionColumnas=!z.mostrarSeleccionColumnas}),N()(),nt(2,$t,5,1,"div",2),L(3,"div",3)(4,"h3"),$(5,"Historia Cl\xEDnica de Usuario"),N(),L(6,"button",4),X("click",function(){return z.exportarHistoriaClinica()}),N(),L(7,"p-table",5),nt(8,Kt,13,0,"ng-template",6)(9,Gt,13,5,"ng-template",7),N()()),F&2&&(K(2),q("ngIf",z.mostrarSeleccionColumnas),K(5),q("value",z.consultas)("tableStyle",pt(3,Ut)))},dependencies:[yt,vt,mt,kt,Ft,_t,Pt,Tt,xt,Ht,Wt,Dt],styles:[".historia-clinica-container[_ngcontent-%COMP%]{max-width:100%;margin:auto;padding:1.5rem;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 8px #0000001a}.historia-clinica-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#3f51b5;text-align:center;margin-bottom:1.5rem;border-bottom:2px solid #ddd;padding-bottom:.5rem}.p-table[_ngcontent-%COMP%]{width:100%;border-radius:8px;overflow:hidden;font-size:.95rem;box-shadow:0 4px 8px #0000001a}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;padding:12px;text-align:center;font-weight:700}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f7f7f7}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;vertical-align:middle}.p-button-info[_ngcontent-%COMP%]{background-color:#3f51b5!important;color:#fff!important;width:2.5rem;height:2.5rem;border-radius:50%;transition:background-color .3s ease}.p-button-info[_ngcontent-%COMP%]:hover{background-color:#2c3e9e!important}.column-selector-container[_ngcontent-%COMP%]{margin-bottom:1rem}.column-selector[_ngcontent-%COMP%]{background:#f9f9f9;padding:1rem;border-radius:8px;box-shadow:0 2px 4px #0000001a}.column-selector[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:.5rem}.column-selector[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:.25rem}.column-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem}"]})};export{ft as default};
