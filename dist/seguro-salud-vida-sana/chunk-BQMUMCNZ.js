import{a as k}from"./chunk-U3KGF4RJ.js";import{a as F}from"./chunk-UJ32YO6L.js";import{a as w}from"./chunk-MZW6JDJM.js";import{B as R,f as P,u as y}from"./chunk-LJKAMAZ5.js";import"./chunk-W5NNSEVP.js";import"./chunk-4YRY4IP2.js";import{h as O}from"./chunk-V6WZIOIM.js";import{l as I,m as T,r as M}from"./chunk-2HP4KZBQ.js";import{$a as c,Ab as C,Fb as S,Gb as E,Ka as r,La as d,X as f,Ya as s,ea as _,eb as a,fa as h,fb as t,kb as b,nb as x,ob as p,xb as n,yb as g,zb as m}from"./chunk-TOSOZOFE.js";import"./chunk-ODN5LVDJ.js";var j=()=>({"min-width":"50rem","max-width":"100%"});function N(o,i){if(o&1&&(a(0,"div",4)(1,"p")(2,"strong"),n(3,"ID:"),t(),n(4),t(),a(5,"p")(6,"strong"),n(7,"Asegurado:"),t(),n(8),t(),a(9,"p")(10,"strong"),n(11,"Fecha Consulta:"),t(),n(12),t(),a(13,"p")(14,"strong"),n(15,"Motivo:"),t(),n(16),t(),a(17,"p")(18,"strong"),n(19,"Nota:"),t(),n(20),t(),a(21,"p")(22,"strong"),n(23,"M\xE9dico:"),t(),n(24),t(),a(25,"p")(26,"strong"),n(27,"Cupo:"),t(),n(28),t()()),o&2){let e=p();r(4),m(" ",e.consulta.id,""),r(4),C(" ",e.consulta.cupo==null||e.consulta.cupo.asegurado==null||e.consulta.cupo.asegurado.usuario==null?null:e.consulta.cupo.asegurado.usuario.nombre," ",e.consulta.cupo==null||e.consulta.cupo.asegurado==null||e.consulta.cupo.asegurado.usuario==null?null:e.consulta.cupo.asegurado.usuario.apellido,""),r(4),m(" ",e.consulta.fechaConsulta,""),r(4),m(" ",e.consulta.motivoConsulta,""),r(4),m(" ",e.consulta.nota,""),r(4),m(" ",e.consulta.cupo==null||e.consulta.cupo.horario==null||e.consulta.cupo.horario.medicoEspecialidad==null||e.consulta.cupo.horario.medicoEspecialidad.medico==null||e.consulta.cupo.horario.medicoEspecialidad.medico.usuario==null?null:e.consulta.cupo.horario.medicoEspecialidad.medico.usuario.nombre,""),r(4),m(" ",e.consulta.cupo==null?null:e.consulta.cupo.id,"")}}function D(o,i){o&1&&(a(0,"tr")(1,"th"),n(2,"Medicamento"),t(),a(3,"th"),n(4,"Frecuencia"),t(),a(5,"th"),n(6,"Fecha Inicio"),t(),a(7,"th"),n(8,"Fecha Final"),t()())}function U(o,i){if(o&1&&(a(0,"tr")(1,"td"),n(2),t(),a(3,"td"),n(4),t(),a(5,"td"),n(6),t(),a(7,"td"),n(8),t()()),o&2){let e=i.$implicit;r(2),g(e.medicamento),r(2),g(e.frecuencia),r(2),g(e.fechaInicio),r(2),g(e.fechaFinal)}}function L(o,i){if(o&1&&(a(0,"p-table",5),s(1,D,9,0,"ng-template",6)(2,U,9,4,"ng-template",7),t()),o&2){let e=p();c("value",e.recetas)("tableStyle",E(2,j))}}function z(o,i){o&1&&(a(0,"p"),n(1,"No hay recetas asociadas a esta consulta."),t())}function V(o,i){if(o&1){let e=b();a(0,"li")(1,"button",9),x("click",function(){let u=_(e).$implicit,A=p(2);return h(A.descargarArchivo(u.nombre))}),n(2),t()()}if(o&2){let e=i.$implicit;r(2),m(" ",e.nombre," ")}}function $(o,i){if(o&1&&(a(0,"ul"),s(1,V,3,1,"li",8),t()),o&2){let e=p();r(),c("ngForOf",e.archivos)}}function B(o,i){o&1&&(a(0,"p"),n(1,"No hay archivos adjuntos para esta consulta."),t())}var v=class o{constructor(i,e,l,u){this.recetaService=i;this.tratamientoService=e;this.consultaService=l;this.route=u}consulta=null;recetas=[];archivos=[];tratamientoId;ngOnInit(){let i=Number(this.route.snapshot.paramMap.get("consultaId"));i&&(this.obtenerDetallesConsulta(i),this.obtenerTratamientoYRecetas(i),this.obtenerArchivosConsulta(i))}obtenerDetallesConsulta(i){this.consultaService.getConsultaPorId(i).subscribe(e=>{this.consulta=e},e=>{console.error("Error al obtener detalles de la consulta:",e)})}obtenerTratamientoYRecetas(i){this.tratamientoService.getTratamientoByConsultaId(i).subscribe(e=>{e.id&&(this.tratamientoId=e.id,this.cargarRecetas(e.id))},e=>{console.error("Error al obtener el tratamiento:",e)})}cargarRecetas(i){this.recetaService.getRecetasByTratamientoId(i).subscribe(e=>{this.recetas=e},e=>{console.error("Error al cargar recetas:",e)})}obtenerArchivosConsulta(i){this.consultaService.getArchivosPorConsulta(i).subscribe(e=>{this.archivos=e.map(l=>({nombre:l.nombre,url:l.url}))},e=>{console.error("Error al cargar archivos:",e)})}descargarArchivo(i){this.consultaService.descargarArchivo(i).subscribe({next:e=>{let l=document.createElement("a"),u=URL.createObjectURL(e);l.href=u,l.download=i,l.click(),URL.revokeObjectURL(u)},error:e=>{console.error("Error al descargar el archivo:",e)}})}static \u0275fac=function(e){return new(e||o)(d(k),d(F),d(w),d(O))};static \u0275cmp=f({type:o,selectors:[["app-tratamiento"]],standalone:!0,features:[S],decls:12,vars:5,consts:[[1,"tratamiento-container"],["class","consulta-detalle",4,"ngIf"],["dataKey","id",3,"value","tableStyle",4,"ngIf"],[4,"ngIf"],[1,"consulta-detalle"],["dataKey","id",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[4,"ngFor","ngForOf"],[1,"link-button",3,"click"]],template:function(e,l){e&1&&(a(0,"div",0)(1,"h3"),n(2,"Detalle de Consulta"),t(),s(3,N,29,8,"div",1),a(4,"h4"),n(5,"Recetas"),t(),s(6,L,3,3,"p-table",2)(7,z,2,0,"p",3),a(8,"h4"),n(9,"Archivos Adjuntos"),t(),s(10,$,2,1,"ul",3)(11,B,2,0,"p",3),t()),e&2&&(r(3),c("ngIf",l.consulta),r(3),c("ngIf",l.recetas.length>0),r(),c("ngIf",l.recetas.length===0),r(3),c("ngIf",l.archivos.length>0),r(),c("ngIf",l.archivos.length===0))},dependencies:[R,y,P,M,I,T],styles:[".tratamiento-container[_ngcontent-%COMP%]{max-width:100%;margin:auto;padding:1.5rem;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 8px #0000001a}.tratamiento-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .tratamiento-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#3f51b5;text-align:center;margin-bottom:1rem}.consulta-detalle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem}.p-table[_ngcontent-%COMP%]{width:100%;border-radius:8px;overflow:hidden;font-size:1rem;box-shadow:0 4px 8px #0000001a}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;padding:12px;text-align:center;font-weight:700}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f7f7f7}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;vertical-align:middle}"]})};export{v as default};
