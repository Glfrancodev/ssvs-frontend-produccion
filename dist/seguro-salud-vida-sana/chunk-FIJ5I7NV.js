import{a as ne}from"./chunk-MQGP7DR4.js";import{a as q,b as K}from"./chunk-G3JGI5Y7.js";import{a as te,b as ie}from"./chunk-FXNARXVT.js";import{A as Z,B as ee,d as x,f as z,j as A,k as G,l as j,m as L,n as $,u as H,v as J,w as Q,x as U,y as X,z as Y}from"./chunk-F7MBEHRF.js";import{b as B,d as F,e as N,h as W,j as D}from"./chunk-24563CTF.js";import"./chunk-4YRY4IP2.js";import"./chunk-EALBQTKK.js";import{m as I,q as V}from"./chunk-5DWL5JJZ.js";import{$a as _,Ab as s,Cb as P,Eb as b,Fb as h,Gb as C,Hb as T,Ib as O,Jb as y,Na as l,Oa as w,_ as S,a as v,bc as R,cb as u,fb as E,ha as c,hb as o,ia as d,ib as r,jb as k,nb as g,qb as f,rb as a}from"./chunk-3RWLLOHT.js";var me=()=>({width:"120px",height:"40px"}),pe=()=>({"min-width":"50rem"});function ae(i,e){i&1&&(o(0,"tr")(1,"th",12),s(2,"Id"),r(),o(3,"th",13),s(4,"Nombre"),r(),o(5,"th",14),s(6,"Descripci\xF3n"),r(),o(7,"th",15),s(8,"Acci\xF3n"),r()())}function se(i,e){if(i&1&&s(0),i&2){let t=a().$implicit;P(" ",t.id," ")}}function le(i,e){if(i&1){let t=g();o(0,"input",24),C("ngModelChange",function(p){c(t);let m=a().$implicit;return h(m.nombre,p)||(m.nombre=p),d(p)}),r()}if(i&2){let t=a().$implicit;b("ngModel",t.nombre)}}function ce(i,e){if(i&1&&s(0),i&2){let t=a().$implicit;P(" ",t.nombre," ")}}function de(i,e){if(i&1){let t=g();o(0,"input",24),C("ngModelChange",function(p){c(t);let m=a().$implicit;return h(m.descripcion,p)||(m.descripcion=p),d(p)}),r()}if(i&2){let t=a().$implicit;b("ngModel",t.descripcion)}}function ue(i,e){if(i&1&&s(0),i&2){let t=a().$implicit;P(" ",t.descripcion," ")}}function ge(i,e){if(i&1){let t=g();o(0,"button",25),f("click",function(){c(t);let p=a().$implicit,m=a();return d(m.onRowEditInit(p))}),r()}}function _e(i,e){if(i&1){let t=g();o(0,"button",26),f("click",function(){c(t);let p=a().$implicit,m=a();return d(m.deletePermiso(p.id))}),r()}}function fe(i,e){if(i&1){let t=g();o(0,"button",27),f("click",function(){c(t);let p=a().$implicit,m=a();return d(m.onRowEditSave(p))}),r()}}function be(i,e){if(i&1){let t=g();o(0,"button",28),f("click",function(){c(t);let p=a(),m=p.$implicit,oe=p.rowIndex,re=a();return d(re.onRowEditCancel(m,oe))}),r()}}function he(i,e){if(i&1&&(o(0,"tr",16)(1,"td")(2,"p-cellEditor"),_(3,se,1,1,"ng-template",17),r()(),o(4,"td")(5,"p-cellEditor"),_(6,le,1,1,"ng-template",18)(7,ce,1,1,"ng-template",17),r()(),o(8,"td")(9,"p-cellEditor"),_(10,de,1,1,"ng-template",18)(11,ue,1,1,"ng-template",17),r()(),o(12,"td")(13,"div",19),_(14,ge,1,0,"button",20)(15,_e,1,0,"button",21)(16,fe,1,0,"button",22)(17,be,1,0,"button",23),r()()()),i&2){let t=e.$implicit,n=e.editing;u("pEditableRow",t),l(14),u("ngIf",!n),l(),u("ngIf",!n),l(),u("ngIf",n),l(),u("ngIf",n)}}var M=class i{constructor(e,t,n){this.permisoService=e;this.messageService=t;this.cdr=n}permisos=[];editedPermisos={};newPermiso={nombre:"",descripcion:""};sortField="id";sortOrder=1;ngOnInit(){this.getAllPermisos()}getAllPermisos(){this.permisoService.getPermisos().subscribe(e=>{this.permisos=e})}onRowEditInit(e){this.editedPermisos[e.id]=v({},e),this.messageService.add({severity:"info",summary:"Edici\xF3n",detail:"Editando permiso"})}onRowEditSave(e){e.nombre&&e.descripcion?this.permisoService.updatePermiso(e).subscribe(()=>{delete this.editedPermisos[e.id],this.messageService.add({severity:"success",summary:"Guardado",detail:"Permiso actualizado"})}):this.messageService.add({severity:"error",summary:"Error",detail:"Nombre y descripci\xF3n son obligatorios"})}onRowEditCancel(e,t){this.permisos[t]=this.editedPermisos[e.id]||e,delete this.editedPermisos[e.id],this.messageService.add({severity:"info",summary:"Cancelado",detail:"Edici\xF3n cancelada"})}deletePermiso(e){this.permisoService.deletePermiso(e).subscribe(()=>{this.permisos=this.permisos.filter(t=>t.id!==e),this.messageService.add({severity:"success",summary:"Eliminado",detail:"Permiso eliminado correctamente"})})}savePermiso(){this.newPermiso.nombre&&this.newPermiso.descripcion?this.permisoService.createPermiso(this.newPermiso).subscribe(e=>{this.permisos=[...this.permisos,e],this.cdr.detectChanges(),this.messageService.add({severity:"success",summary:"Guardado",detail:"Nuevo permiso creado correctamente"}),this.newPermiso={nombre:"",descripcion:""}}):this.messageService.add({severity:"error",summary:"Error",detail:"Nombre y descripci\xF3n son obligatorios"})}static \u0275fac=function(t){return new(t||i)(w(ne),w(x),w(R))};static \u0275cmp=S({type:i,selectors:[["app-permiso"]],standalone:!0,features:[T([x]),O],decls:18,vars:10,consts:[[1,"form-container"],[2,"font-weight","bold"],[1,"form-field"],["for","nombre",2,"font-weight","bold"],["id","nombre","type","text","pInputText","","placeholder","Nombre del permiso",3,"ngModelChange","ngModel"],["for","descripcion",2,"font-weight","bold"],["id","descripcion","type","text","pInputText","","placeholder","Descripci\xF3n del permiso",3,"ngModelChange","ngModel"],[1,"form-field",2,"text-align","center"],["icon","pi pi-save","label","Guardar","styleClass","p-button-raised p-button-warning",3,"click"],["dataKey","id","editMode","row",3,"value","tableStyle","sortField","sortOrder"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","id",2,"width","10%"],[2,"width","30%"],[2,"width","40%"],[2,"width","20%"],[3,"pEditableRow"],["pTemplate","output"],["pTemplate","input"],[1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded","style","background-color: #ffffff; color: #007bff; border: none; width: 2.5rem; height: 2.5rem;",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-trash","class","p-button-rounded p-button-danger","style","width: 3rem; height: 3rem;",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded","style","background-color: #ffffff; color: #28a745; border: none; width: 2.5rem; height: 2.5rem; margin-right: 0.5rem;",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded","style","background-color: #ffffff; color: #dc3545; border: none; width: 2.5rem; height: 2.5rem;",3,"click",4,"ngIf"],["pInputText","","type","text","required","",3,"ngModelChange","ngModel"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded",2,"background-color","#ffffff","color","#007bff","border","none","width","2.5rem","height","2.5rem",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",2,"width","3rem","height","3rem",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded",2,"background-color","#ffffff","color","#28a745","border","none","width","2.5rem","height","2.5rem","margin-right","0.5rem",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded",2,"background-color","#ffffff","color","#dc3545","border","none","width","2.5rem","height","2.5rem",3,"click"]],template:function(t,n){t&1&&(k(0,"p-toast"),o(1,"div",0)(2,"h3",1),s(3,"Crear Nuevo Permiso"),r(),o(4,"div",2)(5,"label",3),s(6,"Nombre"),r(),o(7,"input",4),C("ngModelChange",function(m){return h(n.newPermiso.nombre,m)||(n.newPermiso.nombre=m),m}),r()(),o(8,"div",2)(9,"label",5),s(10,"Descripci\xF3n"),r(),o(11,"input",6),C("ngModelChange",function(m){return h(n.newPermiso.descripcion,m)||(n.newPermiso.descripcion=m),m}),r()(),o(12,"div",7)(13,"p-button",8),f("click",function(){return n.savePermiso()}),r()()(),o(14,"p-table",9),s(15,"> "),_(16,ae,9,0,"ng-template",10)(17,he,18,5,"ng-template",11),r()),t&2&&(l(7),b("ngModel",n.newPermiso.nombre),l(4),b("ngModel",n.newPermiso.descripcion),l(2),E(y(8,me)),l(),u("value",n.permisos)("tableStyle",y(9,pe))("sortField",n.sortField)("sortOrder",n.sortOrder))},dependencies:[ee,H,z,J,Z,Q,U,X,Y,V,I,ie,te,D,B,F,W,N,$,j,L,G,A,K,q],styles:[".form-container[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid #ddd;border-radius:12px;background-color:#f9f9f9;box-shadow:0 4px 8px #0000001a;margin-bottom:1.5rem;display:grid;grid-template-columns:1fr 1fr;gap:1rem;max-width:100%;margin:auto}.form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{grid-column:1 / -1;font-size:1.8rem;font-weight:700;color:#3f51b5;text-align:center;margin:0;margin-bottom:1rem;border-bottom:2px solid #ddd;padding-bottom:.5rem}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:.25rem}input[pInputText][_ngcontent-%COMP%]{width:100%;padding:.5rem;border-radius:6px;border:1px solid #ddd;background-color:#fff;font-size:.95rem;box-shadow:inset 0 1px 3px #0000001a;transition:border-color .3s ease}input[pInputText][_ngcontent-%COMP%]:focus{outline:none;border-color:#3f51b5;box-shadow:0 0 4px #3f51b54d}.p-button-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#fff!important;font-size:1rem;border-radius:8px;padding:.75rem 1rem;font-weight:700;width:100%;max-width:150px;margin:auto;box-shadow:0 2px 6px #00000026}.p-button-warning[_ngcontent-%COMP%]:hover{background-color:#e0a800!important}.p-table[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:auto;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;font-size:.95rem}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;font-weight:700;text-align:center;padding:12px}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f7f7f7}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;vertical-align:middle}.p-button-rounded[_ngcontent-%COMP%]{border-radius:50%!important}.p-button-danger[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;color:#d32f2f!important}.p-button-danger[_ngcontent-%COMP%]:hover{background-color:#d32f2f!important;color:#fff!important}.p-button-success[_ngcontent-%COMP%]{background-color:#43a047!important;color:#fff!important}.p-button-success[_ngcontent-%COMP%]:hover{background-color:#388e3c!important}"]})};export{M as default};
