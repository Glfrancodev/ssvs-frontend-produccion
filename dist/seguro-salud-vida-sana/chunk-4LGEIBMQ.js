import{a as $}from"./chunk-WBEXYDI3.js";import{a as U}from"./chunk-2AXTMM6U.js";import{a as K}from"./chunk-QZX63QLI.js";import{a as w}from"./chunk-HLNEE2H6.js";import{a as j,b as R}from"./chunk-G3JGI5Y7.js";import{a as z,b as G}from"./chunk-FXNARXVT.js";import{B as V,d as T,f as H,k,l as D,n as F,t as B,u as N}from"./chunk-F7MBEHRF.js";import{j as y}from"./chunk-24563CTF.js";import"./chunk-4YRY4IP2.js";import{h as I,j as O,o as A}from"./chunk-EALBQTKK.js";import{q as P}from"./chunk-5DWL5JJZ.js";import{$a as h,Ab as r,Bb as l,Hb as _,Ib as C,Jb as x,Na as c,Oa as n,_ as u,cb as v,ha as f,hb as t,ia as b,ib as o,jb as g,nb as M,qb as E,rb as S}from"./chunk-3RWLLOHT.js";var q=()=>({"min-width":"50rem","max-width":"100%"});function J(a,i){a&1&&(t(0,"tr")(1,"th",4),r(2,"Fecha"),o(),t(3,"th",4),r(4,"Hora Inicio"),o(),t(5,"th",4),r(6,"Hora Final"),o(),t(7,"th",4),r(8,"Cupos Totales"),o(),t(9,"th",4),r(10,"Acciones"),o()())}function L(a,i){if(a&1){let e=M();t(0,"tr")(1,"td"),r(2),o(),t(3,"td"),r(4),o(),t(5,"td"),r(6),o(),t(7,"td"),r(8),o(),t(9,"td")(10,"button",5),E("click",function(){let s=f(e).$implicit,m=S();return b(m.irACupoMedico(s.id))}),o()()()}if(a&2){let e=i.$implicit;c(2),l(e.fecha),c(2),l(e.horaInicio),c(2),l(e.horaFinal),c(2),l(e.cantidadCupos)}}var p=class a{constructor(i,e,d,s,m,Q,W){this.route=i;this.router=e;this.especialidadService=d;this.medicoService=s;this.medicoEspecialidadService=m;this.authService=Q;this.horarioService=W}especialidadSeleccionada={id:void 0,nombre:"",descripcion:""};medicoEspecialidad=null;horarios=[];ngOnInit(){this.route.paramMap.subscribe(i=>{let e=i.get("especialidad");e&&this.obtenerEspecialidadPorNombre(e)})}obtenerEspecialidadPorNombre(i){this.especialidadService.getEspecialidadByNombre(i).subscribe(e=>{this.especialidadSeleccionada=e,this.obtenerMedico()},e=>{console.error("Error al obtener la especialidad:",e)})}obtenerMedico(){let i=this.authService.getAuthenticatedUserEmail();i&&this.especialidadSeleccionada.id!==void 0?this.medicoService.getMedicoPorCorreo(i).subscribe(e=>{e.id!==void 0&&this.especialidadSeleccionada.id!==void 0?this.obtenerMedicoEspecialidad(e.id,this.especialidadSeleccionada.id):console.error("El ID del m\xE9dico o de la especialidad es undefined.")},e=>{console.error("Error al obtener el m\xE9dico:",e)}):console.error("Correo m\xE9dico o ID de especialidad no disponible.")}obtenerMedicoEspecialidad(i,e){this.medicoEspecialidadService.getMedicoEspecialidadByEspecialidadAndMedico(e,i).subscribe(d=>{this.medicoEspecialidad=d,console.log("MedicoEspecialidad obtenida:",this.medicoEspecialidad),this.medicoEspecialidad&&this.medicoEspecialidad.id!==void 0&&this.obtenerHorariosPorMedicoEspecialidad(this.medicoEspecialidad.id)},d=>{console.error("Error al obtener MedicoEspecialidad:",d)})}obtenerHorariosPorMedicoEspecialidad(i){this.horarioService.getHorariosPorMedicoEspecialidad(i).subscribe(e=>{this.horarios=e,console.log("Horarios obtenidos:",this.horarios)},e=>{console.error("Error al obtener los horarios:",e)})}irACupoMedico(i){i!==void 0?this.router.navigate(["/cupo-medico",i]):console.error("El ID del horario es undefined.")}static \u0275fac=function(e){return new(e||a)(n(I),n(O),n($),n(w),n(K),n(A),n(U))};static \u0275cmp=u({type:a,selectors:[["app-atencion"]],standalone:!0,features:[_([T]),C],decls:7,vars:3,consts:[[1,"horario-container"],["dataKey","id",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[2,"width","20%"],["pButton","","icon","pi pi-arrow-right","title","Ir a Cupo M\xE9dico",1,"p-button-rounded","p-button-info",2,"width","2.5rem","height","2.5rem",3,"click"]],template:function(e,d){e&1&&(g(0,"p-toast"),t(1,"div",0)(2,"h3"),r(3,"Tus Horarios"),o(),t(4,"p-table",1),h(5,J,11,0,"ng-template",2)(6,L,11,4,"ng-template",3),o()()),e&2&&(c(4),v("value",d.horarios)("tableStyle",x(2,q)))},dependencies:[P,V,N,H,G,z,B,y,F,D,k,R,j],styles:[".horario-container[_ngcontent-%COMP%]{max-width:100%;margin:auto;padding:1.5rem;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 8px #0000001a}.horario-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#3f51b5;text-align:center;margin-bottom:1.5rem;border-bottom:2px solid #ddd;padding-bottom:.5rem}.p-table[_ngcontent-%COMP%]{width:100%;border-radius:8px;overflow:hidden;font-size:.95rem;box-shadow:0 4px 8px #0000001a}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;padding:12px;text-align:center;font-weight:700}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f7f7f7}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;vertical-align:middle}.p-button-info[_ngcontent-%COMP%]{background-color:#3f51b5!important;color:#fff!important;border:none!important}.p-button-info[_ngcontent-%COMP%]:hover{background-color:#2c3e9e!important}"]})};export{p as default};
