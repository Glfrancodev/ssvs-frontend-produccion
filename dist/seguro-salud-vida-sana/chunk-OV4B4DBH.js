import{a as j}from"./chunk-U3KGF4RJ.js";import{a as k}from"./chunk-UJ32YO6L.js";import{a as R}from"./chunk-MZW6JDJM.js";import{B as w,f as T,u as y}from"./chunk-LJKAMAZ5.js";import"./chunk-W5NNSEVP.js";import"./chunk-4YRY4IP2.js";import{h as P}from"./chunk-V6WZIOIM.js";import{l as M,m as O,r as I}from"./chunk-2HP4KZBQ.js";import{$a as l,Ab as C,Fb as S,Gb as E,Ka as r,La as p,X as f,Ya as m,ea as b,eb as a,fa as h,fb as t,kb as x,nb as _,ob as g,xb as n,yb as d,zb as s}from"./chunk-TOSOZOFE.js";import"./chunk-ODN5LVDJ.js";var A=()=>({"min-width":"50rem","max-width":"100%"});function D(i,o){if(i&1&&(a(0,"div",5)(1,"p")(2,"strong"),n(3,"ID:"),t(),n(4),t(),a(5,"p")(6,"strong"),n(7,"Asegurado:"),t(),n(8),t(),a(9,"p")(10,"strong"),n(11,"Fecha Consulta:"),t(),n(12),t(),a(13,"p")(14,"strong"),n(15,"Motivo:"),t(),n(16),t(),a(17,"p")(18,"strong"),n(19,"Nota:"),t(),n(20),t(),a(21,"p")(22,"strong"),n(23,"M\xE9dico:"),t(),n(24),t(),a(25,"p")(26,"strong"),n(27,"Cupo:"),t(),n(28),t()()),i&2){let e=g();r(4),s(" ",e.consulta.id,""),r(4),C(" ",e.consulta.cupo==null||e.consulta.cupo.asegurado==null||e.consulta.cupo.asegurado.usuario==null?null:e.consulta.cupo.asegurado.usuario.nombre," ",e.consulta.cupo==null||e.consulta.cupo.asegurado==null||e.consulta.cupo.asegurado.usuario==null?null:e.consulta.cupo.asegurado.usuario.apellido,""),r(4),s(" ",e.consulta.fechaConsulta,""),r(4),s(" ",e.consulta.motivoConsulta,""),r(4),s(" ",e.consulta.nota,""),r(4),s(" ",e.consulta.cupo==null||e.consulta.cupo.horario==null||e.consulta.cupo.horario.medicoEspecialidad==null||e.consulta.cupo.horario.medicoEspecialidad.medico==null||e.consulta.cupo.horario.medicoEspecialidad.medico.usuario==null?null:e.consulta.cupo.horario.medicoEspecialidad.medico.usuario.nombre,""),r(4),s(" ",e.consulta.cupo==null?null:e.consulta.cupo.id,"")}}function N(i,o){i&1&&(a(0,"tr")(1,"th"),n(2,"Medicamento"),t(),a(3,"th"),n(4,"Frecuencia"),t(),a(5,"th"),n(6,"Fecha Inicio"),t(),a(7,"th"),n(8,"Fecha Final"),t()())}function z(i,o){if(i&1&&(a(0,"tr")(1,"td"),n(2),t(),a(3,"td"),n(4),t(),a(5,"td"),n(6),t(),a(7,"td"),n(8),t()()),i&2){let e=o.$implicit;r(2),d(e.medicamento),r(2),d(e.frecuencia),r(2),d(e.fechaInicio),r(2),d(e.fechaFinal)}}function U(i,o){if(i&1&&(a(0,"p-table",6),m(1,N,9,0,"ng-template",7)(2,z,9,4,"ng-template",8),t()),i&2){let e=g();l("value",e.recetas)("tableStyle",E(2,A))}}function L(i,o){i&1&&(a(0,"p"),n(1,"No hay recetas asociadas a esta consulta."),t())}function V(i,o){if(i&1){let e=x();a(0,"div",11)(1,"span"),n(2),t(),a(3,"button",12),_("click",function(){let u=b(e).$implicit,F=g(2);return h(F.descargarArchivo(u.nombre))}),n(4,"Descargar"),t()()}if(i&2){let e=o.$implicit;r(2),d(e.nombre)}}function $(i,o){if(i&1&&(a(0,"div",9),m(1,V,5,1,"div",10),t()),i&2){let e=g();r(),l("ngForOf",e.archivos)}}function B(i,o){i&1&&(a(0,"p"),n(1,"No hay archivos adjuntos para esta consulta."),t())}var v=class i{constructor(o,e,c,u){this.recetaService=o;this.tratamientoService=e;this.consultaService=c;this.route=u}consulta=null;recetas=[];archivos=[];tratamientoId;ngOnInit(){let o=Number(this.route.snapshot.paramMap.get("consultaId"));o&&(this.obtenerDetallesConsulta(o),this.obtenerTratamientoYRecetas(o),this.obtenerArchivosConsulta(o))}obtenerDetallesConsulta(o){this.consultaService.getConsultaPorId(o).subscribe(e=>{this.consulta=e},e=>{console.error("Error al obtener detalles de la consulta:",e)})}obtenerTratamientoYRecetas(o){this.tratamientoService.getTratamientoByConsultaId(o).subscribe(e=>{e.id&&(this.tratamientoId=e.id,this.cargarRecetas(e.id))},e=>{console.error("Error al obtener el tratamiento:",e)})}cargarRecetas(o){this.recetaService.getRecetasByTratamientoId(o).subscribe(e=>{this.recetas=e},e=>{console.error("Error al cargar recetas:",e)})}obtenerArchivosConsulta(o){this.consultaService.getArchivosPorConsulta(o).subscribe(e=>{this.archivos=e.map(c=>({nombre:c.nombre,url:c.url}))},e=>{console.error("Error al cargar archivos:",e)})}descargarArchivo(o){this.consultaService.descargarArchivo(o).subscribe({next:e=>{let c=document.createElement("a"),u=URL.createObjectURL(e);c.href=u,c.download=o,c.click(),URL.revokeObjectURL(u)},error:e=>{console.error("Error al descargar el archivo:",e)}})}static \u0275fac=function(e){return new(e||i)(p(j),p(k),p(R),p(P))};static \u0275cmp=f({type:i,selectors:[["app-tratamiento"]],standalone:!0,features:[S],decls:12,vars:5,consts:[[1,"tratamiento-container"],["class","consulta-detalle",4,"ngIf"],["dataKey","id",3,"value","tableStyle",4,"ngIf"],[4,"ngIf"],["class","archivos-adjuntos",4,"ngIf"],[1,"consulta-detalle"],["dataKey","id",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[1,"archivos-adjuntos"],["class","archivo-item",4,"ngFor","ngForOf"],[1,"archivo-item"],[3,"click"]],template:function(e,c){e&1&&(a(0,"div",0)(1,"h3"),n(2,"Detalle de Consulta"),t(),m(3,D,29,8,"div",1),a(4,"h4"),n(5,"Recetas"),t(),m(6,U,3,3,"p-table",2)(7,L,2,0,"p",3),a(8,"h4"),n(9,"Archivos Adjuntos"),t(),m(10,$,2,1,"div",4)(11,B,2,0,"p",3),t()),e&2&&(r(3),l("ngIf",c.consulta),r(3),l("ngIf",c.recetas.length>0),r(),l("ngIf",c.recetas.length===0),r(3),l("ngIf",c.archivos.length>0),r(),l("ngIf",c.archivos.length===0))},dependencies:[w,y,T,I,M,O],styles:[".tratamiento-container[_ngcontent-%COMP%]{max-width:100%;margin:auto;padding:1.5rem;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 8px #0000001a}.tratamiento-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .tratamiento-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#3f51b5;text-align:center;margin-bottom:1rem}.consulta-detalle[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1rem;background-color:#f0f4ff;border:1px solid #c3dafe;border-radius:8px}.consulta-detalle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem}.consulta-detalle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#3f51b5}.p-table[_ngcontent-%COMP%]{width:100%;border-radius:8px;overflow:hidden;font-size:1rem;box-shadow:0 4px 8px #0000001a}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;padding:12px;text-align:center;font-weight:700}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f7f7f7}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;vertical-align:middle}.archivos-adjuntos[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;margin-top:1rem}.archivo-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:250px;padding:.5rem;border:1px solid #ccc;border-radius:8px;background-color:#fff;box-shadow:0 2px 4px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.archivo-item[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 8px #00000026}.archivo-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:#333;word-break:break-word}.archivo-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:.9rem;transition:background-color .3s ease}.archivo-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2c387e}"]})};export{v as default};
