import{a as ne}from"./chunk-TVEXVHUL.js";import{a as L,b as K}from"./chunk-BNUNU2GP.js";import{a as te,b as oe}from"./chunk-O3KWYK2S.js";import{A as Z,B as ee,d as h,f as z,j as A,k as G,l as $,m as j,n as q,u as H,v as J,w as Q,x as U,y as X,z as Y}from"./chunk-RDO4C5ZH.js";import"./chunk-4YRY4IP2.js";import{b as B,d as N,e as F,h as D,j as W}from"./chunk-24563CTF.js";import"./chunk-EALBQTKK.js";import{m as I,q as V}from"./chunk-5DWL5JJZ.js";import{$a as b,Ab as c,Cb as C,Eb as R,Fb as w,Gb as x,Hb as O,Ib as P,Jb as v,Na as p,Oa as _,_ as S,a as M,bc as T,cb as m,fb as E,ha as s,hb as i,ia as u,ib as r,jb as k,nb as g,qb as f,rb as d}from"./chunk-3RWLLOHT.js";var le=()=>({width:"120px",height:"40px"}),ae=()=>({"min-width":"50rem"});function de(o,e){o&1&&(i(0,"tr")(1,"th",10),c(2,"Id"),r(),i(3,"th",11),c(4,"Nombre"),r(),i(5,"th",12),c(6,"Acci\xF3n"),r()())}function pe(o,e){if(o&1&&c(0),o&2){let t=d().$implicit;C(" ",t.id," ")}}function ce(o,e){if(o&1){let t=g();i(0,"input",21),x("ngModelChange",function(l){s(t);let a=d().$implicit;return w(a.nombre,l)||(a.nombre=l),u(l)}),r()}if(o&2){let t=d().$implicit;R("ngModel",t.nombre)}}function me(o,e){if(o&1&&c(0),o&2){let t=d().$implicit;C(" ",t.nombre," ")}}function se(o,e){if(o&1){let t=g();i(0,"button",22),f("click",function(){s(t);let l=d().$implicit,a=d();return u(a.onRowEditInit(l))}),r()}}function ue(o,e){if(o&1){let t=g();i(0,"button",23),f("click",function(){s(t);let l=d().$implicit,a=d();return u(a.deleteRol(l.id))}),r()}}function ge(o,e){if(o&1){let t=g();i(0,"button",24),f("click",function(){s(t);let l=d().$implicit,a=d();return u(a.onRowEditSave(l))}),r()}}function fe(o,e){if(o&1){let t=g();i(0,"button",25),f("click",function(){s(t);let l=d(),a=l.$implicit,ie=l.rowIndex,re=d();return u(re.onRowEditCancel(a,ie))}),r()}}function be(o,e){if(o&1&&(i(0,"tr",13)(1,"td")(2,"p-cellEditor"),b(3,pe,1,1,"ng-template",14),r()(),i(4,"td")(5,"p-cellEditor"),b(6,ce,1,1,"ng-template",15)(7,me,1,1,"ng-template",14),r()(),i(8,"td")(9,"div",16),b(10,se,1,0,"button",17)(11,ue,1,0,"button",18)(12,ge,1,0,"button",19)(13,fe,1,0,"button",20),r()()()),o&2){let t=e.$implicit,n=e.editing;m("pEditableRow",t),p(10),m("ngIf",!n),p(),m("ngIf",!n),p(),m("ngIf",n),p(),m("ngIf",n)}}var y=class o{constructor(e,t,n){this.rolService=e;this.messageService=t;this.cdr=n}roles=[];editedRoles={};newRol={nombre:""};sortField="id";sortOrder=1;ngOnInit(){this.getAllRoles()}getAllRoles(){this.rolService.getRoles().subscribe(e=>{this.roles=e})}onRowEditInit(e){this.editedRoles[e.id]=M({},e),this.messageService.add({severity:"info",summary:"Edici\xF3n",detail:"Editando rol"})}onRowEditSave(e){e.nombre?this.rolService.updateRol(e).subscribe(()=>{delete this.editedRoles[e.id],this.messageService.add({severity:"success",summary:"Guardado",detail:"Rol actualizado"})}):this.messageService.add({severity:"error",summary:"Error",detail:"Nombre es obligatorio"})}onRowEditCancel(e,t){this.roles[t]=this.editedRoles[e.id]||e,delete this.editedRoles[e.id],this.messageService.add({severity:"info",summary:"Cancelado",detail:"Edici\xF3n cancelada"})}deleteRol(e){this.rolService.deleteRol(e).subscribe(()=>{this.roles=this.roles.filter(t=>t.id!==e),this.messageService.add({severity:"success",summary:"Eliminado",detail:"Rol eliminado correctamente"})})}saveRol(){this.newRol.nombre?this.rolService.createRol(this.newRol).subscribe(e=>{this.roles=[...this.roles,e],this.cdr.detectChanges(),this.messageService.add({severity:"success",summary:"Guardado",detail:"Nuevo rol creado correctamente"}),this.newRol={nombre:""}}):this.messageService.add({severity:"error",summary:"Error",detail:"Nombre es obligatorio"})}static \u0275fac=function(t){return new(t||o)(_(ne),_(h),_(T))};static \u0275cmp=S({type:o,selectors:[["app-permiso"]],standalone:!0,features:[O([h]),P],decls:13,vars:9,consts:[[1,"form-container"],[2,"font-weight","bold"],[1,"form-field"],["for","nombre",2,"font-weight","bold"],["id","nombre","type","text","pInputText","","placeholder","Nombre del permiso",3,"ngModelChange","ngModel"],[1,"form-field",2,"text-align","center"],["icon","pi pi-save","label","Guardar","styleClass","p-button-raised p-button-warning",3,"click"],["dataKey","id","editMode","row",3,"value","tableStyle","sortField","sortOrder"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","id",2,"width","30%"],[2,"width","50%"],[2,"width","20%"],[3,"pEditableRow"],["pTemplate","output"],["pTemplate","input"],[1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded","style","background-color: #ffffff; color: #007bff; border: none; width: 2.5rem; height: 2.5rem;",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-trash","class","p-button-rounded p-button-danger","style","width: 3rem; height: 3rem;",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded","style","background-color: #ffffff; color: #28a745; border: none; width: 2.5rem; height: 2.5rem; margin-right: 0.5rem;",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded","style","background-color: #ffffff; color: #dc3545; border: none; width: 2.5rem; height: 2.5rem;",3,"click",4,"ngIf"],["pInputText","","type","text","required","",3,"ngModelChange","ngModel"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded",2,"background-color","#ffffff","color","#007bff","border","none","width","2.5rem","height","2.5rem",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",2,"width","3rem","height","3rem",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded",2,"background-color","#ffffff","color","#28a745","border","none","width","2.5rem","height","2.5rem","margin-right","0.5rem",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded",2,"background-color","#ffffff","color","#dc3545","border","none","width","2.5rem","height","2.5rem",3,"click"]],template:function(t,n){t&1&&(k(0,"p-toast"),i(1,"div",0)(2,"h3",1),c(3,"Crear Nuevo Rol"),r(),i(4,"div",2)(5,"label",3),c(6,"Nombre"),r(),i(7,"input",4),x("ngModelChange",function(a){return w(n.newRol.nombre,a)||(n.newRol.nombre=a),a}),r()(),i(8,"div",5)(9,"p-button",6),f("click",function(){return n.saveRol()}),r()()(),i(10,"p-table",7),b(11,de,7,0,"ng-template",8)(12,be,14,5,"ng-template",9),r()),t&2&&(p(7),R("ngModel",n.newRol.nombre),p(2),E(v(7,le)),p(),m("value",n.roles)("tableStyle",v(8,ae))("sortField",n.sortField)("sortOrder",n.sortOrder))},dependencies:[ee,H,z,J,Z,Q,U,X,Y,V,I,oe,te,W,B,N,D,F,q,$,j,G,A,K,L],styles:[".form-container[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid #ddd;border-radius:12px;background-color:#f9f9f9;box-shadow:0 4px 8px #0000001a;margin-bottom:1.5rem;display:grid;gap:1rem;max-width:100%;margin:auto}.form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#3f51b5;text-align:center;margin:0;margin-bottom:1rem;border-bottom:2px solid #ddd;padding-bottom:.5rem}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333}input[pInputText][_ngcontent-%COMP%]{width:100%;padding:.5rem;border-radius:6px;border:1px solid #ddd;background-color:#fff;font-size:.95rem;box-shadow:inset 0 1px 3px #0000001a;transition:border-color .3s ease}input[pInputText][_ngcontent-%COMP%]:focus{outline:none;border-color:#3f51b5;box-shadow:0 0 4px #3f51b54d}.p-button-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#fff!important;font-size:1rem;border-radius:8px;padding:.75rem 1rem;font-weight:700;width:50%;margin:auto;box-shadow:0 2px 6px #00000026}.p-button-warning[_ngcontent-%COMP%]:hover{background-color:#e0a800!important}.p-table[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:auto;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;font-size:.95rem}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;font-weight:700;text-align:center;padding:12px}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f7f7f7}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:center;vertical-align:middle}.p-button-rounded[_ngcontent-%COMP%]{border-radius:50%!important}.p-button-danger[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;color:#d32f2f!important}.p-button-danger[_ngcontent-%COMP%]:hover{background-color:#d32f2f!important;color:#fff!important}.p-button-success[_ngcontent-%COMP%]{background-color:#43a047!important;color:#fff!important;width:2.5rem;height:2.5rem}.p-button-success[_ngcontent-%COMP%]:hover{background-color:#388e3c!important}.p-button[_ngcontent-%COMP%]{box-shadow:none!important}"]})};export{y as default};
