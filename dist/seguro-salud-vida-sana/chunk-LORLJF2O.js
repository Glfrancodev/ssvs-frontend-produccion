import{a as D}from"./chunk-HLNEE2H6.js";import{a as H}from"./chunk-LSYYTESY.js";import{a as V,b as z}from"./chunk-G3JGI5Y7.js";import{a as K,b as q}from"./chunk-FXNARXVT.js";import{B as G,d as l,f as A,k as F,l as B,n as W,s as j,t as L,u as R}from"./chunk-F7MBEHRF.js";import{b as I,d as T,e as N,j as U}from"./chunk-24563CTF.js";import"./chunk-4YRY4IP2.js";import"./chunk-EALBQTKK.js";import"./chunk-5DWL5JJZ.js";import{$a as S,Ab as r,Bb as g,Db as P,Eb as f,Fb as M,Gb as b,Hb as O,Ib as E,Jb as k,Na as c,Oa as m,_ as v,cb as u,ha as _,hb as o,ia as C,ib as i,jb as x,nb as w,qb as p,rb as y}from"./chunk-3RWLLOHT.js";var J=()=>({"min-width":"50rem","max-width":"100%"});function Q(a,e){a&1&&(o(0,"tr")(1,"th",11),r(2,"ID"),i(),o(3,"th",11),r(4,"Item"),i(),o(5,"th",12),r(6,"Nombre Completo"),i(),o(7,"th",11),r(8,"Acci\xF3n"),i()())}function X(a,e){if(a&1){let t=w();o(0,"tr")(1,"td"),r(2),i(),o(3,"td"),r(4),i(),o(5,"td"),r(6),i(),o(7,"td")(8,"button",13),p("click",function(){let s=_(t).$implicit,d=y();return C(d.deleteMedico(s.id))}),i()()()}if(a&2){let t=e.$implicit;c(2),g(t.id),c(2),g(t.item),c(2),P("",t.usuario==null?null:t.usuario.nombre," ",t.usuario==null?null:t.usuario.apellido,"")}}var h=class a{constructor(e,t,n){this.medicoService=e;this.usuarioService=t;this.messageService=n}medicos=[];usuariosDisponibles=[];nuevoMedico={item:"",usuario:{id:0,ci:"",correo:"",contrasena:"",nombre:"",apellido:"",estaActivo:!0,rol:void 0}};ngOnInit(){this.getMedicos(),this.getUsuariosDisponibles()}getMedicos(){this.medicoService.getMedicos().subscribe(e=>this.medicos=e,e=>this.messageService.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los m\xE9dicos"}))}getUsuariosDisponibles(){this.usuarioService.getUsuariosSinMedicoByRol(3).subscribe(e=>this.usuariosDisponibles=e,e=>this.messageService.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los usuarios disponibles"}))}addMedico(){this.medicoService.createMedico(this.nuevoMedico).subscribe(e=>{this.getMedicos(),this.medicos.push(e),this.messageService.add({severity:"success",summary:"A\xF1adido",detail:"M\xE9dico a\xF1adido correctamente"}),this.resetNuevoMedico(),this.getUsuariosDisponibles()},e=>this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo a\xF1adir el m\xE9dico"}))}resetNuevoMedico(){this.nuevoMedico={item:"",usuario:{id:void 0,ci:"",correo:"",contrasena:"",nombre:"",apellido:"",estaActivo:!0,rol:void 0}}}deleteMedico(e){this.medicoService.deleteMedico(e).subscribe(()=>{this.medicos=this.medicos.filter(t=>t.id!==e),this.messageService.add({severity:"success",summary:"Eliminado",detail:"M\xE9dico eliminado correctamente"}),this.getUsuariosDisponibles()},t=>this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el m\xE9dico"}))}static \u0275fac=function(t){return new(t||a)(m(D),m(H),m(l))};static \u0275cmp=v({type:a,selectors:[["app-medico"]],standalone:!0,features:[O([l]),E],decls:17,vars:6,consts:[[1,"add-medico-form"],[1,"form-field"],["for","item"],["id","item","pInputText","","placeholder","Ingrese el item",1,"input-field",3,"ngModelChange","ngModel"],["for","usuario"],["id","usuario","optionLabel","correo","optionValue","id","placeholder","Seleccione un usuario",1,"p-dropdown",3,"ngModelChange","options","ngModel"],["pButton","","label","A\xF1adir M\xE9dico","icon","pi pi-plus",1,"p-button-success",3,"click"],[1,"medico-list-container",2,"margin-top","2rem"],["dataKey","id",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[2,"width","20%"],[2,"width","40%"],["pButton","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(t,n){t&1&&(x(0,"p-toast"),o(1,"div",0)(2,"h3"),r(3,"A\xF1adir M\xE9dico"),i(),o(4,"div",1)(5,"label",2),r(6,"Item"),i(),o(7,"input",3),b("ngModelChange",function(d){return M(n.nuevoMedico.item,d)||(n.nuevoMedico.item=d),d}),i()(),o(8,"div",1)(9,"label",4),r(10,"Usuario"),i(),o(11,"p-dropdown",5),b("ngModelChange",function(d){return M(n.nuevoMedico.usuario.id,d)||(n.nuevoMedico.usuario.id=d),d}),i()(),o(12,"button",6),p("click",function(){return n.addMedico()}),i()(),o(13,"div",7)(14,"p-table",8),S(15,Q,9,0,"ng-template",9)(16,X,9,4,"ng-template",10),i()()),t&2&&(c(7),f("ngModel",n.nuevoMedico.item),c(4),u("options",n.usuariosDisponibles),f("ngModel",n.nuevoMedico.usuario.id),c(3),u("value",n.medicos)("tableStyle",k(5,J)))},dependencies:[q,K,A,L,j,G,R,U,I,T,N,W,B,F,z,V],styles:[".medico-list-container[_ngcontent-%COMP%]{max-width:100%;margin:auto;overflow-x:auto}.add-medico-form[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid #dcdcdc;border-radius:12px;background-color:#f9f9f9;box-shadow:0 4px 8px #0000001a;margin-bottom:1.5rem;display:grid;grid-template-columns:1fr 1fr;gap:1rem;max-width:100%;margin:auto}.add-medico-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{grid-column:1 / -1;font-size:1.8rem;font-weight:700;color:#3f51b5;text-align:center;margin:0;margin-bottom:1rem;border-bottom:2px solid #ddd;padding-bottom:.5rem}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:.25rem}.input-field[_ngcontent-%COMP%], .p-dropdown[_ngcontent-%COMP%]{width:100%;padding:.5rem;border-radius:6px;border:1px solid #ddd;background-color:#fff;font-size:.95rem;box-shadow:inset 0 1px 3px #0000001a;transition:border-color .3s ease}.input-field[_ngcontent-%COMP%]:focus, .p-dropdown[_ngcontent-%COMP%]:focus{outline:none;border-color:#3f51b5;box-shadow:0 0 4px #3f51b54d}.p-button-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff!important;width:100%;max-width:150px;font-size:1rem;border-radius:8px;padding:.75rem;border:none!important;font-weight:700;transition:background-color .3s ease;margin:auto}.p-button-success[_ngcontent-%COMP%]:hover{background-color:#388e3c!important}.p-table[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:auto;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;font-size:.95rem}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;font-weight:700;text-align:center;padding:12px}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f7f7f7}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;vertical-align:middle}.p-button-danger[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;color:#d32f2f!important}.p-button-danger[_ngcontent-%COMP%]:hover{background-color:#d32f2f!important;color:#fff!important}"]})};export{h as default};
