import{a as ne}from"./chunk-WBEXYDI3.js";import{a as q,b as K}from"./chunk-G3JGI5Y7.js";import{a as te,b as ie}from"./chunk-FXNARXVT.js";import{A as Z,B as ee,d as w,f as A,j as G,k as j,l as z,m as L,n as $,u as H,v as J,w as Q,x as U,y as X,z as Y}from"./chunk-F7MBEHRF.js";import{b as B,d as F,e as D,h as N,j as W}from"./chunk-24563CTF.js";import"./chunk-4YRY4IP2.js";import"./chunk-EALBQTKK.js";import{m as I,q as V}from"./chunk-5DWL5JJZ.js";import{$a as b,Ab as p,Bb as P,Cb as x,Eb as f,Fb as E,Gb as h,Hb as k,Ib as O,Jb as R,Na as c,Oa as C,_ as v,a as M,bc as T,cb as u,ha as s,hb as o,ia as m,ib as a,jb as S,nb as _,qb as g,rb as l}from"./chunk-3RWLLOHT.js";var de=()=>({"min-width":"50rem"});function re(i,e){i&1&&(o(0,"tr")(1,"th",11),p(2,"ID"),a(),o(3,"th",12),p(4,"Nombre"),a(),o(5,"th",12),p(6,"Descripci\xF3n"),a(),o(7,"th",13),p(8,"Acci\xF3n"),a()())}function le(i,e){if(i&1){let t=_();o(0,"input",22),h("ngModelChange",function(r){s(t);let d=l().$implicit;return E(d.nombre,r)||(d.nombre=r),m(r)}),a()}if(i&2){let t=l().$implicit;f("ngModel",t.nombre)}}function pe(i,e){if(i&1&&p(0),i&2){let t=l().$implicit;x(" ",t.nombre," ")}}function ce(i,e){if(i&1){let t=_();o(0,"input",22),h("ngModelChange",function(r){s(t);let d=l().$implicit;return E(d.descripcion,r)||(d.descripcion=r),m(r)}),a()}if(i&2){let t=l().$implicit;f("ngModel",t.descripcion)}}function se(i,e){if(i&1&&p(0),i&2){let t=l().$implicit;x(" ",t.descripcion," ")}}function me(i,e){if(i&1){let t=_();o(0,"button",23),g("click",function(){s(t);let r=l().$implicit,d=l();return m(d.onRowEditInit(r))}),a()}}function ue(i,e){if(i&1){let t=_();o(0,"button",24),g("click",function(){s(t);let r=l().$implicit,d=l();return m(d.deleteEspecialidad(r.id))}),a()}}function _e(i,e){if(i&1){let t=_();o(0,"button",25),g("click",function(){s(t);let r=l().$implicit,d=l();return m(d.onRowEditSave(r))}),a()}}function ge(i,e){if(i&1){let t=_();o(0,"button",26),g("click",function(){s(t);let r=l(),d=r.$implicit,oe=r.rowIndex,ae=l();return m(ae.onRowEditCancel(d,oe))}),a()}}function be(i,e){if(i&1&&(o(0,"tr",14)(1,"td"),p(2),a(),o(3,"td")(4,"p-cellEditor"),b(5,le,1,1,"ng-template",15)(6,pe,1,1,"ng-template",16),a()(),o(7,"td")(8,"p-cellEditor"),b(9,ce,1,1,"ng-template",15)(10,se,1,1,"ng-template",16),a()(),o(11,"td")(12,"div",17),b(13,me,1,0,"button",18)(14,ue,1,0,"button",19)(15,_e,1,0,"button",20)(16,ge,1,0,"button",21),a()()()),i&2){let t=e.$implicit,n=e.editing;u("pEditableRow",t),c(2),P(t.id),c(11),u("ngIf",!n),c(),u("ngIf",!n),c(),u("ngIf",n),c(),u("ngIf",n)}}var y=class i{constructor(e,t,n){this.especialidadService=e;this.messageService=t;this.cdr=n}especialidades=[];editedEspecialidades={};newEspecialidad={nombre:"",descripcion:""};sortField="id";sortOrder=1;ngOnInit(){this.getAllEspecialidades()}getAllEspecialidades(){this.especialidadService.getEspecialidades().subscribe(e=>{this.especialidades=e})}onRowEditInit(e){this.editedEspecialidades[e.id]=M({},e),this.messageService.add({severity:"info",summary:"Edici\xF3n",detail:"Editando especialidad"})}onRowEditSave(e){e.nombre&&e.descripcion?this.especialidadService.updateEspecialidad(e).subscribe(()=>{delete this.editedEspecialidades[e.id],this.messageService.add({severity:"success",summary:"Guardado",detail:"Especialidad actualizada"})}):this.messageService.add({severity:"error",summary:"Error",detail:"Nombre y descripci\xF3n son obligatorios"})}onRowEditCancel(e,t){this.especialidades[t]=this.editedEspecialidades[e.id]||e,delete this.editedEspecialidades[e.id],this.messageService.add({severity:"info",summary:"Cancelado",detail:"Edici\xF3n cancelada"})}deleteEspecialidad(e){this.especialidadService.deleteEspecialidad(e).subscribe(()=>{this.especialidades=this.especialidades.filter(t=>t.id!==e),this.messageService.add({severity:"success",summary:"Eliminado",detail:"Especialidad eliminada correctamente"})})}saveEspecialidad(){this.newEspecialidad.nombre&&this.newEspecialidad.descripcion?this.especialidadService.createEspecialidad(this.newEspecialidad).subscribe(e=>{this.especialidades=[...this.especialidades,e],this.cdr.detectChanges(),this.messageService.add({severity:"success",summary:"Guardado",detail:"Nueva especialidad creada correctamente"}),this.newEspecialidad={nombre:"",descripcion:""}}):this.messageService.add({severity:"error",summary:"Error",detail:"Nombre y descripci\xF3n son obligatorios"})}static \u0275fac=function(t){return new(t||i)(C(ne),C(w),C(T))};static \u0275cmp=v({type:i,selectors:[["app-especialidad"]],standalone:!0,features:[k([w]),O],decls:17,vars:7,consts:[[1,"form-container"],[1,"form-field"],["for","nombre"],["id","nombre","type","text","pInputText","","placeholder","Nombre de la especialidad",3,"ngModelChange","ngModel"],["for","descripcion"],["id","descripcion","type","text","pInputText","","placeholder","Descripci\xF3n de la especialidad",3,"ngModelChange","ngModel"],[1,"form-field",2,"text-align","center"],["icon","pi pi-save","label","Guardar","styleClass","p-button-raised p-button-warning",3,"click"],["dataKey","id","editMode","row",3,"value","tableStyle","sortField","sortOrder"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","id",2,"width","20%"],[2,"width","30%"],[2,"width","20%"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-warning","style","width: 2.5rem; height: 2.5rem;",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-trash","class","p-button-rounded p-button-danger",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-check","style","width: 2.5rem; height: 2.5rem;",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-cancel","style","width: 2.5rem; height: 2.5rem;",3,"click",4,"ngIf"],["pInputText","","type","text","required","",3,"ngModelChange","ngModel"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning",2,"width","2.5rem","height","2.5rem",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-check",2,"width","2.5rem","height","2.5rem",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-cancel",2,"width","2.5rem","height","2.5rem",3,"click"]],template:function(t,n){t&1&&(S(0,"p-toast"),o(1,"div",0)(2,"h3"),p(3,"Crear Nueva Especialidad"),a(),o(4,"div",1)(5,"label",2),p(6,"Nombre"),a(),o(7,"input",3),h("ngModelChange",function(d){return E(n.newEspecialidad.nombre,d)||(n.newEspecialidad.nombre=d),d}),a()(),o(8,"div",1)(9,"label",4),p(10,"Descripci\xF3n"),a(),o(11,"input",5),h("ngModelChange",function(d){return E(n.newEspecialidad.descripcion,d)||(n.newEspecialidad.descripcion=d),d}),a()(),o(12,"div",6)(13,"p-button",7),g("click",function(){return n.saveEspecialidad()}),a()()(),o(14,"p-table",8),b(15,re,9,0,"ng-template",9)(16,be,17,6,"ng-template",10),a()),t&2&&(c(7),f("ngModel",n.newEspecialidad.nombre),c(4),f("ngModel",n.newEspecialidad.descripcion),c(3),u("value",n.especialidades)("tableStyle",R(6,de))("sortField",n.sortField)("sortOrder",n.sortOrder))},dependencies:[ee,H,A,J,Z,Q,U,X,Y,V,I,ie,te,W,B,F,N,D,$,z,L,j,G,K,q],styles:[".form-container[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid #dcdcdc;border-radius:12px;background-color:#f9f9f9;box-shadow:0 4px 8px #0000001a;margin-bottom:1.5rem;display:grid;grid-template-columns:1fr 1fr;gap:1rem;max-width:100%;margin:auto}.form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{grid-column:1 / -1;font-size:1.8rem;font-weight:700;color:#3f51b5;text-align:center;margin:0;margin-bottom:1rem;border-bottom:2px solid #ddd;padding-bottom:.5rem}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:.25rem}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border-radius:6px;border:1px solid #ddd;background-color:#fff;font-size:.95rem;box-shadow:inset 0 1px 3px #0000001a;transition:border-color .3s ease}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3f51b5;box-shadow:0 0 4px #3f51b54d}.p-table[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:auto;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;font-size:.95rem}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;font-weight:700;text-align:center;padding:12px}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f7f7f7}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;vertical-align:middle}.p-button-rounded[_ngcontent-%COMP%]{border-radius:50%!important}.p-button-check[_ngcontent-%COMP%]{background-color:#28a745!important;color:#fff!important}.p-button-check[_ngcontent-%COMP%]:hover{background-color:#218838!important}.p-button-danger[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;color:#d32f2f!important}.p-button-danger[_ngcontent-%COMP%]:hover{background-color:#d32f2f!important;color:#fff!important}"]})};export{y as default};
