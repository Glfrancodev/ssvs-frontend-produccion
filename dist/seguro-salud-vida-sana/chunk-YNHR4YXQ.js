import{a as y}from"./chunk-O4UNKYOZ.js";import{a as P}from"./chunk-YE3MNDD4.js";import{a as O}from"./chunk-D2ZQW5V7.js";import{B as M,f as I,u as T}from"./chunk-N75CMMFK.js";import"./chunk-23JGRDG4.js";import"./chunk-4YRY4IP2.js";import{h as E}from"./chunk-K6LSCPIP.js";import{l as _,m as C,r as S}from"./chunk-LR5TSTT7.js";import{Ab as m,Bb as h,Ga as v,Gb as x,Hb as b,La as r,Ma as d,X as f,Za as s,ab as c,fb as i,gb as t,pb as p,yb as n,zb as u}from"./chunk-NI3O72AU.js";import"./chunk-ODN5LVDJ.js";var R=()=>({"min-width":"50rem","max-width":"100%"});function F(o,a){if(o&1&&(i(0,"div",4)(1,"p")(2,"strong"),n(3,"ID:"),t(),n(4),t(),i(5,"p")(6,"strong"),n(7,"Asegurado:"),t(),n(8),t(),i(9,"p")(10,"strong"),n(11,"Fecha Consulta:"),t(),n(12),t(),i(13,"p")(14,"strong"),n(15,"Motivo:"),t(),n(16),t(),i(17,"p")(18,"strong"),n(19,"Nota:"),t(),n(20),t(),i(21,"p")(22,"strong"),n(23,"M\xE9dico:"),t(),n(24),t(),i(25,"p")(26,"strong"),n(27,"Cupo:"),t(),n(28),t()()),o&2){let e=p();r(4),m(" ",e.consulta.id,""),r(4),h(" ",e.consulta.cupo==null||e.consulta.cupo.asegurado==null||e.consulta.cupo.asegurado.usuario==null?null:e.consulta.cupo.asegurado.usuario.nombre," ",e.consulta.cupo==null||e.consulta.cupo.asegurado==null||e.consulta.cupo.asegurado.usuario==null?null:e.consulta.cupo.asegurado.usuario.apellido,""),r(4),m(" ",e.consulta.fechaConsulta,""),r(4),m(" ",e.consulta.motivoConsulta,""),r(4),m(" ",e.consulta.nota,""),r(4),m(" ",e.consulta.cupo==null||e.consulta.cupo.horario==null||e.consulta.cupo.horario.medicoEspecialidad==null||e.consulta.cupo.horario.medicoEspecialidad.medico==null||e.consulta.cupo.horario.medicoEspecialidad.medico.usuario==null?null:e.consulta.cupo.horario.medicoEspecialidad.medico.usuario.nombre,""),r(4),m(" ",e.consulta.cupo==null?null:e.consulta.cupo.id,"")}}function w(o,a){o&1&&(i(0,"tr")(1,"th"),n(2,"Medicamento"),t(),i(3,"th"),n(4,"Frecuencia"),t(),i(5,"th"),n(6,"Fecha Inicio"),t(),i(7,"th"),n(8,"Fecha Final"),t()())}function A(o,a){if(o&1&&(i(0,"tr")(1,"td"),n(2),t(),i(3,"td"),n(4),t(),i(5,"td"),n(6),t(),i(7,"td"),n(8),t()()),o&2){let e=a.$implicit;r(2),u(e.medicamento),r(2),u(e.frecuencia),r(2),u(e.fechaInicio),r(2),u(e.fechaFinal)}}function N(o,a){if(o&1&&(i(0,"p-table",5),s(1,w,9,0,"ng-template",6)(2,A,9,4,"ng-template",7),t()),o&2){let e=p();c("value",e.recetas)("tableStyle",b(2,R))}}function D(o,a){o&1&&(i(0,"p"),n(1,"No hay recetas asociadas a esta consulta."),t())}function j(o,a){if(o&1&&(i(0,"li")(1,"a",9),n(2),t()()),o&2){let e=a.$implicit;r(),c("href",e.url,v),r(),u(e.nombre)}}function k(o,a){if(o&1&&(i(0,"ul"),s(1,j,3,2,"li",8),t()),o&2){let e=p();r(),c("ngForOf",e.archivos)}}function z(o,a){o&1&&(i(0,"p"),n(1,"No hay archivos adjuntos para esta consulta."),t())}var g=class o{constructor(a,e,l,B){this.recetaService=a;this.tratamientoService=e;this.consultaService=l;this.route=B}consulta=null;recetas=[];archivos=[];tratamientoId;ngOnInit(){let a=Number(this.route.snapshot.paramMap.get("consultaId"));a&&(this.obtenerDetallesConsulta(a),this.obtenerTratamientoYRecetas(a),this.obtenerArchivosConsulta(a))}obtenerDetallesConsulta(a){this.consultaService.getConsultaPorId(a).subscribe(e=>{this.consulta=e},e=>{console.error("Error al obtener detalles de la consulta:",e)})}obtenerTratamientoYRecetas(a){this.tratamientoService.getTratamientoByConsultaId(a).subscribe(e=>{e.id&&(this.tratamientoId=e.id,this.cargarRecetas(e.id))},e=>{console.error("Error al obtener el tratamiento:",e)})}cargarRecetas(a){this.recetaService.getRecetasByTratamientoId(a).subscribe(e=>{this.recetas=e},e=>{console.error("Error al cargar recetas:",e)})}obtenerArchivosConsulta(a){this.consultaService.getArchivosPorConsulta(a).subscribe(e=>{this.archivos=e.map(l=>({nombre:l.nombre,url:l.url}))},e=>{console.error("Error al cargar archivos:",e)})}static \u0275fac=function(e){return new(e||o)(d(y),d(P),d(O),d(E))};static \u0275cmp=f({type:o,selectors:[["app-tratamiento"]],standalone:!0,features:[x],decls:12,vars:5,consts:[[1,"tratamiento-container"],["class","consulta-detalle",4,"ngIf"],["dataKey","id",3,"value","tableStyle",4,"ngIf"],[4,"ngIf"],[1,"consulta-detalle"],["dataKey","id",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"h3"),n(2,"Detalle de Consulta"),t(),s(3,F,29,8,"div",1),i(4,"h4"),n(5,"Recetas"),t(),s(6,N,3,3,"p-table",2)(7,D,2,0,"p",3),i(8,"h4"),n(9,"Archivos Adjuntos"),t(),s(10,k,2,1,"ul",3)(11,z,2,0,"p",3),t()),e&2&&(r(3),c("ngIf",l.consulta),r(3),c("ngIf",l.recetas.length>0),r(),c("ngIf",l.recetas.length===0),r(3),c("ngIf",l.archivos.length>0),r(),c("ngIf",l.archivos.length===0))},dependencies:[M,T,I,S,_,C],styles:[".tratamiento-container[_ngcontent-%COMP%]{max-width:100%;margin:auto;padding:1.5rem;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 8px #0000001a}.tratamiento-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .tratamiento-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#3f51b5;text-align:center;margin-bottom:1rem}.consulta-detalle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem}.p-table[_ngcontent-%COMP%]{width:100%;border-radius:8px;overflow:hidden;font-size:1rem;box-shadow:0 4px 8px #0000001a}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;padding:12px;text-align:center;font-weight:700}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f7f7f7}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;vertical-align:middle}"]})};export{g as default};
