import{a as B}from"./chunk-WURDNOJS.js";import{b as C,d as E,e as M,j as _}from"./chunk-24563CTF.js";import{j as S,o as w}from"./chunk-EALBQTKK.js";import{q as y}from"./chunk-5DWL5JJZ.js";import{Ab as l,Eb as d,Fb as u,Gb as g,Ib as h,Na as m,Oa as c,_ as b,hb as t,ib as e,ja as x,jb as a,qb as v}from"./chunk-3RWLLOHT.js";var p=class f{constructor(o,n,i){this.authService=o;this.router=n;this.bitacoraService=i}correo="";contrasena="";login(){this.authService.login(this.correo,this.contrasena).subscribe({next:()=>{this.registrarBitacora(),this.router.navigate(["/dashboard"])},error:o=>console.error("Login failed",o)})}registrarBitacora(){this.bitacoraService.getUserIP().subscribe({next:o=>{let n=new Date,i=n.toISOString().split("T")[0],s=n.toTimeString().split(" ")[0],r={correo:this.correo,fecha:i,hora:s,ip:o.ip,accion:"Inicio de sesi\xF3n correcto",detalle:"El usuario inici\xF3 sesi\xF3n en la plataforma"};this.bitacoraService.createBitacora(r).subscribe({next:()=>console.log("Bit\xE1cora registrada con \xE9xito"),error:L=>console.error("Error al registrar en la bit\xE1cora",L)})},error:o=>console.error("Error al obtener IP",o)})}static \u0275fac=function(n){return new(n||f)(c(w),c(S),c(B))};static \u0275cmp=b({type:f,selectors:[["app-login"]],standalone:!0,features:[h],decls:35,vars:2,consts:[[1,"bg-green-900","absolute","top-0","left-0","bg-gradient-to-b","from-gray-900","via-gray-900","to-green-800","bottom-0","leading-5","h-full","w-full","overflow-hidden"],[1,"relative","min-h-screen","sm:flex","sm:flex-row","justify-center","bg-transparent","rounded-3xl","shadow-xl"],[1,"flex-col","flex","self-center","lg:px-14","sm:max-w-4xl","xl:max-w-md","z-10"],[1,"self-start","hidden","lg:flex","flex-col","text-gray-300"],[1,"my-3","font-semibold","text-4xl"],[1,"pr-3","text-sm","opacity-75"],[1,"flex","justify-center","self-center","z-10"],[1,"p-12","bg-white","mx-auto","rounded-3xl","w-96"],[1,"mb-7"],[1,"font-semibold","text-2xl","text-gray-800"],[1,"space-y-6"],[1,""],["type","","placeholder","Correo",1,"w-full","text-sm","px-4","py-3","bg-gray-200","focus:bg-gray-100","border","border-gray-200","rounded-lg","focus:outline-none","focus:border-purple-400",3,"ngModelChange","ngModel"],["x-data","{ show: true }",1,"relative"],["placeholder","Contrase\xF1a","type","password",1,"text-sm","text-gray-200","px-4","py-3","rounded-lg","w-full","bg-gray-200","focus:bg-gray-100","border","border-gray-200","focus:outline-none","focus:border-purple-400",2,"color","#000",3,"ngModelChange","ngModel"],[1,"flex","items-center","absolute","inset-y-0","right-0","mr-3","text-sm","leading-5"],[1,"flex","items-center","justify-between"],[1,"text-sm","ml-auto"],["href","#",1,"text-green-700","hover:text-green-600"],["type","submit",1,"w-full","flex","justify-center","bg-green-800","hover:bg-green-700","text-gray-100","p-3","rounded-lg","tracking-wide","font-semibold","cursor-pointer","transition","ease-in","duration-500",3,"click"],[1,"flex","items-center","justify-center","space-x-2","my-5"],[1,"h-px","w-16","bg-gray-100"],[1,"mt-7","text-center","text-gray-300","text-xs"],[1,"bg-transparent","absolute","w-full","bottom-0","left-0","z-30"],[1,"container","p-5","mx-auto","flex","items-center","justify-between"],[1,"flex","mr-auto"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1250 320",1,"absolute","bottom-0","left-0"],["fill","#fff","fill-opacity","0.9","d","M0,0L40,42.7C80,85,160,171,240,197.3C320,224,400,192,480,154.7C560,117,640,75,720,74.7C800,75,880,117,960,154.7C1040,192,1120,224,1200,213.3C1280,203,1360,149,1400,122.7L1440,96L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"]],template:function(n,i){n&1&&(a(0,"div",0),t(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),l(5,"Bienvenido"),e(),t(6,"p",5),l(7,"Aqu\xED podr\xE1 solicitar citas m\xE9dicas, revisar su historial cl\xEDnico y gestionar su atenci\xF3n en un entorno digital confiable. En SSVS, estamos comprometidos con su bienestar y la protecci\xF3n de su informaci\xF3n."),e()()(),t(8,"div",6)(9,"div",7)(10,"div",8)(11,"h3",9),l(12,"Inicia Sesi\xF3n"),e()(),t(13,"div",10)(14,"div",11)(15,"input",12),g("ngModelChange",function(r){return u(i.correo,r)||(i.correo=r),r}),e()(),t(16,"div",13)(17,"input",14),g("ngModelChange",function(r){return u(i.contrasena,r)||(i.contrasena=r),r}),e(),a(18,"div",15),e(),t(19,"div",16)(20,"div",17)(21,"a",18),l(22," \xBFOlvidaste tu contrase\xF1a? "),e()()(),t(23,"div")(24,"button",19),v("click",function(){return i.login()}),l(25," Inicia Sesi\xF3n "),e()(),t(26,"div",20),a(27,"span",21)(28,"span",21),e()(),a(29,"div",22),e()()(),t(30,"footer",23)(31,"div",24),a(32,"div",25),e()(),x(),t(33,"svg",26),a(34,"path",27),e()),n&2&&(m(15),d("ngModel",i.correo),m(2),d("ngModel",i.contrasena))},dependencies:[_,C,E,M,y]})};export{p as default};
