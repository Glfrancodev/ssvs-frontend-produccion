import{a as Mt,b as Rt,c as et}from"./chunk-HWUH7ABB.js";import"./chunk-JCJIXIGU.js";import{a as At}from"./chunk-UJ32YO6L.js";import{a as Ft}from"./chunk-MZW6JDJM.js";import{a as kt}from"./chunk-64ACLIH3.js";import{a as xt,b as Dt}from"./chunk-37FNDG3E.js";import{B as Wt,f as Ct,k as Pt,l as Ht,n as Tt,u as _t}from"./chunk-LJKAMAZ5.js";import{j as wt}from"./chunk-W5NNSEVP.js";import"./chunk-4YRY4IP2.js";import{a as St}from"./chunk-S2R25WKX.js";import{h as mt,j as yt,o as bt}from"./chunk-V6WZIOIM.js";import{r as vt}from"./chunk-2HP4KZBQ.js";import{$a as dt,Fb as pt,Gb as ct,Ka as J,La as K,N as ot,X as lt,Ya as ut,ea as st,eb as L,fa as ft,fb as N,kb as ht,nb as tt,ob as gt,xb as $,yb as X}from"./chunk-TOSOZOFE.js";import{e as Et,g as zt,h as at}from"./chunk-ODN5LVDJ.js";var jt=Et((Q,it)=>{"use strict";(function(E,M){if(typeof Q=="object"&&typeof it=="object")it.exports=M(function(){try{return et(),at(Rt)}catch{}}());else if(typeof define=="function"&&define.amd)define(["jspdf"],M);else{var z=M(typeof Q=="object"?function(){try{return et(),at(Rt)}catch{}}():E.jspdf);for(var Y in z)(typeof Q=="object"?Q:E)[Y]=z[Y]}})(typeof globalThis<"u"?globalThis:typeof Q<"u"?Q:typeof window<"u"?window:typeof self<"u"?self:global,function(U){return function(){"use strict";var E={172:function(k,y){var T=this&&this.__extends||function(){var m=function(C,a){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,v){b.__proto__=v}||function(b,v){for(var d in v)Object.prototype.hasOwnProperty.call(v,d)&&(b[d]=v[d])},m(C,a)};return function(C,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");m(C,a);function b(){this.constructor=C}C.prototype=a===null?Object.create(a):(b.prototype=a.prototype,new b)}}();Object.defineProperty(y,"__esModule",{value:!0}),y.CellHookData=y.HookData=void 0;var A=function(){function m(C,a,b){this.table=a,this.pageNumber=a.pageNumber,this.pageCount=this.pageNumber,this.settings=a.settings,this.cursor=b,this.doc=C.getDocument()}return m}();y.HookData=A;var w=function(m){T(C,m);function C(a,b,v,d,n,t){var e=m.call(this,a,b,t)||this;return e.cell=v,e.row=d,e.column=n,e.section=d.section,e}return C}(A);y.CellHookData=w},340:function(k,y,T){Object.defineProperty(y,"__esModule",{value:!0});var A=T(4),w=T(136),m=T(744),C=T(776),a=T(664),b=T(972);function v(d){d.API.autoTable=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e;n.length===1?e=n[0]:(console.error("Use of deprecated autoTable initiation"),e=n[2]||{},e.columns=n[0],e.body=n[1]);var l=(0,C.parseInput)(this,e),s=(0,b.createTable)(this,l);return(0,a.drawTable)(this,s),this},d.API.lastAutoTable=!1,d.API.previousAutoTable=!1,d.API.autoTable.previous=!1,d.API.autoTableText=function(n,t,e,l){(0,w.default)(n,t,e,l,this)},d.API.autoTableSetDefaults=function(n){return m.DocHandler.setDefaults(n,this),this},d.autoTableSetDefaults=function(n,t){m.DocHandler.setDefaults(n,t)},d.API.autoTableHtmlToJson=function(n,t){var e;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var l=new m.DocHandler(this),s=(0,A.parseHtml)(l,n,window,t,!1),i=s.head,f=s.body,p=((e=i[0])===null||e===void 0?void 0:e.map(function(c){return c.content}))||[];return{columns:p,rows:f,data:f}},d.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var n=this.lastAutoTable;return n&&n.finalY?n.finalY:0},d.API.autoTableAddPageContent=function(n){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),d.API.autoTable.globalDefaults||(d.API.autoTable.globalDefaults={}),d.API.autoTable.globalDefaults.addPageContent=n,this},d.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}y.default=v},136:function(k,y){Object.defineProperty(y,"__esModule",{value:!0});function T(A,w,m,C,a){C=C||{};var b=1.15,v=a.internal.scaleFactor,d=a.internal.getFontSize()/v,n=a.getLineHeightFactor?a.getLineHeightFactor():b,t=d*n,e=/\r\n|\r|\n/g,l="",s=1;if((C.valign==="middle"||C.valign==="bottom"||C.halign==="center"||C.halign==="right")&&(l=typeof A=="string"?A.split(e):A,s=l.length||1),m+=d*(2-b),C.valign==="middle"?m-=s/2*t:C.valign==="bottom"&&(m-=s*t),C.halign==="center"||C.halign==="right"){var i=d;if(C.halign==="center"&&(i*=.5),l&&s>=1){for(var f=0;f<l.length;f++)a.text(l[f],w-a.getStringUnitWidth(l[f])*i,m),m+=t;return a}w-=a.getStringUnitWidth(A)*i}return C.halign==="justify"?a.text(A,w,m,{maxWidth:C.maxWidth||100,align:"justify"}):a.text(A,w,m),a}y.default=T},420:function(k,y){Object.defineProperty(y,"__esModule",{value:!0}),y.getPageAvailableWidth=y.parseSpacing=y.getFillStyle=y.addTableBorder=y.getStringWidth=void 0;function T(a,b,v){v.applyStyles(b,!0);var d=Array.isArray(a)?a:[a],n=d.map(function(t){return v.getTextWidth(t)}).reduce(function(t,e){return Math.max(t,e)},0);return n}y.getStringWidth=T;function A(a,b,v,d){var n=b.settings.tableLineWidth,t=b.settings.tableLineColor;a.applyStyles({lineWidth:n,lineColor:t});var e=w(n,!1);e&&a.rect(v.x,v.y,b.getWidth(a.pageSize().width),d.y-v.y,e)}y.addTableBorder=A;function w(a,b){var v=a>0,d=b||b===0;return v&&d?"DF":v?"S":d?"F":null}y.getFillStyle=w;function m(a,b){var v,d,n,t;if(a=a||b,Array.isArray(a)){if(a.length>=4)return{top:a[0],right:a[1],bottom:a[2],left:a[3]};if(a.length===3)return{top:a[0],right:a[1],bottom:a[2],left:a[1]};if(a.length===2)return{top:a[0],right:a[1],bottom:a[0],left:a[1]};a.length===1?a=a[0]:a=b}return typeof a=="object"?(typeof a.vertical=="number"&&(a.top=a.vertical,a.bottom=a.vertical),typeof a.horizontal=="number"&&(a.right=a.horizontal,a.left=a.horizontal),{left:(v=a.left)!==null&&v!==void 0?v:b,top:(d=a.top)!==null&&d!==void 0?d:b,right:(n=a.right)!==null&&n!==void 0?n:b,bottom:(t=a.bottom)!==null&&t!==void 0?t:b}):(typeof a!="number"&&(a=b),{top:a,right:a,bottom:a,left:a})}y.parseSpacing=m;function C(a,b){var v=m(b.settings.margin,0);return a.pageSize().width-(v.left+v.right)}y.getPageAvailableWidth=C},796:function(k,y){var T=this&&this.__extends||function(){var C=function(a,b){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,d){v.__proto__=d}||function(v,d){for(var n in d)Object.prototype.hasOwnProperty.call(d,n)&&(v[n]=d[n])},C(a,b)};return function(a,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");C(a,b);function v(){this.constructor=a}a.prototype=b===null?Object.create(b):(v.prototype=b.prototype,new v)}}();Object.defineProperty(y,"__esModule",{value:!0}),y.getTheme=y.defaultStyles=y.HtmlRowInput=void 0;var A=function(C){T(a,C);function a(b){var v=C.call(this)||this;return v._element=b,v}return a}(Array);y.HtmlRowInput=A;function w(C){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/C,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}y.defaultStyles=w;function m(C){var a={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return a[C]}y.getTheme=m},903:function(k,y,T){Object.defineProperty(y,"__esModule",{value:!0}),y.parseCss=void 0;var A=T(420);function w(v,d,n,t,e){var l={},s=1.3333333333333333,i=C(d,function(h){return e.getComputedStyle(h).backgroundColor});i!=null&&(l.fillColor=i);var f=C(d,function(h){return e.getComputedStyle(h).color});f!=null&&(l.textColor=f);var p=b(t,n);p&&(l.cellPadding=p);var c="borderTopColor",g=s*n,o=t.borderTopWidth;if(t.borderBottomWidth===o&&t.borderRightWidth===o&&t.borderLeftWidth===o){var P=(parseFloat(o)||0)/g;P&&(l.lineWidth=P)}else l.lineWidth={top:(parseFloat(t.borderTopWidth)||0)/g,right:(parseFloat(t.borderRightWidth)||0)/g,bottom:(parseFloat(t.borderBottomWidth)||0)/g,left:(parseFloat(t.borderLeftWidth)||0)/g},l.lineWidth.top||(l.lineWidth.right?c="borderRightColor":l.lineWidth.bottom?c="borderBottomColor":l.lineWidth.left&&(c="borderLeftColor"));var _=C(d,function(h){return e.getComputedStyle(h)[c]});_!=null&&(l.lineColor=_);var O=["left","right","center","justify"];O.indexOf(t.textAlign)!==-1&&(l.halign=t.textAlign),O=["middle","bottom","top"],O.indexOf(t.verticalAlign)!==-1&&(l.valign=t.verticalAlign);var u=parseInt(t.fontSize||"");isNaN(u)||(l.fontSize=u/s);var r=m(t);r&&(l.fontStyle=r);var S=(t.fontFamily||"").toLowerCase();return v.indexOf(S)!==-1&&(l.font=S),l}y.parseCss=w;function m(v){var d="";return(v.fontWeight==="bold"||v.fontWeight==="bolder"||parseInt(v.fontWeight)>=700)&&(d="bold"),(v.fontStyle==="italic"||v.fontStyle==="oblique")&&(d+="italic"),d}function C(v,d){var n=a(v,d);if(!n)return null;var t=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!t||!Array.isArray(t))return null;var e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],l=parseInt(t[4]);return l===0||isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function a(v,d){var n=d(v);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?v.parentElement==null?null:a(v.parentElement,d):n}function b(v,d){var n=[v.paddingTop,v.paddingRight,v.paddingBottom,v.paddingLeft],t=96/(72/d),e=(parseInt(v.lineHeight)-parseInt(v.fontSize))/d/2,l=n.map(function(i){return parseInt(i||"0")/t}),s=(0,A.parseSpacing)(l,0);return e>s.top&&(s.top=e),e>s.bottom&&(s.bottom=e),s}},744:function(k,y){Object.defineProperty(y,"__esModule",{value:!0}),y.DocHandler=void 0;var T={},A=function(){function w(m){this.jsPDFDocument=m,this.userStyles={textColor:m.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:m.internal.getFontSize(),fontStyle:m.internal.getFont().fontStyle,font:m.internal.getFont().fontName,lineWidth:m.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:m.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return w.setDefaults=function(m,C){C===void 0&&(C=null),C?C.__autoTableDocumentDefaults=m:T=m},w.unifyColor=function(m){return Array.isArray(m)?m:typeof m=="number"?[m,m,m]:typeof m=="string"?[m]:null},w.prototype.applyStyles=function(m,C){var a,b,v;C===void 0&&(C=!1),m.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(m.fontStyle);var d=this.jsPDFDocument.internal.getFont(),n=d.fontStyle,t=d.fontName;if(m.font&&(t=m.font),m.fontStyle){n=m.fontStyle;var e=this.getFontList()[t];e&&e.indexOf(n)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e[0]),n=e[0])}if(this.jsPDFDocument.setFont(t,n),m.fontSize&&this.jsPDFDocument.setFontSize(m.fontSize),!C){var l=w.unifyColor(m.fillColor);l&&(a=this.jsPDFDocument).setFillColor.apply(a,l),l=w.unifyColor(m.textColor),l&&(b=this.jsPDFDocument).setTextColor.apply(b,l),l=w.unifyColor(m.lineColor),l&&(v=this.jsPDFDocument).setDrawColor.apply(v,l),typeof m.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(m.lineWidth)}},w.prototype.splitTextToSize=function(m,C,a){return this.jsPDFDocument.splitTextToSize(m,C,a)},w.prototype.rect=function(m,C,a,b,v){return this.jsPDFDocument.rect(m,C,a,b,v)},w.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},w.prototype.getTextWidth=function(m){return this.jsPDFDocument.getTextWidth(m)},w.prototype.getDocument=function(){return this.jsPDFDocument},w.prototype.setPage=function(m){this.jsPDFDocument.setPage(m)},w.prototype.addPage=function(){return this.jsPDFDocument.addPage()},w.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},w.prototype.getGlobalOptions=function(){return T||{}},w.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},w.prototype.pageSize=function(){var m=this.jsPDFDocument.internal.pageSize;return m.width==null&&(m={width:m.getWidth(),height:m.getHeight()}),m},w.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},w.prototype.getLineHeightFactor=function(){var m=this.jsPDFDocument;return m.getLineHeightFactor?m.getLineHeightFactor():1.15},w.prototype.getLineHeight=function(m){return m/this.scaleFactor()*this.getLineHeightFactor()},w.prototype.pageNumber=function(){var m=this.jsPDFDocument.internal.getCurrentPageInfo();return m?m.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},w}();y.DocHandler=A},4:function(k,y,T){Object.defineProperty(y,"__esModule",{value:!0}),y.parseHtml=void 0;var A=T(903),w=T(796);function m(b,v,d,n,t){var e,l;n===void 0&&(n=!1),t===void 0&&(t=!1);var s;typeof v=="string"?s=d.document.querySelector(v):s=v;var i=Object.keys(b.getFontList()),f=b.scaleFactor(),p=[],c=[],g=[];if(!s)return console.error("Html table could not be found with input: ",v),{head:p,body:c,foot:g};for(var o=0;o<s.rows.length;o++){var P=s.rows[o],_=(l=(e=P?.parentElement)===null||e===void 0?void 0:e.tagName)===null||l===void 0?void 0:l.toLowerCase(),O=C(i,f,d,P,n,t);O&&(_==="thead"?p.push(O):_==="tfoot"?g.push(O):c.push(O))}return{head:p,body:c,foot:g}}y.parseHtml=m;function C(b,v,d,n,t,e){for(var l=new w.HtmlRowInput(n),s=0;s<n.cells.length;s++){var i=n.cells[s],f=d.getComputedStyle(i);if(t||f.display!=="none"){var p=void 0;e&&(p=(0,A.parseCss)(b,i,v,f,d)),l.push({rowSpan:i.rowSpan,colSpan:i.colSpan,styles:p,_element:i,content:a(i)})}}var c=d.getComputedStyle(n);if(l.length>0&&(t||c.display!=="none"))return l}function a(b){var v=b.cloneNode(!0);return v.innerHTML=v.innerHTML.replace(/\n/g,"").replace(/ +/g," "),v.innerHTML=v.innerHTML.split(/<br.*?>/).map(function(d){return d.trim()}).join(`
`),v.innerText||v.textContent||""}},776:function(k,y,T){Object.defineProperty(y,"__esModule",{value:!0}),y.parseInput=void 0;var A=T(4),w=T(356),m=T(420),C=T(744),a=T(792);function b(s,i){var f=new C.DocHandler(s),p=f.getDocumentOptions(),c=f.getGlobalOptions();(0,a.default)(f,c,p,i);var g=(0,w.assign)({},c,p,i),o;typeof window<"u"&&(o=window);var P=v(c,p,i),_=d(c,p,i),O=n(f,g),u=e(f,g,o);return{id:i.tableId,content:u,hooks:_,styles:P,settings:O}}y.parseInput=b;function v(s,i,f){for(var p={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},c=function(_){if(_==="columnStyles"){var O=s[_],u=i[_],r=f[_];p.columnStyles=(0,w.assign)({},O,u,r)}else{var S=[s,i,f],h=S.map(function(x){return x[_]||{}});p[_]=(0,w.assign)({},h[0],h[1],h[2])}},g=0,o=Object.keys(p);g<o.length;g++){var P=o[g];c(P)}return p}function d(s,i,f){for(var p=[s,i,f],c={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},g=0,o=p;g<o.length;g++){var P=o[g];P.didParseCell&&c.didParseCell.push(P.didParseCell),P.willDrawCell&&c.willDrawCell.push(P.willDrawCell),P.didDrawCell&&c.didDrawCell.push(P.didDrawCell),P.willDrawPage&&c.willDrawPage.push(P.willDrawPage),P.didDrawPage&&c.didDrawPage.push(P.didDrawPage)}return c}function n(s,i){var f,p,c,g,o,P,_,O,u,r,S,h,x=(0,m.parseSpacing)(i.margin,40/s.scaleFactor()),H=(f=t(s,i.startY))!==null&&f!==void 0?f:x.top,D;i.showFoot===!0?D="everyPage":i.showFoot===!1?D="never":D=(p=i.showFoot)!==null&&p!==void 0?p:"everyPage";var W;i.showHead===!0?W="everyPage":i.showHead===!1?W="never":W=(c=i.showHead)!==null&&c!==void 0?c:"everyPage";var j=(g=i.useCss)!==null&&g!==void 0?g:!1,R=i.theme||(j?"plain":"striped"),F=!!i.horizontalPageBreak,B=(o=i.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(P=i.includeHiddenHtml)!==null&&P!==void 0?P:!1,useCss:j,theme:R,startY:H,margin:x,pageBreak:(_=i.pageBreak)!==null&&_!==void 0?_:"auto",rowPageBreak:(O=i.rowPageBreak)!==null&&O!==void 0?O:"auto",tableWidth:(u=i.tableWidth)!==null&&u!==void 0?u:"auto",showHead:W,showFoot:D,tableLineWidth:(r=i.tableLineWidth)!==null&&r!==void 0?r:0,tableLineColor:(S=i.tableLineColor)!==null&&S!==void 0?S:200,horizontalPageBreak:F,horizontalPageBreakRepeat:B,horizontalPageBreakBehaviour:(h=i.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function t(s,i){var f=s.getLastAutoTable(),p=s.scaleFactor(),c=s.pageNumber(),g=!1;if(f&&f.startPageNumber){var o=f.startPageNumber+f.pageNumber-1;g=o===c}return typeof i=="number"?i:(i==null||i===!1)&&g&&f?.finalY!=null?f.finalY+20/p:null}function e(s,i,f){var p=i.head||[],c=i.body||[],g=i.foot||[];if(i.html){var o=i.includeHiddenHtml;if(f){var P=(0,A.parseHtml)(s,i.html,f,o,i.useCss)||{};p=P.head||p,c=P.body||p,g=P.foot||p}else console.error("Cannot parse html in non browser environment")}var _=i.columns||l(p,c,g);return{columns:_,head:p,body:c,foot:g}}function l(s,i,f){var p=s[0]||i[0]||f[0]||[],c=[];return Object.keys(p).filter(function(g){return g!=="_element"}).forEach(function(g){var o=1,P;Array.isArray(p)?P=p[parseInt(g)]:P=p[g],typeof P=="object"&&!Array.isArray(P)&&(o=P?.colSpan||1);for(var _=0;_<o;_++){var O=void 0;Array.isArray(p)?O=c.length:O=g+(_>0?"_".concat(_):"");var u={dataKey:O};c.push(u)}}),c}},792:function(k,y){Object.defineProperty(y,"__esModule",{value:!0});function T(w,m,C,a){for(var b=function(t){t&&typeof t!="object"&&console.error("The options parameter should be of type object, is: "+typeof t),typeof t.extendWidth<"u"&&(t.tableWidth=t.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof t.margins<"u"&&(typeof t.margin>"u"&&(t.margin=t.margins),console.error("Use of deprecated option: margins, use margin instead.")),t.startY&&typeof t.startY!="number"&&(console.error("Invalid value for startY option",t.startY),delete t.startY),!t.didDrawPage&&(t.afterPageContent||t.beforePageContent||t.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),t.didDrawPage=function(g){w.applyStyles(w.userStyles),t.beforePageContent&&t.beforePageContent(g),w.applyStyles(w.userStyles),t.afterPageContent&&t.afterPageContent(g),w.applyStyles(w.userStyles),t.afterPageAdd&&g.pageNumber>1&&g.afterPageAdd(g),w.applyStyles(w.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(g){t[g]&&console.error('The "'.concat(g,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(g){var o=g[0],P=g[1];t[P]&&(console.error("Use of deprecated option ".concat(P,". Use ").concat(o," instead")),t[o]=t[P])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(g){var o=typeof g=="string"?g:g[0],P=typeof g=="string"?g:g[1];typeof t[o]<"u"&&(typeof t.styles[P]>"u"&&(t.styles[P]=t[o]),console.error("Use of deprecated option: "+o+", use the style "+P+" instead."))});for(var e=0,l=["styles","bodyStyles","headStyles","footStyles"];e<l.length;e++){var s=l[e];A(t[s]||{})}for(var i=t.columnStyles||{},f=0,p=Object.keys(i);f<p.length;f++){var c=p[f];A(i[c]||{})}},v=0,d=[m,C,a];v<d.length;v++){var n=d[v];b(n)}}y.default=T;function A(w){w.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),w.minCellHeight||(w.minCellHeight=w.rowHeight)):w.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),w.cellWidth||(w.cellWidth=w.columnWidth))}},260:function(k,y,T){Object.defineProperty(y,"__esModule",{value:!0}),y.Column=y.Cell=y.Row=y.Table=void 0;var A=T(796),w=T(172),m=T(420),C=function(){function d(n,t){this.pageNumber=1,this.pageCount=1,this.id=n.id,this.settings=n.settings,this.styles=n.styles,this.hooks=n.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return d.prototype.getHeadHeight=function(n){return this.head.reduce(function(t,e){return t+e.getMaxCellHeight(n)},0)},d.prototype.getFootHeight=function(n){return this.foot.reduce(function(t,e){return t+e.getMaxCellHeight(n)},0)},d.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},d.prototype.callCellHooks=function(n,t,e,l,s,i){for(var f=0,p=t;f<p.length;f++){var c=p[f],g=new w.CellHookData(n,this,e,l,s,i),o=c(g)===!1;if(e.text=Array.isArray(e.text)?e.text:[e.text],o)return!1}return!0},d.prototype.callEndPageHooks=function(n,t){n.applyStyles(n.userStyles);for(var e=0,l=this.hooks.didDrawPage;e<l.length;e++){var s=l[e];s(new w.HookData(n,this,t))}},d.prototype.callWillDrawPageHooks=function(n,t){for(var e=0,l=this.hooks.willDrawPage;e<l.length;e++){var s=l[e];s(new w.HookData(n,this,t))}},d.prototype.getWidth=function(n){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(l,s){return l+s.wrappedWidth},0);return t}else{var e=this.settings.margin;return n-e.left-e.right}},d}();y.Table=C;var a=function(){function d(n,t,e,l,s){s===void 0&&(s=!1),this.height=0,this.raw=n,n instanceof A.HtmlRowInput&&(this.raw=n._element,this.element=n._element),this.index=t,this.section=e,this.cells=l,this.spansMultiplePages=s}return d.prototype.getMaxCellHeight=function(n){var t=this;return n.reduce(function(e,l){var s;return Math.max(e,((s=t.cells[l.index])===null||s===void 0?void 0:s.height)||0)},0)},d.prototype.hasRowSpan=function(n){var t=this;return n.filter(function(e){var l=t.cells[e.index];return l?l.rowSpan>1:!1}).length>0},d.prototype.canEntireRowFit=function(n,t){return this.getMaxCellHeight(t)<=n},d.prototype.getMinimumRowHeight=function(n,t){var e=this;return n.reduce(function(l,s){var i=e.cells[s.index];if(!i)return 0;var f=t.getLineHeight(i.styles.fontSize),p=i.padding("vertical"),c=p+f;return c>l?c:l},0)},d}();y.Row=a;var b=function(){function d(n,t,e){var l,s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=e,this.raw=n;var i=n;n!=null&&typeof n=="object"&&!Array.isArray(n)?(this.rowSpan=n.rowSpan||1,this.colSpan=n.colSpan||1,i=(s=(l=n.content)!==null&&l!==void 0?l:n.title)!==null&&s!==void 0?s:n,n._element&&(this.raw=n._element)):(this.rowSpan=1,this.colSpan=1);var f=i!=null?""+i:"",p=/\r\n|\r|\n/g;this.text=f.split(p)}return d.prototype.getTextPos=function(){var n;if(this.styles.valign==="top")n=this.y+this.padding("top");else if(this.styles.valign==="bottom")n=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");n=this.y+t/2+this.padding("top")}var e;if(this.styles.halign==="right")e=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var l=this.width-this.padding("horizontal");e=this.x+l/2+this.padding("left")}else e=this.x+this.padding("left");return{x:e,y:n}},d.prototype.getContentHeight=function(n,t){t===void 0&&(t=1.15);var e=Array.isArray(this.text)?this.text.length:1,l=this.styles.fontSize/n*t,s=e*l+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},d.prototype.padding=function(n){var t=(0,m.parseSpacing)(this.styles.cellPadding,0);return n==="vertical"?t.top+t.bottom:n==="horizontal"?t.left+t.right:t[n]},d}();y.Cell=b;var v=function(){function d(n,t,e){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=n,this.raw=t,this.index=e}return d.prototype.getMaxCustomCellWidth=function(n){for(var t=0,e=0,l=n.allRows();e<l.length;e++){var s=l[e],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(t=Math.max(t,i.styles.cellWidth))}return t},d}();y.Column=v},356:function(k,y){Object.defineProperty(y,"__esModule",{value:!0}),y.assign=void 0;function T(A,w,m,C,a){if(A==null)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(A),v=1;v<arguments.length;v++){var d=arguments[v];if(d!=null)for(var n in d)Object.prototype.hasOwnProperty.call(d,n)&&(b[n]=d[n])}return b}y.assign=T},972:function(k,y,T){Object.defineProperty(y,"__esModule",{value:!0}),y.createTable=void 0;var A=T(744),w=T(260),m=T(324),C=T(796),a=T(356);function b(s,i){var f=new A.DocHandler(s),p=v(i,f.scaleFactor()),c=new w.Table(i,p);return(0,m.calculateWidths)(f,c),f.applyStyles(f.userStyles),c}y.createTable=b;function v(s,i){var f=s.content,p=e(f.columns);if(f.head.length===0){var c=n(p,"head");c&&f.head.push(c)}if(f.foot.length===0){var c=n(p,"foot");c&&f.foot.push(c)}var g=s.settings.theme,o=s.styles;return{columns:p,head:d("head",f.head,p,o,g,i),body:d("body",f.body,p,o,g,i),foot:d("foot",f.foot,p,o,g,i)}}function d(s,i,f,p,c,g){var o={},P=i.map(function(_,O){for(var u=0,r={},S=0,h=0,x=0,H=f;x<H.length;x++){var D=H[x];if(o[D.index]==null||o[D.index].left===0)if(h===0){var W=void 0;Array.isArray(_)?W=_[D.index-S-u]:W=_[D.dataKey];var j={};typeof W=="object"&&!Array.isArray(W)&&(j=W?.styles||{});var R=l(s,D,O,c,p,g,j),F=new w.Cell(W,R,s);r[D.dataKey]=F,r[D.index]=F,h=F.colSpan-1,o[D.index]={left:F.rowSpan-1,times:h}}else h--,S++;else o[D.index].left--,h=o[D.index].times,u++}return new w.Row(_,O,s,r)});return P}function n(s,i){var f={};return s.forEach(function(p){if(p.raw!=null){var c=t(i,p.raw);c!=null&&(f[p.dataKey]=c)}}),Object.keys(f).length>0?f:null}function t(s,i){if(s==="head"){if(typeof i=="object")return i.header||i.title||null;if(typeof i=="string"||typeof i=="number")return i}else if(s==="foot"&&typeof i=="object")return i.footer;return null}function e(s){return s.map(function(i,f){var p,c,g;return typeof i=="object"?g=(c=(p=i.dataKey)!==null&&p!==void 0?p:i.key)!==null&&c!==void 0?c:f:g=f,new w.Column(g,i,f)})}function l(s,i,f,p,c,g,o){var P=(0,C.getTheme)(p),_;s==="head"?_=c.headStyles:s==="body"?_=c.bodyStyles:s==="foot"&&(_=c.footStyles);var O=(0,a.assign)({},P.table,P[s],c.styles,_),u=c.columnStyles[i.dataKey]||c.columnStyles[i.index]||{},r=s==="body"?u:{},S=s==="body"&&f%2===0?(0,a.assign)({},P.alternateRow,c.alternateRowStyles):{},h=(0,C.defaultStyles)(g),x=(0,a.assign)({},h,O,S,r);return(0,a.assign)(x,o)}},664:function(k,y,T){Object.defineProperty(y,"__esModule",{value:!0}),y.addPage=y.drawTable=void 0;var A=T(420),w=T(260),m=T(744),C=T(356),a=T(136),b=T(224);function v(u,r){var S=r.settings,h=S.startY,x=S.margin,H={x:x.left,y:h},D=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns),W=h+x.bottom+D;if(S.pageBreak==="avoid"){var j=r.body,R=j.reduce(function(I,G){return I+G.height},0);W+=R}var F=new m.DocHandler(u);(S.pageBreak==="always"||S.startY!=null&&W>F.pageSize().height)&&(O(F),H.y=x.top),r.callWillDrawPageHooks(F,H);var B=(0,C.assign)({},H);r.startPageNumber=F.pageNumber(),S.horizontalPageBreak?d(F,r,B,H):(F.applyStyles(F.userStyles),(S.showHead==="firstPage"||S.showHead==="everyPage")&&r.head.forEach(function(I){return c(F,r,I,H,r.columns)}),F.applyStyles(F.userStyles),r.body.forEach(function(I,G){var Z=G===r.body.length-1;p(F,r,I,Z,B,H,r.columns)}),F.applyStyles(F.userStyles),(S.showFoot==="lastPage"||S.showFoot==="everyPage")&&r.foot.forEach(function(I){return c(F,r,I,H,r.columns)})),(0,A.addTableBorder)(F,r,B,H),r.callEndPageHooks(F,H),r.finalY=H.y,u.lastAutoTable=r,u.previousAutoTable=r,u.autoTable&&(u.autoTable.previous=r),F.applyStyles(F.userStyles)}y.drawTable=v;function d(u,r,S,h){var x=(0,b.calculateAllColumnsCanFitInPage)(u,r),H=r.settings;if(H.horizontalPageBreakBehaviour==="afterAllRows")x.forEach(function(R,F){u.applyStyles(u.userStyles),F>0?_(u,r,S,h,R.columns,!0):n(u,r,h,R.columns),t(u,r,S,h,R.columns),l(u,r,h,R.columns)});else for(var D=-1,W=x[0],j=function(){var R=D;if(W){u.applyStyles(u.userStyles);var F=W.columns;D>=0?_(u,r,S,h,F,!0):n(u,r,h,F),R=e(u,r,D+1,h,F),l(u,r,h,F)}var B=R-D;x.slice(1).forEach(function(I){u.applyStyles(u.userStyles),_(u,r,S,h,I.columns,!0),e(u,r,D+1,h,I.columns,B),l(u,r,h,I.columns)}),D=R};D<r.body.length-1;)j()}function n(u,r,S,h){var x=r.settings;u.applyStyles(u.userStyles),(x.showHead==="firstPage"||x.showHead==="everyPage")&&r.head.forEach(function(H){return c(u,r,H,S,h)})}function t(u,r,S,h,x){u.applyStyles(u.userStyles),r.body.forEach(function(H,D){var W=D===r.body.length-1;p(u,r,H,W,S,h,x)})}function e(u,r,S,h,x,H){u.applyStyles(u.userStyles),H=H??r.body.length;var D=Math.min(S+H,r.body.length),W=-1;return r.body.slice(S,D).forEach(function(j,R){var F=S+R===r.body.length-1,B=P(u,r,F,h);j.canEntireRowFit(B,x)&&(c(u,r,j,h,x),W=S+R)}),W}function l(u,r,S,h){var x=r.settings;u.applyStyles(u.userStyles),(x.showFoot==="lastPage"||x.showFoot==="everyPage")&&r.foot.forEach(function(H){return c(u,r,H,S,h)})}function s(u,r,S){var h=S.getLineHeight(u.styles.fontSize),x=u.padding("vertical"),H=Math.floor((r-x)/h);return Math.max(0,H)}function i(u,r,S,h){var x={};u.spansMultiplePages=!0,u.height=0;for(var H=0,D=0,W=S.columns;D<W.length;D++){var j=W[D],R=u.cells[j.index];if(R){Array.isArray(R.text)||(R.text=[R.text]);var F=new w.Cell(R.raw,R.styles,R.section);F=(0,C.assign)(F,R),F.text=[];var B=s(R,r,h);R.text.length>B&&(F.text=R.text.splice(B,R.text.length));var I=h.scaleFactor(),G=h.getLineHeightFactor();R.contentHeight=R.getContentHeight(I,G),R.contentHeight>=r&&(R.contentHeight=r,F.styles.minCellHeight-=r),R.contentHeight>u.height&&(u.height=R.contentHeight),F.contentHeight=F.getContentHeight(I,G),F.contentHeight>H&&(H=F.contentHeight),x[j.index]=F}}var Z=new w.Row(u.raw,-1,u.section,x,!0);Z.height=H;for(var q=0,rt=S.columns;q<rt.length;q++){var j=rt[q],F=Z.cells[j.index];F&&(F.height=Z.height);var R=u.cells[j.index];R&&(R.height=u.height)}return Z}function f(u,r,S,h){var x=u.pageSize().height,H=h.settings.margin,D=H.top+H.bottom,W=x-D;r.section==="body"&&(W-=h.getHeadHeight(h.columns)+h.getFootHeight(h.columns));var j=r.getMinimumRowHeight(h.columns,u),R=j<S;if(j>W)return console.error("Will not be able to print row ".concat(r.index," correctly since it's minimum height is larger than page height")),!0;if(!R)return!1;var F=r.hasRowSpan(h.columns),B=r.getMaxCellHeight(h.columns)>W;return B?(F&&console.error("The content of row ".concat(r.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(F||h.settings.rowPageBreak==="avoid")}function p(u,r,S,h,x,H,D){var W=P(u,r,h,H);if(S.canEntireRowFit(W,D))c(u,r,S,H,D);else if(f(u,S,W,r)){var j=i(S,W,r,u);c(u,r,S,H,D),_(u,r,x,H,D),p(u,r,j,h,x,H,D)}else _(u,r,x,H,D),p(u,r,S,h,x,H,D)}function c(u,r,S,h,x){h.x=r.settings.margin.left;for(var H=0,D=x;H<D.length;H++){var W=D[H],j=S.cells[W.index];if(!j){h.x+=W.width;continue}u.applyStyles(j.styles),j.x=h.x,j.y=h.y;var R=r.callCellHooks(u,r.hooks.willDrawCell,j,S,W,h);if(R===!1){h.x+=W.width;continue}g(u,j,h);var F=j.getTextPos();(0,a.default)(j.text,F.x,F.y,{halign:j.styles.halign,valign:j.styles.valign,maxWidth:Math.ceil(j.width-j.padding("left")-j.padding("right"))},u.getDocument()),r.callCellHooks(u,r.hooks.didDrawCell,j,S,W,h),h.x+=W.width}h.y+=S.height}function g(u,r,S){var h=r.styles;if(u.getDocument().setFillColor(u.getDocument().getFillColor()),typeof h.lineWidth=="number"){var x=(0,A.getFillStyle)(h.lineWidth,h.fillColor);x&&u.rect(r.x,S.y,r.width,r.height,x)}else typeof h.lineWidth=="object"&&(h.fillColor&&u.rect(r.x,S.y,r.width,r.height,"F"),o(u,r,S,h.lineWidth))}function o(u,r,S,h){var x,H,D,W;h.top&&(x=S.x,H=S.y,D=S.x+r.width,W=S.y,h.right&&(D+=.5*h.right),h.left&&(x-=.5*h.left),j(h.top,x,H,D,W)),h.bottom&&(x=S.x,H=S.y+r.height,D=S.x+r.width,W=S.y+r.height,h.right&&(D+=.5*h.right),h.left&&(x-=.5*h.left),j(h.bottom,x,H,D,W)),h.left&&(x=S.x,H=S.y,D=S.x,W=S.y+r.height,h.top&&(H-=.5*h.top),h.bottom&&(W+=.5*h.bottom),j(h.left,x,H,D,W)),h.right&&(x=S.x+r.width,H=S.y,D=S.x+r.width,W=S.y+r.height,h.top&&(H-=.5*h.top),h.bottom&&(W+=.5*h.bottom),j(h.right,x,H,D,W));function j(R,F,B,I,G){u.getDocument().setLineWidth(R),u.getDocument().line(F,B,I,G,"S")}}function P(u,r,S,h){var x=r.settings.margin.bottom,H=r.settings.showFoot;return(H==="everyPage"||H==="lastPage"&&S)&&(x+=r.getFootHeight(r.columns)),u.pageSize().height-h.y-x}function _(u,r,S,h,x,H){x===void 0&&(x=[]),H===void 0&&(H=!1),u.applyStyles(u.userStyles),r.settings.showFoot==="everyPage"&&!H&&r.foot.forEach(function(W){return c(u,r,W,h,x)}),r.callEndPageHooks(u,h);var D=r.settings.margin;(0,A.addTableBorder)(u,r,S,h),O(u),r.pageNumber++,r.pageCount++,h.x=D.left,h.y=D.top,S.y=D.top,r.callWillDrawPageHooks(u,h),r.settings.showHead==="everyPage"&&(r.head.forEach(function(W){return c(u,r,W,h,x)}),u.applyStyles(u.userStyles))}y.addPage=_;function O(u){var r=u.pageNumber();u.setPage(r+1);var S=u.pageNumber();return S===r?(u.addPage(),!0):!1}},224:function(k,y,T){Object.defineProperty(y,"__esModule",{value:!0}),y.calculateAllColumnsCanFitInPage=void 0;var A=T(420);function w(C,a,b){var v;b===void 0&&(b={});var d=(0,A.getPageAvailableWidth)(C,a),n=new Map,t=[],e=[],l=[];a.settings.horizontalPageBreakRepeat,Array.isArray(a.settings.horizontalPageBreakRepeat)?l=a.settings.horizontalPageBreakRepeat:(typeof a.settings.horizontalPageBreakRepeat=="string"||typeof a.settings.horizontalPageBreakRepeat=="number")&&(l=[a.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var c=a.columns.find(function(g){return g.dataKey===p||g.index===p});c&&!n.has(c.index)&&(n.set(c.index,!0),t.push(c.index),e.push(a.columns[c.index]),d-=c.wrappedWidth)});for(var s=!0,i=(v=b?.start)!==null&&v!==void 0?v:0;i<a.columns.length;){if(n.has(i)){i++;continue}var f=a.columns[i].wrappedWidth;if(s||d>=f)s=!1,t.push(i),e.push(a.columns[i]),d-=f;else break;i++}return{colIndexes:t,columns:e,lastIndex:i-1}}function m(C,a){for(var b=[],v=0;v<a.columns.length;v++){var d=w(C,a,{start:v});d.columns.length&&(b.push(d),v=d.lastIndex)}return b}y.calculateAllColumnsCanFitInPage=m},324:function(k,y,T){Object.defineProperty(y,"__esModule",{value:!0}),y.ellipsize=y.resizeColumns=y.calculateWidths=void 0;var A=T(420);function w(t,e){m(t,e);var l=[],s=0;e.columns.forEach(function(f){var p=f.getMaxCustomCellWidth(e);p?f.width=p:(f.width=f.wrappedWidth,l.push(f)),s+=f.width});var i=e.getWidth(t.pageSize().width)-s;i&&(i=C(l,i,function(f){return Math.max(f.minReadableWidth,f.minWidth)})),i&&(i=C(l,i,function(f){return f.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),b(e),v(e,t),a(e)}y.calculateWidths=w;function m(t,e){var l=t.scaleFactor(),s=e.settings.horizontalPageBreak,i=(0,A.getPageAvailableWidth)(t,e);e.allRows().forEach(function(f){for(var p=0,c=e.columns;p<c.length;p++){var g=c[p],o=f.cells[g.index];if(o){var P=e.hooks.didParseCell;e.callCellHooks(t,P,o,f,g,null);var _=o.padding("horizontal");o.contentWidth=(0,A.getStringWidth)(o.text,o.styles,t)+_;var O=(0,A.getStringWidth)(o.text.join(" ").split(/[^\S\u00A0]+/),o.styles,t);if(o.minReadableWidth=O+o.padding("horizontal"),typeof o.styles.cellWidth=="number")o.minWidth=o.styles.cellWidth,o.wrappedWidth=o.styles.cellWidth;else if(o.styles.cellWidth==="wrap"||s===!0)o.contentWidth>i?(o.minWidth=i,o.wrappedWidth=i):(o.minWidth=o.contentWidth,o.wrappedWidth=o.contentWidth);else{var u=10/l;o.minWidth=o.styles.minCellWidth||u,o.wrappedWidth=o.contentWidth,o.minWidth>o.wrappedWidth&&(o.wrappedWidth=o.minWidth)}}}}),e.allRows().forEach(function(f){for(var p=0,c=e.columns;p<c.length;p++){var g=c[p],o=f.cells[g.index];if(o&&o.colSpan===1)g.wrappedWidth=Math.max(g.wrappedWidth,o.wrappedWidth),g.minWidth=Math.max(g.minWidth,o.minWidth),g.minReadableWidth=Math.max(g.minReadableWidth,o.minReadableWidth);else{var P=e.styles.columnStyles[g.dataKey]||e.styles.columnStyles[g.index]||{},_=P.cellWidth||P.minCellWidth;_&&typeof _=="number"&&(g.minWidth=_,g.wrappedWidth=_)}o&&(o.colSpan>1&&!g.minWidth&&(g.minWidth=o.minWidth),o.colSpan>1&&!g.wrappedWidth&&(g.wrappedWidth=o.minWidth))}})}function C(t,e,l){for(var s=e,i=t.reduce(function(u,r){return u+r.wrappedWidth},0),f=0;f<t.length;f++){var p=t[f],c=p.wrappedWidth/i,g=s*c,o=p.width+g,P=l(p),_=o<P?P:o;e-=_-p.width,p.width=_}if(e=Math.round(e*1e10)/1e10,e){var O=t.filter(function(u){return e<0?u.width>l(u):!0});O.length&&(e=C(O,e,l))}return e}y.resizeColumns=C;function a(t){for(var e={},l=1,s=t.allRows(),i=0;i<s.length;i++)for(var f=s[i],p=0,c=t.columns;p<c.length;p++){var g=c[p],o=e[g.index];if(l>1)l--,delete f.cells[g.index];else if(o)o.cell.height+=f.height,l=o.cell.colSpan,delete f.cells[g.index],o.left--,o.left<=1&&delete e[g.index];else{var P=f.cells[g.index];if(!P)continue;if(P.height=f.height,P.rowSpan>1){var _=s.length-i,O=P.rowSpan>_?_:P.rowSpan;e[g.index]={cell:P,left:O,row:f}}}}}function b(t){for(var e=t.allRows(),l=0;l<e.length;l++)for(var s=e[l],i=null,f=0,p=0,c=0;c<t.columns.length;c++){var g=t.columns[c];if(p-=1,p>1&&t.columns[c+1])f+=g.width,delete s.cells[g.index];else if(i){var o=i;delete s.cells[g.index],i=null,o.width=g.width+f}else{var o=s.cells[g.index];if(!o)continue;if(p=o.colSpan,f=0,o.colSpan>1){i=o,f+=g.width;continue}o.width=g.width+f}}}function v(t,e){for(var l={count:0,height:0},s=0,i=t.allRows();s<i.length;s++){for(var f=i[s],p=0,c=t.columns;p<c.length;p++){var g=c[p],o=f.cells[g.index];if(o){e.applyStyles(o.styles,!0);var P=o.width-o.padding("horizontal");if(o.styles.overflow==="linebreak")o.text=e.splitTextToSize(o.text,P+1/e.scaleFactor(),{fontSize:o.styles.fontSize});else if(o.styles.overflow==="ellipsize")o.text=d(o.text,P,o.styles,e,"...");else if(o.styles.overflow==="hidden")o.text=d(o.text,P,o.styles,e,"");else if(typeof o.styles.overflow=="function"){var _=o.styles.overflow(o.text,P);typeof _=="string"?o.text=[_]:o.text=_}o.contentHeight=o.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var O=o.contentHeight/o.rowSpan;o.rowSpan>1&&l.count*l.height<O*o.rowSpan?l={height:O,count:o.rowSpan}:l&&l.count>0&&l.height>O&&(O=l.height),O>f.height&&(f.height=O)}}l.count--}}function d(t,e,l,s,i){return t.map(function(f){return n(f,e,l,s,i)})}y.ellipsize=d;function n(t,e,l,s,i){var f=1e4*s.scaleFactor();if(e=Math.ceil(e*f)/f,e>=(0,A.getStringWidth)(t,l,s))return t;for(;e<(0,A.getStringWidth)(t+i,l,s)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}},964:function(k){if(typeof U>"u"){var y=new Error("Cannot find module 'undefined'");throw y.code="MODULE_NOT_FOUND",y}k.exports=U}},M={};function z(k){var y=M[k];if(y!==void 0)return y.exports;var T=M[k]={exports:{}};return E[k].call(T.exports,T,T.exports,z),T.exports}var Y={};return function(){var k=Y;Object.defineProperty(k,"__esModule",{value:!0}),k.Cell=k.Column=k.Row=k.Table=k.CellHookData=k.__drawTable=k.__createTable=k.applyPlugin=void 0;var y=z(340),T=z(776),A=z(664),w=z(972),m=z(260);Object.defineProperty(k,"Table",{enumerable:!0,get:function(){return m.Table}});var C=z(172);Object.defineProperty(k,"CellHookData",{enumerable:!0,get:function(){return C.CellHookData}});var a=z(260);Object.defineProperty(k,"Cell",{enumerable:!0,get:function(){return a.Cell}}),Object.defineProperty(k,"Column",{enumerable:!0,get:function(){return a.Column}}),Object.defineProperty(k,"Row",{enumerable:!0,get:function(){return a.Row}});function b(e){(0,y.default)(e)}k.applyPlugin=b;function v(e,l){var s=(0,T.parseInput)(e,l),i=(0,w.createTable)(e,s);(0,A.drawTable)(e,i)}function d(e,l){var s=(0,T.parseInput)(e,l);return(0,w.createTable)(e,s)}k.__createTable=d;function n(e,l){(0,A.drawTable)(e,l)}k.__drawTable=n;try{var t=z(964);t.jsPDF&&(t=t.jsPDF),b(t)}catch{}k.default=v}(),Y}()})});et();var Ot=zt(jt());var V=class U{exportToPDF(E,M,z,Y){let k=new Mt;k.text(z,14,10),(0,Ot.default)(k,{head:[M],body:E.map(y=>M.map(T=>y[T]||"")),startY:20}),k.save(`${Y}.pdf`)}static \u0275fac=function(M){return new(M||U)};static \u0275prov=ot({token:U,factory:U.\u0275fac,providedIn:"root"})};var Lt=()=>({"min-width":"50rem","max-width":"100%"});function Nt(U,E){U&1&&(L(0,"tr")(1,"th",5),$(2,"ID Consulta"),N(),L(3,"th",6),$(4,"Fecha Consulta"),N(),L(5,"th",7),$(6,"Motivo Consulta"),N(),L(7,"th",6),$(8,"Diagn\xF3stico"),N(),L(9,"th",6),$(10,"Nota"),N(),L(11,"th",8),$(12,"Acciones"),N()())}function Ut(U,E){if(U&1){let M=ht();L(0,"tr")(1,"td"),$(2),N(),L(3,"td"),$(4),N(),L(5,"td"),$(6),N(),L(7,"td"),$(8),N(),L(9,"td"),$(10),N(),L(11,"td")(12,"button",9),tt("click",function(){let Y=st(M).$implicit,k=gt();return ft(k.irATratamiento(Y.id))}),N()()()}if(U&2){let M=E.$implicit;J(2),X(M.id),J(2),X(M.fechaConsulta),J(2),X(M.motivoConsulta),J(2),X(M.diagnostico),J(2),X(M.nota)}}var nt=class U{constructor(E,M,z,Y,k,y,T,A){this.router=E;this.route=M;this.aseguradoService=z;this.consultaService=Y;this.tratamientoService=k;this.bitacoraService=y;this.authService=T;this.pdfExportService=A}asegurado=null;consultas=[];ngOnInit(){this.route.paramMap.subscribe(E=>{let M=Number(E.get("aseguradoId"));M&&this.obtenerAsegurado(M)})}obtenerAsegurado(E){this.aseguradoService.getAseguradoById(E).subscribe(M=>{this.asegurado=M,M.historiaClinica&&M.historiaClinica.id&&this.obtenerConsultas(M.historiaClinica.id)},M=>{console.error("Error al obtener el asegurado:",M)})}obtenerConsultas(E){this.consultaService.getConsultasPorHistoriaClinicaId(E).subscribe(M=>{this.consultas=M,this.verificarTratamientos()},M=>{console.error("Error al obtener las consultas:",M)})}verificarTratamientos(){this.consultas.forEach(E=>{E.id!==void 0?this.tratamientoService.getTratamientoByConsultaId(E.id).subscribe(M=>{E.tieneTratamiento=!!M},M=>{E.tieneTratamiento=!1}):E.tieneTratamiento=!1})}registrarBitacora(E,M,z){this.bitacoraService.getUserIP().subscribe({next:Y=>{let k=new Date,y=`${k.getFullYear()}-${(k.getMonth()+1).toString().padStart(2,"0")}-${k.getDate().toString().padStart(2,"0")}`,T=`${k.getHours().toString().padStart(2,"0")}:${k.getMinutes().toString().padStart(2,"0")}:${k.getSeconds().toString().padStart(2,"0")}`,A={correo:this.authService.getAuthenticatedUserEmail()||"",fecha:y,hora:T,ip:Y.ip,accion:E,detalle:M};this.bitacoraService.createBitacora(A).subscribe({next:()=>{console.log("Registro de bit\xE1cora exitoso"),z()},error:w=>{console.error("Error al registrar en bit\xE1cora",w),z()}})},error:Y=>{console.error("Error al obtener IP",Y),z()}})}irATratamiento(E){if(this.asegurado){let M=`${this.asegurado.usuario.nombre} ${this.asegurado.usuario.apellido}`,z=`Listar tratamiento de la consulta (${E}) del paciente (${M})`;this.registrarBitacora("Listar tratamiento",z,()=>{this.router.navigate(["/tratamiento",E])})}else console.error("El asegurado no est\xE1 disponible."),this.router.navigate(["/tratamiento",E])}exportarHistoriaClinica(){if(this.consultas.length>0){let E=["id","fechaConsulta","motivoConsulta","diagnostico","nota"],M=this.consultas.map(z=>({id:z.id,fechaConsulta:z.fechaConsulta,motivoConsulta:z.motivoConsulta,diagnostico:z.diagnostico,nota:z.nota}));this.pdfExportService.exportToPDF(M,E,"Historia Cl\xEDnica","historia_clinica")}else console.error("No hay datos para exportar.")}static \u0275fac=function(M){return new(M||U)(K(yt),K(mt),K(kt),K(Ft),K(At),K(St),K(bt),K(V))};static \u0275cmp=lt({type:U,selectors:[["app-historia-clinica"]],standalone:!0,features:[pt],decls:7,vars:3,consts:[[1,"historia-clinica-container"],["pButton","","type","button","label","Exportar PDF","icon","pi pi-file-pdf",3,"click"],["dataKey","id",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[2,"width","15%"],[2,"width","20%"],[2,"width","25%"],[2,"width","10%"],["pButton","","type","button","icon","pi pi-arrow-right",1,"p-button-rounded","p-button-text","p-button-info",3,"click"]],template:function(M,z){M&1&&(L(0,"div",0)(1,"h3"),$(2,"Historia Cl\xEDnica de Usuario"),N(),L(3,"button",1),tt("click",function(){return z.exportarHistoriaClinica()}),N(),L(4,"p-table",2),ut(5,Nt,13,0,"ng-template",3)(6,Ut,13,5,"ng-template",4),N()()),M&2&&(J(4),dt("value",z.consultas)("tableStyle",ct(2,Lt)))},dependencies:[vt,Wt,_t,Ct,wt,Tt,Ht,Pt,Dt,xt],styles:[".historia-clinica-container[_ngcontent-%COMP%]{max-width:100%;margin:auto;padding:1.5rem;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 8px #0000001a}.historia-clinica-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#3f51b5;text-align:center;margin-bottom:1.5rem;border-bottom:2px solid #ddd;padding-bottom:.5rem}.p-table[_ngcontent-%COMP%]{width:100%;border-radius:8px;overflow:hidden;font-size:.95rem;box-shadow:0 4px 8px #0000001a}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;padding:12px;text-align:center;font-weight:700}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f7f7f7}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;vertical-align:middle}.p-button-info[_ngcontent-%COMP%]{background-color:#3f51b5!important;color:#fff!important;width:2.5rem;height:2.5rem;border-radius:50%;transition:background-color .3s ease}.p-button-info[_ngcontent-%COMP%]:hover{background-color:#2c3e9e!important}"]})};export{nt as default};
