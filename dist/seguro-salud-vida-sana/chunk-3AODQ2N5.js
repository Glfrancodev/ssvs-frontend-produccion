import{a as j,b as L}from"./chunk-TH7K6BJO.js";import{B as N,d as s,f as F,l as k,n as W,u as A}from"./chunk-LJKAMAZ5.js";import{b as D,d as I,e as R,j as T}from"./chunk-W5NNSEVP.js";import"./chunk-4YRY4IP2.js";import{a as O}from"./chunk-S2R25WKX.js";import"./chunk-V6WZIOIM.js";import{p as w,r as E}from"./chunk-2HP4KZBQ.js";import{$a as M,Bb as g,Cb as f,Db as u,Eb as x,Fb as v,Gb as y,Ka as o,La as p,Pb as B,Qb as P,X as h,Ya as _,eb as e,fb as t,gb as C,nb as S,xb as n,yb as d}from"./chunk-TOSOZOFE.js";import"./chunk-ODN5LVDJ.js";var H=()=>({"min-width":"50rem","max-width":"100%"});function V(c,r){c&1&&(e(0,"tr")(1,"th"),n(2,"ID"),t(),e(3,"th"),n(4,"Correo"),t(),e(5,"th"),n(6,"Fecha"),t(),e(7,"th"),n(8,"Hora"),t(),e(9,"th"),n(10,"IP"),t(),e(11,"th"),n(12,"Acci\xF3n"),t(),e(13,"th"),n(14,"Detalle"),t()())}function q(c,r){if(c&1&&(e(0,"tr")(1,"td"),n(2),t(),e(3,"td"),n(4),t(),e(5,"td"),n(6),B(7,"date"),t(),e(8,"td"),n(9),t(),e(10,"td"),n(11),t(),e(12,"td"),n(13),t(),e(14,"td"),n(15),t()()),c&2){let i=r.$implicit;o(2),d(i.id),o(2),d(i.correo),o(2),d(P(7,7,i.fecha,"dd/MM/yyyy")),o(3),d(i.hora),o(2),d(i.ip),o(2),d(i.accion),o(2),d(i.detalle)}}var b=class c{constructor(r,i){this.bitacoraService=r;this.messageService=i}bitacoras=[];selectedRange={start:new Date,end:new Date};ngOnInit(){this.getAllBitacoras()}getAllBitacoras(){this.bitacoraService.getBitacoras().subscribe(r=>{this.bitacoras=r.sort((i,a)=>(a.id??0)-(i.id??0))})}filterByDateRange(){let r=new Date(this.selectedRange.start),i=new Date(this.selectedRange.end);this.bitacoraService.getBitacorasByDateRange(r,i).subscribe(a=>{this.bitacoras=a.sort((m,l)=>(l.id??0)-(m.id??0))})}static \u0275fac=function(i){return new(i||c)(p(O),p(s))};static \u0275cmp=h({type:c,selectors:[["app-bitacora"]],standalone:!0,features:[x([s]),v],decls:15,vars:5,consts:[[1,"bitacora-container"],[1,"filter-date-range"],["for","start-date"],["type","date","id","start-date",3,"ngModelChange","ngModel"],["for","end-date"],["type","date","id","end-date",3,"ngModelChange","ngModel"],["pButton","","label","Filtrar","icon","pi pi-filter",3,"click"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"]],template:function(i,a){i&1&&(C(0,"p-toast"),e(1,"div",0)(2,"h3"),n(3,"Registro de Bit\xE1cora"),t(),e(4,"div",1)(5,"label",2),n(6,"Fecha Inicio:"),t(),e(7,"input",3),u("ngModelChange",function(l){return f(a.selectedRange.start,l)||(a.selectedRange.start=l),l}),t(),e(8,"label",4),n(9,"Fecha Fin:"),t(),e(10,"input",5),u("ngModelChange",function(l){return f(a.selectedRange.end,l)||(a.selectedRange.end=l),l}),t(),e(11,"button",6),S("click",function(){return a.filterByDateRange()}),t()(),e(12,"p-table",7),_(13,V,15,0,"ng-template",8)(14,q,16,10,"ng-template",9),t()()),i&2&&(o(7),g("ngModel",a.selectedRange.start),o(3),g("ngModel",a.selectedRange.end),o(2),M("value",a.bitacoras)("tableStyle",y(4,H)))},dependencies:[E,w,N,A,F,T,D,I,R,W,k,L,j],styles:[".bitacora-container[_ngcontent-%COMP%]{max-width:100%;margin:auto;overflow-x:auto}h3[_ngcontent-%COMP%]{text-align:center;color:#3f51b5;font-weight:700}.filter-date-range[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;align-items:center}.filter-date-range[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.filter-date-range[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border-radius:5px;border:1px solid #ddd}.p-table[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #00000026}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;font-weight:700;text-align:center;padding:12px}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e3f2fd}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center}"]})};export{b as default};
