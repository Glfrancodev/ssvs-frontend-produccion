import{b as B,d as F,e as j,j as P}from"./chunk-W5NNSEVP.js";import{a as L}from"./chunk-S2R25WKX.js";import{j as M,o as I}from"./chunk-V6WZIOIM.js";import{m as _,r as E}from"./chunk-2HP4KZBQ.js";import{$a as p,Bb as u,Cb as f,Db as x,Fb as w,Ka as c,La as m,X as v,Ya as g,eb as r,fb as e,ga as h,gb as a,nb as y,ob as S,xb as l,yb as C}from"./chunk-TOSOZOFE.js";import"./chunk-ODN5LVDJ.js";function k(s,n){if(s&1&&(r(0,"div",30),l(1),e()),s&2){let t=S();c(),C(t.error)}}function O(s,n){s&1&&(r(0,"div",31),a(1,"div",32),r(2,"p"),l(3,"Cargando..."),e()())}var b=class s{constructor(n,t,i){this.authService=n;this.router=t;this.bitacoraService=i}correo="";contrasena="";cargando=!1;error="";login(){this.cargando=!0,this.error="",this.authService.login(this.correo,this.contrasena).subscribe({next:()=>{this.registrarBitacora(),this.cargando=!1,this.router.navigate(["/dashboard"])},error:()=>{this.cargando=!1,this.error="Datos ingresados Err\xF3neos"}})}registrarBitacora(){this.bitacoraService.getUserIP().subscribe({next:n=>{let t=new Date,i=`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`,d=`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`,o={correo:this.correo,fecha:i,hora:d,ip:n.ip,accion:"Inicio de sesi\xF3n correcto",detalle:"El usuario inici\xF3 sesi\xF3n en la plataforma"};this.bitacoraService.createBitacora(o).subscribe({next:()=>console.log("Bit\xE1cora registrada con \xE9xito"),error:D=>console.error("Error al registrar en la bit\xE1cora",D)})},error:n=>console.error("Error al obtener IP",n)})}static \u0275fac=function(t){return new(t||s)(m(I),m(M),m(L))};static \u0275cmp=v({type:s,selectors:[["app-login"]],standalone:!0,features:[w],decls:37,vars:4,consts:[[1,"bg-green-900","absolute","top-0","left-0","bg-gradient-to-b","from-gray-900","via-gray-900","to-green-800","bottom-0","leading-5","h-full","w-full","overflow-hidden"],[1,"relative","min-h-screen","sm:flex","sm:flex-row","justify-center","bg-transparent","rounded-3xl","shadow-xl"],[1,"flex-col","flex","self-center","lg:px-14","sm:max-w-4xl","xl:max-w-md","z-10"],[1,"self-start","hidden","lg:flex","flex-col","text-gray-300"],[1,"my-3","font-semibold","text-4xl"],[1,"pr-3","text-sm","opacity-75"],[1,"flex","justify-center","self-center","z-10"],[1,"p-12","bg-white","mx-auto","rounded-3xl","w-96"],[1,"mb-7"],[1,"font-semibold","text-2xl","text-gray-800"],["class","error-box",4,"ngIf"],[1,"space-y-6"],[1,""],["type","","placeholder","Correo",1,"w-full","text-sm","px-4","py-3","bg-gray-200","focus:bg-gray-100","border","border-gray-200","rounded-lg","focus:outline-none","focus:border-purple-400",3,"ngModelChange","ngModel"],["x-data","{ show: true }",1,"relative"],["placeholder","Contrase\xF1a","type","password",1,"text-sm","text-gray-200","px-4","py-3","rounded-lg","w-full","bg-gray-200","focus:bg-gray-100","border","border-gray-200","focus:outline-none","focus:border-purple-400",2,"color","#000",3,"ngModelChange","ngModel"],[1,"flex","items-center","absolute","inset-y-0","right-0","mr-3","text-sm","leading-5"],[1,"flex","items-center","justify-between"],[1,"text-sm","ml-auto"],["href","#",1,"text-green-700","hover:text-green-600"],["type","submit",1,"w-full","flex","justify-center","bg-green-800","hover:bg-green-700","text-gray-100","p-3","rounded-lg","tracking-wide","font-semibold","cursor-pointer","transition","ease-in","duration-500",3,"click"],[1,"flex","items-center","justify-center","space-x-2","my-5"],[1,"h-px","w-16","bg-gray-100"],[1,"mt-7","text-center","text-gray-300","text-xs"],[1,"bg-transparent","absolute","w-full","bottom-0","left-0","z-30"],[1,"container","p-5","mx-auto","flex","items-center","justify-between"],[1,"flex","mr-auto"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1250 320",1,"absolute","bottom-0","left-0"],["fill","#fff","fill-opacity","0.9","d","M0,0L40,42.7C80,85,160,171,240,197.3C320,224,400,192,480,154.7C560,117,640,75,720,74.7C800,75,880,117,960,154.7C1040,192,1120,224,1200,213.3C1280,203,1360,149,1400,122.7L1440,96L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"],["class","loading-overlay",4,"ngIf"],[1,"error-box"],[1,"loading-overlay"],[1,"spinner"]],template:function(t,i){t&1&&(a(0,"div",0),r(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),l(5,"Bienvenido"),e(),r(6,"p",5),l(7,"Aqu\xED podr\xE1 solicitar citas m\xE9dicas, revisar su historial cl\xEDnico y gestionar su atenci\xF3n en un entorno digital confiable. En SSVS, estamos comprometidos con su bienestar y la protecci\xF3n de su informaci\xF3n."),e()()(),r(8,"div",6)(9,"div",7)(10,"div",8)(11,"h3",9),l(12,"Inicia Sesi\xF3n"),e()(),g(13,k,2,1,"div",10),r(14,"div",11)(15,"div",12)(16,"input",13),x("ngModelChange",function(o){return f(i.correo,o)||(i.correo=o),o}),e()(),r(17,"div",14)(18,"input",15),x("ngModelChange",function(o){return f(i.contrasena,o)||(i.contrasena=o),o}),e(),a(19,"div",16),e(),r(20,"div",17)(21,"div",18)(22,"a",19),l(23," \xBFOlvidaste tu contrase\xF1a? "),e()()(),r(24,"div")(25,"button",20),y("click",function(){return i.login()}),l(26," Inicia Sesi\xF3n "),e()(),r(27,"div",21),a(28,"span",22)(29,"span",22),e()(),a(30,"div",23),e()()(),r(31,"footer",24)(32,"div",25),a(33,"div",26),e()(),h(),r(34,"svg",27),a(35,"path",28),e(),g(36,O,4,0,"div",29)),t&2&&(c(13),p("ngIf",i.error),c(3),u("ngModel",i.correo),c(2),u("ngModel",i.contrasena),c(18),p("ngIf",i.cargando))},dependencies:[P,B,F,j,E,_],styles:[".loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff;z-index:1000}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid rgba(255,255,255,.3);border-top:5px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-box[_ngcontent-%COMP%]{background-color:#f8d7da;color:#842029;padding:.5rem;border:1px solid #f5c2c7;border-radius:4px;text-align:center;margin-bottom:1rem;font-size:.9rem}"]})};export{b as default};
