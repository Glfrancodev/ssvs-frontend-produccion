import{a as Z}from"./chunk-WBEXYDI3.js";import{a as $}from"./chunk-QZX63QLI.js";import{a as k}from"./chunk-HLNEE2H6.js";import{a as X,b as Y}from"./chunk-FXNARXVT.js";import{B as U,d as _,f as j,j as z,k as L,l as R,m as K,n as q,s as G,t as H,u as J,v as Q}from"./chunk-F7MBEHRF.js";import{b as A,d as D,e as V,f as F,g as B,j as W}from"./chunk-24563CTF.js";import"./chunk-4YRY4IP2.js";import"./chunk-EALBQTKK.js";import{m as T,q as N}from"./chunk-5DWL5JJZ.js";import{$a as f,Ab as n,Bb as M,Db as I,Eb as h,Fb as v,Gb as C,Hb as w,Ib as O,Jb as P,Na as c,Oa as p,_ as S,cb as m,ha as u,hb as t,ia as g,ib as i,jb as y,nb as E,qb as b,rb as l}from"./chunk-3RWLLOHT.js";var ee=()=>({"min-width":"50rem"});function ie(a,d){if(a&1){let e=E();t(0,"div",8)(1,"h3"),n(2,"Informaci\xF3n de la Especialidad"),i(),t(3,"div",1)(4,"label"),n(5,"ID:"),i(),t(6,"span"),n(7),i()(),t(8,"div",1)(9,"label"),n(10,"Nombre:"),i(),t(11,"span"),n(12),i()(),t(13,"div",1)(14,"label"),n(15,"Asignar M\xE9dico"),i(),t(16,"p-dropdown",9),C("ngModelChange",function(r){u(e);let s=l();return v(s.selectedMedicoId,r)||(s.selectedMedicoId=r),g(r)}),i()(),t(17,"div",4)(18,"p-button",10),b("click",function(){u(e);let r=l();return g(r.assignMedico())}),i()()()}if(a&2){let e=l();c(7),M(e.especialidad.id),c(5),M(e.especialidad.nombre),c(4),m("options",e.medicosNoAsignados),h("ngModel",e.selectedMedicoId)}}function te(a,d){a&1&&(t(0,"tr")(1,"th",14),n(2,"ID M\xE9dico"),i(),t(3,"th"),n(4,"Nombre M\xE9dico"),i(),t(5,"th"),n(6,"Acciones"),i()())}function de(a,d){if(a&1){let e=E();t(0,"tr")(1,"td"),n(2),i(),t(3,"td"),n(4),i(),t(5,"td")(6,"button",15),b("click",function(){let r=u(e).$implicit,s=l(2);return g(s.deleteMedicoEspecialidad(r.id))}),i()()()}if(a&2){let e=d.$implicit;c(2),M(e.medico.id),c(2),I("",e.medico.usuario.nombre," ",e.medico.usuario.apellido,"")}}function oe(a,d){if(a&1&&(t(0,"p-table",11),f(1,te,7,0,"ng-template",12)(2,de,7,3,"ng-template",13),i()),a&2){let e=l();m("value",e.medicoEspecialidades)("tableStyle",P(4,ee))("sortField",e.sortField)("sortOrder",e.sortOrder)}}var x=class a{constructor(d,e,o,r){this.especialidadService=d;this.medicoService=e;this.medicoEspecialidadService=o;this.messageService=r}especialidadId=0;especialidad=null;medicoEspecialidades=[];medicosNoAsignados=[];selectedMedicoId=null;sortField="medico.id";sortOrder=1;ngOnInit(){}buscarEspecialidad(){this.especialidadId>0?this.especialidadService.getEspecialidadById(this.especialidadId).subscribe(d=>{d?(this.especialidad=d,this.buscarMedicoEspecialidades()):(this.messageService.add({severity:"warn",summary:"Advertencia",detail:"Ingrese un ID de especialidad v\xE1lido"}),this.especialidad=null,this.medicoEspecialidades=[],this.medicosNoAsignados=[])},()=>this.messageService.add({severity:"error",summary:"Error",detail:"Error al buscar la especialidad"})):this.messageService.add({severity:"warn",summary:"Advertencia",detail:"Ingrese un ID de especialidad v\xE1lido"})}buscarMedicoEspecialidades(){this.medicoEspecialidadService.getMedicoEspecialidades().subscribe(d=>{this.medicoEspecialidades=d.filter(e=>e.especialidad.id===this.especialidadId).sort((e,o)=>(e.medico.id||0)-(o.medico.id||0)),this.buscarMedicosNoAsignados()},()=>this.messageService.add({severity:"error",summary:"Error",detail:"Error al obtener m\xE9dicos de la especialidad"}))}buscarMedicosNoAsignados(){this.medicoService.getMedicos().subscribe(d=>{let e=this.medicoEspecialidades.map(o=>o.medico.id);this.medicosNoAsignados=d.filter(o=>!e.includes(o.id))})}assignMedico(){if(this.selectedMedicoId){let d={especialidad:this.especialidad,medico:{id:this.selectedMedicoId}};this.medicoEspecialidadService.createMedicoEspecialidad(d).subscribe(()=>{this.buscarMedicoEspecialidades(),this.buscarMedicosNoAsignados(),this.selectedMedicoId=null,this.messageService.add({severity:"success",summary:"Asignado",detail:"M\xE9dico asignado correctamente"})},()=>this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo asignar el m\xE9dico"}))}else this.messageService.add({severity:"error",summary:"Error",detail:"Seleccione un m\xE9dico para asignar"})}deleteMedicoEspecialidad(d){this.medicoEspecialidadService.deleteMedicoEspecialidad(d).subscribe(()=>{this.medicoEspecialidades=this.medicoEspecialidades.filter(e=>e.id!==d),this.buscarMedicosNoAsignados(),this.messageService.add({severity:"success",summary:"Eliminado",detail:"M\xE9dico de la especialidad eliminado correctamente"})})}static \u0275fac=function(e){return new(e||a)(p(Z),p(k),p($),p(_))};static \u0275cmp=S({type:a,selectors:[["app-medico-especialidad"]],standalone:!0,features:[w([_]),O],decls:12,vars:3,consts:[[1,"form-container"],[1,"form-field"],["for","especialidadId"],["id","especialidadId","type","number","pInputText","","placeholder","Ingrese el ID de la especialidad","min","0",3,"ngModelChange","ngModel"],[1,"form-field","center-content"],["icon","pi pi-search","label","Buscar","styleClass","p-button-raised p-button-info button-custom",3,"click"],["class","specialty-info",4,"ngIf"],["dataKey","id","editMode","row",3,"value","tableStyle","sortField","sortOrder",4,"ngIf"],[1,"specialty-info"],["optionLabel","item","optionValue","id","placeholder","Seleccione un m\xE9dico",1,"input-dropdown",3,"ngModelChange","options","ngModel"],["icon","pi pi-plus","label","Asignar","styleClass","p-button-raised p-button-success button-custom",3,"click"],["dataKey","id","editMode","row",3,"value","tableStyle","sortField","sortOrder"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","medico.id"],["pButton","","pRipple","","type","button","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(e,o){e&1&&(y(0,"p-toast"),t(1,"div",0)(2,"h3"),n(3,"Buscar Especialidad por ID"),i(),t(4,"div",1)(5,"label",2),n(6,"ID de la Especialidad"),i(),t(7,"input",3),C("ngModelChange",function(s){return v(o.especialidadId,s)||(o.especialidadId=s),s}),i()(),t(8,"div",4)(9,"p-button",5),b("click",function(){return o.buscarEspecialidad()}),i()(),f(10,ie,19,4,"div",6),i(),f(11,oe,3,5,"p-table",7)),e&2&&(c(7),h("ngModel",o.especialidadId),c(3),m("ngIf",o.especialidad),c(),m("ngIf",o.medicoEspecialidades.length>0))},dependencies:[Y,X,j,U,J,Q,N,T,W,A,F,D,B,V,q,R,K,L,z,H,G],styles:[".form-container[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid #dcdcdc;border-radius:12px;background-color:#f9f9f9;box-shadow:0 4px 8px #0000001a;margin-bottom:1.5rem;display:grid;grid-template-columns:1fr 1fr;gap:1rem;max-width:100%;margin:auto}.form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{grid-column:1 / -1;font-size:1.8rem;font-weight:700;color:#3f51b5;text-align:center;margin:0;margin-bottom:1rem;border-bottom:2px solid #ddd;padding-bottom:.5rem}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:.25rem}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-dropdown[_ngcontent-%COMP%]{width:100%;padding:.5rem;border-radius:6px;border:1px solid #ddd;background-color:#fff;font-size:.95rem;box-shadow:inset 0 1px 3px #0000001a}.input-dropdown[_ngcontent-%COMP%]:focus, .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3f51b5;box-shadow:0 0 4px #3f51b54d}.button-custom[_ngcontent-%COMP%]{width:100%;max-width:150px;font-size:1rem;border-radius:8px;padding:.75rem;margin:auto}.center-content[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center}.specialty-info[_ngcontent-%COMP%]{grid-column:1 / -1;border-top:1px solid #ddd;padding-top:1.5rem}.p-table[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:auto;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;font-size:.95rem}.p-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;font-weight:700;text-align:center;padding:12px}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f7f7f7}.p-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.p-button-danger[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;color:#d32f2f!important}.p-button-danger[_ngcontent-%COMP%]:hover{background-color:#d32f2f!important;color:#fff!important}"]})};export{x as default};
